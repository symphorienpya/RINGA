do not change anything in this, just fix and rewrite the full and complete corrected code <!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/x-icon" href="images/MDai 1.ico">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel | User Profiles</title>
<style>
    :root {
      --light-bg: linear-gradient(135deg, #f1f1f1, #e6ecf0);
      --light-text: #000;
      --dark-bg: #1a1a1a;
      --dark-text: #fff;
      --primary-color: #007BFF;
      --btn-hover: #0056b3;
      --save-color: #28a745;
      --save-hover: #218838;
      --delete-color: #dc3545;
      --delete-hover: #c82333;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--light-bg);
      color: var(--light-text);
      margin: 0;
      padding: 0;
      transition: all 0.5s ease-in-out;
      animation: fadeIn 1s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    body.dark {
      background: var(--dark-bg);
      color: var(--dark-text);
    }

    .sidebar {
      width: 250px;
      background: var(--primary-color);
      color: white;
      height: 100vh;
      position: fixed;
      top: 0;
      left: -250px;
      transition: left 0.3s ease;
      padding: 20px;
      z-index: 999;
      animation: slideInLeft 0.7s ease;
    }

    @keyframes slideInLeft {
      from { left: -300px; }
      to { left: 0; }
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar h3 {
      margin-top: 0;
    }

    .sidebar button {
      background: none;
      border: none;
      color: white;
      text-align: left;
      padding: 10px 0;
      cursor: pointer;
      width: 100%;
      font-size: 16px;
    }

    .sidebar button:hover {
      text-decoration: underline;
    }

    .sidebar button::before {
      content: '\1F4CA\0020';
      margin-right: 8px;
    }

    .sidebar button:nth-child(3)::before {
      content: '\1F465\0020';
    }

    .sidebar button:nth-child(4)::before {
      content: '\2699\FE0F\0020';
    }

    .menu-toggle {
      background: var(--primary-color);
      color: white;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      font-size: 16px;
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
      border-radius: 6px;
    }

    .menu-toggle::before {
      content: '\2630\0020';
    }

    .container {
      width: 100%;
      max-width: 100%;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      margin-left: 0;
      transition: margin-left 0.3s ease;
      animation: fadeInUp 0.6s ease;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    body.dark .container {
      background: #333;
    }

    .sidebar.open ~ .container {
      margin-left: 250px;
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 28px;
      color: var(--primary-color);
    }

    form, .search-bar, .filter-role {
      display: grid;
      gap: 15px;
      margin-bottom: 30px;
      animation: fadeIn 0.5s ease-in-out;
    }

    input, select, button {
      width: 100%;
      padding: 14px;
      font-size: 18px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    input:focus, select:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 8px rgba(0,123,255,0.2);
    }

    button:not(.menu-toggle):not(.sidebar button) {
      background: var(--primary-color);
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: var(--btn-hover);
    }

    .toggle-theme {
      float: right;
      font-size: 16px;
      margin-bottom: 10px;
    }

    .toggle-theme::before {
      content: '\1F319\0020';
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 16px;
      overflow-x: auto;
      display: block;
      animation: fadeIn 0.5s ease-in;
    }

    th, td {
      text-align: left;
      padding: 14px;
      border-bottom: 1px solid #ddd;
    }

    td[contenteditable]:focus {
      outline: 2px dashed var(--primary-color);
      background: #e6f0ff;
    }

    .btn-save, .btn-delete {
      padding: 8px 12px;
      font-size: 13px;
      border-radius: 4px;
      color: #fff;
      border: none;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .btn-save {
      background-color: var(--save-color);
    }

    .btn-save::before {
      content: '\1F4BE\0020';
    }

    .btn-save:hover {
      background-color: var(--save-hover);
    }

    .btn-delete {
      background-color: var(--delete-color);
    }

    .btn-delete::before {
      content: '\1F5D1\0020';
    }

    .btn-delete:hover {
      background-color: var(--delete-hover);
    }

    img.avatar {
      width: 50px;
      height: 50px;
      object-fit: cover;
      border-radius: 50%;
      border: 2px solid #ccc;
    }

    .error-message {
      color: red;
      font-size: 15px;
      text-align: center;
      margin-top: -10px;
    }

    @media(max-width: 768px) {
      .container {
        margin-left: 0 !important;
      }
      .menu-toggle {
        left: 10px;
      }
      form, .search-bar, .filter-role {
        width: 100%;
      }
      table, thead, tbody, th, td, tr {
        display: block;
      }
      thead {
        display: none;
      }
      td {
        position: relative;
        padding-left: 50%;
      }
      td::before {
        content: attr(data-label);
        position: absolute;
        left: 0;
        top: 14px;
        font-weight: bold;
      }
    }
  </style>
</head>
<body>

    <button class="menu-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')">â˜° Menu</button>
  <div class="sidebar">
    <h3>Navigation</h3>
    <button onclick="alert('Dashboard clicked')">Dashboard</button>
    <button onclick="alert('Users clicked')">Users</button>
    <button onclick="alert('Settings clicked')">Settings</button>
  </div>
  <div class="container">
    <button class="toggle-theme" onclick="toggleTheme()">ðŸŒ™ Toggle Theme</button>
    <h2>Admin Panel - User Management</h2>



    <form id="userForm">
      <input type="text" id="regNumber" placeholder="Registration Number" required />
      <input type="text" id="name" placeholder="Full Name" required />
      <input type="email" id="email" placeholder="Email" required />
      <input type="text" id="phone" placeholder="Phone Number" required />
      <input type="password" id="password" placeholder="Password" required />
      <select id="role" required>
        <option value="">Select Role</option>
        <option value="Student">Student</option>
        <option value="Instructor">Instructor</option>
        <option value="Admin">Admin</option>
      </select>
      <input type="file" id="avatar" accept="image/*" />
      <button type="submit" id="submitBtn">Create User</button>
      <p id="errorMessage" class="error-message" style="display: none;">Incorrect email or password. Please try again.</p>
    </form>

    <input type="text" id="search" class="search-bar" placeholder="Search by Name, Reg. Number, Email or Phone" />
    <select id="filterRole" class="filter-role">
      <option value="">Filter by role</option>
      <option value="Student">Student</option>
      <option value="Instructor">Instructor</option>
      <option value="Admin">Admin</option>
    </select>

    <div style="margin-bottom: 10px;">
      <button onclick="exportCSV()">Export CSV</button>
      <button onclick="exportPDF()">Export PDF</button>
    </div>

    <table id="userTable">
      <thead>
        <tr>
          <th>#</th>
          <th>Avatar</th>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Password</th>
          <th>Reg. Number</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <script>
    const errorMessage = document.getElementById("errorMessage");
    let users = JSON.parse(localStorage.getItem("users")) || [];

    function hashPassword(password) {
      return btoa(password);
    }

    document.getElementById("userForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const regNumber = document.getElementById("regNumber").value;
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const phone = document.getElementById("phone").value;
      const password = hashPassword(document.getElementById("password").value);
      const role = document.getElementById("role").value;
      const avatarInput = document.getElementById("avatar");
      const reader = new FileReader();

      const userData = (avatarBase64 = "") => {
        const user = { regNumber, name, email, phone, password, role, avatar: avatarBase64 };
        users.push(user);
        localStorage.setItem("users", JSON.stringify(users));
        renderUsers();
      };

      if (avatarInput.files[0]) {
        reader.onload = function (e) {
          userData(e.target.result);
        };
        reader.readAsDataURL(avatarInput.files[0]);
      } else {
        userData();
      }
    });

    function renderUsers(filtered = users) {
      const tbody = document.querySelector("#userTable tbody");
      tbody.innerHTML = "";
      filtered.forEach((user, i) => {
        tbody.innerHTML += `
          <tr>
            <td>${i + 1}</td>
            <td><img src="${user.avatar}" class="avatar"/></td>
            <td contenteditable onblur="updateUser(${i}, 'name', this.textContent)">${user.name}</td>
            <td contenteditable onblur="updateUser(${i}, 'email', this.textContent)">${user.email}</td>
            <td contenteditable onblur="updateUser(${i}, 'phone', this.textContent)">${user.phone}</td>
            <td contenteditable onblur="updateUser(${i}, 'password', hashPassword(this.textContent))">${atob(user.password)}</td>
            <td contenteditable onblur="updateUser(${i}, 'regNumber', this.textContent)">${user.regNumber}</td>
            <td contenteditable onblur="updateUser(${i}, 'role', this.textContent)">${user.role}</td>
            <td>
              <button class="btn-save" onclick="saveUser(${i})">Save</button>
              <button class="btn-delete" onclick="deleteUser(${i})">Delete</button>
            </td>
          </tr>
        `;
      });
    }

    document.getElementById("search").addEventListener("input", function () {
      const search = this.value.toLowerCase();
      const roleFilter = document.getElementById("filterRole").value;
      const filtered = users.filter(user => {
        const matchesText =
          user.name.toLowerCase().includes(search) ||
          user.regNumber.toLowerCase().includes(search) ||
          user.email.toLowerCase().includes(search) ||
          user.phone.toLowerCase().includes(search);
        const matchesRole = roleFilter ? user.role === roleFilter : true;
        return matchesText && matchesRole;
      });
      renderUsers(filtered);
    });

    document.getElementById("filterRole").addEventListener("change", function () {
      const role = this.value;
      const search = document.getElementById("search").value.toLowerCase();
      const filtered = users.filter(user => {
        const matchesText =
          user.name.toLowerCase().includes(search) ||
          user.regNumber.toLowerCase().includes(search) ||
          user.email.toLowerCase().includes(search) ||
          user.phone.toLowerCase().includes(search);
        const matchesRole = role ? user.role === role : true;
        return matchesText && matchesRole;
      });
      renderUsers(filtered);
    });

    function updateUser(index, field, value) {
      users[index][field] = value;
    }

    function saveUser(index) {
      localStorage.setItem("users", JSON.stringify(users));
      renderUsers();
    }

    function deleteUser(index) {
      users.splice(index, 1);
      localStorage.setItem("users", JSON.stringify(users));
      renderUsers();
    }

    function toggleTheme() {
      document.body.classList.toggle("dark");
    }

    function exportCSV() {
      let csv = 'RegNumber,Name,Email,Phone,Password,Role\n';
      users.forEach(u => {
        csv += `${u.regNumber},${u.name},${u.email},${u.phone},***********,${u.role}\n`;
      });
      const blob = new Blob([csv], { type: 'text/csv' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'users.csv';
      link.click();
    }

    function exportPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.autoTable({
        head: [['RegNumber', 'Name', 'Email', 'Phone', 'Password', 'Role']],
        body: users.map(u => [u.regNumber, u.name, u.email, u.phone, '***********', u.role])
      });
      doc.save('users.pdf');
    }

    renderUsers();
  </script>
  
</body>
</html>
