<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InterroPlatform - Advanced Assessment System</title>
    <link rel="icon" type="image/png" href="images/AI.png" />
    <link rel="shortcut icon" type="image/png" href="images/AI.png" />
    <link rel="apple-touch-icon" href="images/AI.png" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- EmailJS CDN -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script>
    <style>
      :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --secondary-gradient: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
        --success-gradient: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%);
        --danger-gradient: linear-gradient(45deg, #fa709a 0%, #fee140 100%);
        --dark-gradient: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        --glass-bg: rgba(255, 255, 255, 0.1);
        --glass-border: rgba(255, 255, 255, 0.2);
        --text-primary: #2c3e50;
        --text-secondary: #7f8c8d;
        --text-light: #ffffff;
        --shadow-light: 0 8px 32px rgba(0, 0, 0, 0.1);
        --shadow-medium: 0 12px 40px rgba(0, 0, 0, 0.15);
        --shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.2);
        --border-radius: 16px;
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --animation-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: var(--primary-gradient);
        min-height: 100vh;
        color: var(--text-primary);
        overflow-x: hidden;
        position: relative;
      }

      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
          radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
          radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
          radial-gradient(circle at 40% 80%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
        z-index: -1;
        animation: backgroundShift 20s ease-in-out infinite;
      }

      @keyframes backgroundShift {
        0%, 100% { transform: translateX(0) translateY(0); }
        25% { transform: translateX(-10px) translateY(-10px); }
        50% { transform: translateX(10px) translateY(-5px); }
        75% { transform: translateX(-5px) translateY(10px); }
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
        position: relative;
        z-index: 1;
      }

      .header {
        text-align: center;
        color: white;
        margin-bottom: 40px;
        padding: 40px 0;
        position: relative;
        backdrop-filter: blur(10px);
        background: var(--glass-bg);
        border-radius: var(--border-radius);
        border: 1px solid var(--glass-border);
        box-shadow: var(--shadow-medium);
        animation: headerFloat 6s ease-in-out infinite;
      }

      @keyframes headerFloat {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
      }

      .header h1 {
        font-size: 3.5rem;
        font-weight: 800;
        margin-bottom: 15px;
        background: linear-gradient(45deg, #fff, #f0f0f0, #fff);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: textShimmer 3s ease-in-out infinite;
        text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
        position: relative;
      }

      @keyframes textShimmer {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }

      .header p {
        font-size: 1.3rem;
        opacity: 0.95;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        font-weight: 300;
        letter-spacing: 0.5px;
      }

      /* Professional Logo Styling */
      .logo {
        width: 90px;
        height: 90px;
        object-fit: contain;
        margin-right: 25px;
        vertical-align: middle;
        filter: brightness(1.2) contrast(1.1) drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4));
        transition: var(--transition);
        animation: logoRotate 10s linear infinite;
      }

      @keyframes logoRotate {
        0% { transform: rotate(0deg) scale(1); }
        25% { transform: rotate(90deg) scale(1.05); }
        50% { transform: rotate(180deg) scale(1); }
        75% { transform: rotate(270deg) scale(1.05); }
        100% { transform: rotate(360deg) scale(1); }
      }

      .logo:hover {
        transform: scale(1.05) rotate(5deg);
        filter: brightness(1.3) contrast(1.2)
          drop-shadow(0 6px 12px rgba(0, 0, 0, 0.4));
      }

      @keyframes logoGlow {
        0% {
          filter: brightness(1.1) contrast(1.1)
            drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }
        100% {
          filter: brightness(1.2) contrast(1.15)
            drop-shadow(0 4px 12px rgba(255, 255, 255, 0.2));
        }
      }

      .header-content {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        gap: 20px;
      }

      .header-text {
        text-align: left;
      }

      .small-logo {
        width: 32px;
        height: 32px;
        object-fit: contain;
        vertical-align: middle;
        margin-right: 10px;
        filter: brightness(1.2) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        transition: all 0.2s ease;
      }

      .small-logo:hover {
        transform: scale(1.1);
        filter: brightness(1.4) drop-shadow(0 2px 6px rgba(0, 0, 0, 0.3));
      }

      .mini-logo {
        width: 24px;
        height: 24px;
        object-fit: contain;
        vertical-align: middle;
        margin-right: 8px;
        filter: brightness(1.1) drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
        transition: all 0.2s ease;
      }



      .loading-logo {
        width: 120px;
        height: 120px;
        object-fit: contain;
        margin-bottom: 30px;
        animation: logoSpin 2s linear infinite,
          logoPulse 1.5s ease-in-out infinite alternate;
        filter: brightness(1.3) drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3));
      }

      @keyframes logoSpin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes logoPulse {
        0% {
          transform: scale(1);
        }
        100% {
          transform: scale(1.1);
        }
      }

      .loading-text {
        color: white;
        font-size: 1.5rem;
        font-weight: 600;
        text-align: center;
        margin-bottom: 20px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .loading-progress {
        width: 300px;
        height: 4px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 2px;
        overflow: hidden;
      }

      .loading-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #fff, rgba(255, 255, 255, 0.8));
        border-radius: 2px;
        animation: loadingProgress 5s ease-in-out;
      }

      @keyframes loadingProgress {
        0% {
          width: 0%;
        }
        100% {
          width: 100%;
        }
      }

      .navigation {
        display: flex;
        justify-content: center;
        margin-bottom: 40px;
        flex-wrap: wrap;
        gap: 10px;
      }

      .nav-btn {
        background: var(--glass-bg);
        color: white;
        border: 2px solid var(--glass-border);
        padding: 15px 35px;
        border-radius: 50px;
        cursor: pointer;
        transition: var(--transition);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px);
        font-size: 0.9rem;
      }

      .nav-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: var(--secondary-gradient);
        transition: left 0.3s ease;
        z-index: -1;
      }

      .nav-btn:hover::before,
      .nav-btn.active::before {
        left: 0;
      }

      .nav-btn:hover,
      .nav-btn.active {
        border-color: rgba(255, 255, 255, 0.8);
        transform: translateY(-3px) scale(1.05);
        box-shadow: var(--shadow-medium);
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .section {
        display: none;
        animation: sectionSlideIn 0.6s var(--animation-bounce);
      }

      .section.active {
        display: block;
      }

      @keyframes sectionSlideIn {
        from {
          opacity: 0;
          transform: translateY(30px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .card {
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: var(--border-radius);
        padding: 40px;
        margin-bottom: 30px;
        box-shadow: var(--shadow-medium);
        position: relative;
        overflow: hidden;
        transition: var(--transition);
      }

      .card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transition: left 0.5s ease;
      }

      .card:hover::before {
        left: 100%;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-heavy);
        border-color: rgba(255, 255, 255, 0.3);
      }

      .card h2 {
        color: #667eea;
        font-size: 2rem;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .upload-area {
        border: 3px dashed #667eea;
        border-radius: 15px;
        padding: 40px;
        text-align: center;
        margin: 20px 0;
        transition: all 0.3s ease;
        background: rgba(102, 126, 234, 0.05);
      }

      .upload-area:hover {
        border-color: #764ba2;
        background: rgba(118, 75, 162, 0.1);
        transform: translateY(-2px);
      }

      .upload-area.dragover {
        border-color: #4caf50;
        background: rgba(76, 175, 80, 0.1);
      }

      .file-input {
        display: none;
      }

      .upload-btn {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 50px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        margin: 10px;
      }

      .upload-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
      }

      .file-list {
        margin-top: 20px;
      }

      .file-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 15px;
        background: rgba(102, 126, 234, 0.1);
        border-radius: 10px;
        margin-bottom: 10px;
      }

      .file-info {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .file-icon {
        font-size: 1.5rem;
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: rgba(0, 0, 0, 0.1);
        border-radius: 4px;
        overflow: hidden;
        margin: 10px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2);
        width: 0%;
        transition: width 0.3s ease;
      }

      .quiz-container {
        max-width: 800px;
        margin: 0 auto;
      }

      .question {
        background: rgba(255, 255, 255, 0.9);
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 20px;
        border-left: 5px solid #667eea;
      }

      .question h3 {
        color: #333;
        margin-bottom: 15px;
        font-size: 1.3rem;
      }

      .options {
        list-style: none;
      }

      .option {
        margin: 10px 0;
      }

      .option input {
        margin-right: 10px;
        transform: scale(1.2);
      }

      .option label {
        cursor: pointer;
        font-size: 1.1rem;
        padding: 10px;
        border-radius: 8px;
        transition: background 0.3s ease;
      }

      .option label:hover {
        background: rgba(102, 126, 234, 0.1);
      }

      .timer {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.95);
        padding: 15px 25px;
        border-radius: 50px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        font-weight: 600;
        font-size: 1.2rem;
        color: #667eea;
      }

      .participants-panel {
        position: fixed;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.95);
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        max-height: 400px;
        width: 250px;
        overflow-y: auto;
      }

      .participant {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 8px;
        transition: all 0.3s ease;
      }

      .participant.online {
        background: rgba(76, 175, 80, 0.1);
      }

      .status-indicator {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #4caf50;
      }

      .media-player {
        background: #000;
        border-radius: 15px;
        overflow: hidden;
        margin: 20px 0;
      }

      .pdf-viewer {
        width: 100%;
        height: 600px;
        border: none;
        border-radius: 15px;
      }

      .assessment-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .score-card {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 30px;
        border-radius: 15px;
        text-align: center;
      }

      .score-value {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 10px;
      }

      .btn-primary {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 50px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        margin: 10px;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
      }

      .btn-success {
        background: linear-gradient(135deg, #4caf50, #45a049);
      }

      .btn-danger {
        background: linear-gradient(135deg, #f44336, #da190b);
      }

      .btn-warning {
        background: linear-gradient(135deg, #ff9800, #f57c00);
      }

      .course-info {
        margin-bottom: 20px !important;
        border-left: 4px solid #667eea !important;
        font-weight: 500;
      }

      .dynamic-question {
        animation: slideIn 0.5s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .alert {
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .alert-success {
        background: rgba(76, 175, 80, 0.1);
        color: #2e7d32;
        border-left: 4px solid #4caf50;
      }

      .alert-info {
        background: rgba(33, 150, 243, 0.1);
        color: #1976d2;
        border-left: 4px solid #2196f3;
      }

      .alert-warning {
        background: rgba(255, 193, 7, 0.1);
        color: #f57c00;
        border-left: 4px solid #ff9800;
      }

      .alert-error {
        background: rgba(244, 67, 54, 0.1);
        color: #c62828;
        border-left: 4px solid #f44336;
      }

      .student-info-form {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
        border: 2px solid rgba(102, 126, 234, 0.2);
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      .form-group label {
        font-weight: 600;
        color: #667eea;
        margin-bottom: 8px;
        font-size: 1rem;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .form-group input,
      .form-group select {
        padding: 16px 20px;
        border: 2px solid rgba(102, 126, 234, 0.2);
        border-radius: var(--border-radius);
        font-size: 1rem;
        font-family: inherit;
        transition: var(--transition);
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        position: relative;
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15), var(--shadow-light);
        transform: translateY(-2px) scale(1.02);
        background: rgba(255, 255, 255, 0.95);
      }

      .form-group input:valid {
        border-color: #4caf50;
        box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.1);
      }

      .form-group input:invalid:not(:placeholder-shown) {
        border-color: #f44336;
        box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.1);
      }

      .required-field {
        color: #f44336;
      }

      /* Enhanced Button Styles */
      button, input[type="submit"], input[type="button"] {
        background: var(--primary-gradient);
        color: white;
        border: none;
        padding: 16px 32px;
        border-radius: var(--border-radius);
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        position: relative;
        overflow: hidden;
        text-transform: uppercase;
        letter-spacing: 1px;
        box-shadow: var(--shadow-light);
      }

      button::before, input[type="submit"]::before, input[type="button"]::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: var(--secondary-gradient);
        transition: left 0.3s ease;
        z-index: -1;
      }

      button:hover::before, input[type="submit"]:hover::before, input[type="button"]:hover::before {
        left: 0;
      }

      button:hover, input[type="submit"]:hover, input[type="button"]:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: var(--shadow-heavy);
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      button:active, input[type="submit"]:active, input[type="button"]:active {
        transform: translateY(-1px) scale(1.02);
      }

      /* Special button variants */
      .btn-success {
        background: var(--success-gradient) !important;
      }

      .btn-danger {
        background: var(--danger-gradient) !important;
      }

      .btn-secondary {
        background: var(--dark-gradient) !important;
      }

      .validation-message {
        font-size: 0.85rem;
        color: #f44336;
        margin-top: 5px;
        display: none;
        animation: slideInError 0.3s ease;
      }

      @keyframes slideInError {
        from {
          opacity: 0;
          transform: translateX(-10px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .assignment-status {
        font-size: 0.85rem;
        margin-top: 8px;
        padding: 8px 12px;
        border-radius: 6px;
        display: none;
        animation: slideInAssignment 0.3s ease-out;
      }

      .assignment-status.success {
        background: rgba(76, 175, 80, 0.1);
        color: #2e7d32;
        border: 1px solid rgba(76, 175, 80, 0.3);
      }

      .assignment-status.info {
        background: rgba(33, 150, 243, 0.1);
        color: #1976d2;
        border: 1px solid rgba(33, 150, 243, 0.3);
      }

      @keyframes slideInAssignment {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .email-status {
        position: fixed;
        top: 100px;
        right: 20px;
        background: rgba(255, 255, 255, 0.95);
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        font-weight: 600;
        min-width: 250px;
        z-index: 1000;
        transform: translateX(300px);
        transition: transform 0.3s ease;
      }

      .email-status.show {
        transform: translateX(0);
      }

      .email-status.success {
        border-left: 4px solid #4caf50;
        color: #2e7d32;
      }

      .email-status.error {
        border-left: 4px solid #f44336;
        color: #c62828;
      }

      .email-status.sending {
        border-left: 4px solid #ff9800;
        color: #f57c00;
      }

      /* Enhanced Loading Animation Styles */
      .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(30, 30, 60, 0.9));
        backdrop-filter: blur(20px);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.4s var(--animation-bounce);
      }

      .loading-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .loading-container {
        text-align: center;
        color: white;
        animation: containerPulse 2s ease-in-out infinite;
      }

      @keyframes containerPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }

      .loading-spinner {
        width: 100px;
        height: 100px;
        border: 6px solid rgba(102, 126, 234, 0.2);
        border-top: 6px solid #667eea;
        border-right: 6px solid #764ba2;
        border-radius: 50%;
        animation: spinEnhanced 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
        margin: 0 auto 40px;
        position: relative;
        box-shadow: 0 0 30px rgba(102, 126, 234, 0.3);
      }

      .loading-spinner::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 60px;
        height: 60px;
        border: 3px solid transparent;
        border-top: 3px solid #f093fb;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        animation: spinReverse 0.8s linear infinite;
      }

      @keyframes spinEnhanced {
        0% { transform: rotate(0deg) scale(1); }
        50% { transform: rotate(180deg) scale(1.1); }
        100% { transform: rotate(360deg) scale(1); }
      }

      @keyframes spinReverse {
        0% { transform: translate(-50%, -50%) rotate(360deg); }
        100% { transform: translate(-50%, -50%) rotate(0deg); }
      }

      .loading-text {
        font-size: 1.8rem;
        font-weight: 700;
        margin-bottom: 25px;
        background: linear-gradient(45deg, #fff, #667eea, #764ba2, #f093fb);
        background-size: 300% 300%;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: textGradientShift 2s ease-in-out infinite;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
      }

      @keyframes textGradientShift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }

      .loading-progress {
        width: 350px;
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        overflow: hidden;
        margin: 25px auto;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .loading-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
        background-size: 200% 100%;
        border-radius: 3px;
        width: 0%;
        animation: progressFill 5s ease-in-out, gradientMove 2s ease-in-out infinite;
      }

      @keyframes progressFill {
        0% { width: 0%; }
        20% { width: 25%; }
        40% { width: 50%; }
        60% { width: 75%; }
        80% { width: 90%; }
        100% { width: 100%; }
      }

      @keyframes gradientMove {
        0% { background-position: 0% 50%; }
        100% { background-position: 100% 50%; }
      }

      .loading-steps {
        margin-top: 30px;
        font-size: 1rem;
      }

      .loading-step {
        margin: 8px 0;
        opacity: 0.5;
        transition: opacity 0.3s ease;
      }

      .loading-step.active {
        opacity: 1;
        color: #667eea;
      }

      .loading-step.completed {
        opacity: 1;
        color: #4caf50;
      }

      .loading-step i {
        margin-right: 10px;
        width: 20px;
      }

      /* Success Animation */
      .success-animation {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 40px;
        border-radius: 20px;
        text-align: center;
        z-index: 10001;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.5);
        transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      }

      .success-animation.show {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }

      .success-checkmark {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: #4caf50;
        margin: 0 auto 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: checkmarkBounce 0.6s ease-in-out;
      }

      @keyframes checkmarkBounce {
        0% { transform: scale(0); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
      }

      .success-checkmark i {
        font-size: 2.5rem;
        color: white;
        animation: checkmarkPop 0.3s ease-in-out 0.3s both;
      }

      @keyframes checkmarkPop {
        0% { transform: scale(0); }
        100% { transform: scale(1); }
      }

      .success-title {
        font-size: 1.8rem;
        font-weight: 700;
        margin-bottom: 10px;
        animation: slideInUp 0.5s ease-out 0.6s both;
      }

      .success-message {
        font-size: 1.1rem;
        opacity: 0.9;
        animation: slideInUp 0.5s ease-out 0.8s both;
      }

      @keyframes slideInUp {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Floating particles animation */
      .particle {
        position: absolute;
        background: #667eea;
        border-radius: 50%;
        pointer-events: none;
        animation: float 3s ease-in-out infinite;
      }

      @keyframes float {
        0%, 100% {
          transform: translateY(0px) rotate(0deg);
          opacity: 1;
        }
        50% {
          transform: translateY(-20px) rotate(180deg);
          opacity: 0.5;
        }
      }

      @media (max-width: 768px) {
        .participants-panel {
          position: relative;
          left: auto;
          top: auto;
          transform: none;
          width: 100%;
          margin-bottom: 20px;
        }

        .timer {
          position: relative;
          top: auto;
          right: auto;
          margin-bottom: 20px;
          display: inline-block;
        }

        .header h1 {
          font-size: 2rem;
        }

        .header-content {
          flex-direction: column;
          text-align: center;
        }

        .header-text {
          text-align: center;
        }

        .logo {
          width: 60px;
          height: 60px;
          margin-right: 0;
          margin-bottom: 15px;
        }

        .small-logo {
          width: 28px;
          height: 28px;
        }

        .mini-logo {
          width: 20px;
          height: 20px;
        }

        .loading-logo {
          width: 100px;
          height: 100px;
        }

        .loading-text {
          font-size: 1.3rem;
        }

        .loading-progress {
          width: 250px;
        }

        .card {
          padding: 20px;
        }
      }
      /* Enhanced Responsive Design */
      @media (max-width: 768px) {
        .header h1 {
          font-size: 2.5rem;
        }
        
        .card {
          padding: 25px;
          margin-bottom: 20px;
        }
        
        .nav-btn {
          padding: 12px 25px;
          font-size: 0.8rem;
        }
        
        .loading-spinner {
          width: 80px;
          height: 80px;
        }
        
        .loading-progress {
          width: 280px;
        }
      }

      @media (max-width: 480px) {
        .container {
          padding: 15px;
        }
        
        .header h1 {
          font-size: 2rem;
        }
        
        .card {
          padding: 20px;
        }
        
        .form-group input,
        .form-group select {
          padding: 14px 16px;
        }
      }

      /* Scroll animations */
      .fade-in-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease;
      }

      .fade-in-scroll.visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* Enhanced focus states */
      *:focus-visible {
        outline: 3px solid rgba(102, 126, 234, 0.5);
        outline-offset: 2px;
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
      }

      ::-webkit-scrollbar-thumb {
        background: var(--primary-gradient);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--secondary-gradient);
      }

      /* Print styles */
      @media print {
        body {
          background: white !important;
          color: black !important;
        }
        
        .loading-overlay,
        .nav-btn {
          display: none !important;
        }
      }

    </style>
  </head>
  <body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
      <div class="loading-container">
        <div class="loading-spinner"></div>
        <div class="loading-text">Sending Your Data...</div>
        <div class="loading-progress">
          <div class="loading-progress-bar"></div>
        </div>
        <div class="loading-steps">
          <div class="loading-step" id="step-1">
            <i class="fas fa-user-check"></i>
            Validating student information
          </div>
          <div class="loading-step" id="step-2">
            <i class="fas fa-file-alt"></i>
            Collecting responses and data
          </div>
          <div class="loading-step" id="step-3">
            <i class="fas fa-envelope"></i>
            Preparing email content
          </div>
          <div class="loading-step" id="step-4">
            <i class="fas fa-paper-plane"></i>
            Sending to MDai correction center
          </div>
          <div class="loading-step" id="step-5">
            <i class="fas fa-check-circle"></i>
            Confirming delivery
          </div>
        </div>
      </div>
    </div>

    <!-- Success Animation -->
    <div id="success-animation" class="success-animation">
      <div class="success-checkmark">
        <i class="fas fa-check"></i>
      </div>
      <div class="success-title">Successfully Sent!</div>
      <div class="success-message">Your data has been delivered to MDai correction center</div>
    </div>

    <div class="container">
      <div class="header">
        <div class="header-content">
          <img src="images/AI.png" alt="InterroPlatform AI Logo" class="logo" />
          <div class="header-text">
            <h1>InterroPlatform</h1>
            <p>Advanced Real-Time Assessment & Learning Management System</p>
          </div>
        </div>
      </div>

      <div class="navigation">
        <button class="nav-btn active" onclick="showSection('assignments')">
          <i class="fas fa-tasks"></i> Assignments
        </button>
        <button class="nav-btn" onclick="showSection('quiz')">
          <i class="fas fa-question-circle"></i> Quiz
        </button>
        <button class="nav-btn" onclick="showSection('assessment')">
          <i class="fas fa-chart-bar"></i> Assessment
        </button>
        <button class="nav-btn" onclick="showSection('media')">
          <i class="fas fa-play-circle"></i> Media Center
        </button>
      </div>

      <!-- Student Information Form -->
      <div class="student-info-form">
        <h2
          style="
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
          "
        >
          <img src="images/AI.png" alt="AI Logo" class="small-logo" />
          Student Information & Email Configuration
        </h2>

        <!-- EmailJS Configuration Section -->
        <div class="card" style="margin-bottom: 25px; background: rgba(102, 126, 234, 0.1); border: 2px solid rgba(102, 126, 234, 0.3);">
          <h3 style="color: #667eea; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-cog"></i> EmailJS Configuration
            <span id="emailConfigStatus" style="font-size: 0.8rem; padding: 4px 8px; border-radius: 12px; background: #f44336; color: white;">Not Configured</span>
          </h3>
          
          <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
            <div class="form-group">
              <label for="emailServiceId">EmailJS Service ID *</label>
              <input type="text" id="emailServiceId" name="emailServiceId" placeholder="service_xxxxxxx" 
                     style="padding: 12px; border: 2px solid rgba(102, 126, 234, 0.2); border-radius: 8px; font-size: 0.9rem;">
            </div>
            
            <div class="form-group">
              <label for="emailTemplateId">EmailJS Template ID *</label>
              <input type="text" id="emailTemplateId" name="emailTemplateId" placeholder="template_xxxxxxx"
                     style="padding: 12px; border: 2px solid rgba(102, 126, 234, 0.2); border-radius: 8px; font-size: 0.9rem;">
            </div>
          </div>
          
          <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
            <div class="form-group">
              <label for="emailPublicKey">EmailJS Public Key *</label>
              <input type="text" id="emailPublicKey" name="emailPublicKey" placeholder="Your Public Key"
                     style="padding: 12px; border: 2px solid rgba(102, 126, 234, 0.2); border-radius: 8px; font-size: 0.9rem;">
            </div>
            
            <div class="form-group">
              <label for="recipientEmail">Recipient Email *</label>
              <input type="email" id="recipientEmail" name="recipientEmail" value="symphorienpyana065@gmail.com"
                     style="padding: 12px; border: 2px solid rgba(102, 126, 234, 0.2); border-radius: 8px; font-size: 0.9rem;">
            </div>
          </div>
          
          <button type="button" onclick="saveEmailConfiguration()" 
                  style="background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%); color: white; border: none; padding: 12px 24px; border-radius: 25px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
            <i class="fas fa-save"></i> Save Email Configuration
          </button>
        </div>

        <div class="alert alert-warning">
          <i class="fas fa-exclamation-triangle"></i>
          <span
            >Please fill in your information before submitting assignments or
            quizzes. This information will be automatically sent to MDai correction center.</span
          >
        </div>
        <form id="student-info-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="student-name">
                <i class="fas fa-user"></i> Student Name
                <span class="required-field">*</span>
              </label>
              <input
                type="text"
                id="student-name"
                name="studentName"
                required
                placeholder="Enter your full name"
              />
              <div class="validation-message">Please enter your full name</div>
            </div>
            <div class="form-group">
              <label for="course-name">
                <i class="fas fa-book"></i> Course Name
                <span class="required-field">*</span>
              </label>
              <select
                id="course-name"
                name="courseName"
                required
                onchange="updateQuizForCourse()"
              >
                <option value="">Select your course</option>
                <option value="English 1">English 1</option>
                <option value="English 2">English 2</option>
                <option value="English 3">English 3</option>
                <option value="Web Development">Web Development</option>
                <option value="Excel">Excel</option>
                <option value="Photoshop">Photoshop</option>
                <option value="C Programming">C Programming</option>
                <option value="Python">Python</option>
                <option value="PowerPoint">PowerPoint</option>
              </select>
              <div class="validation-message">Please select your course</div>
            </div>
            <div class="form-group">
              <label for="exam-assignment-name">
                <i class="fas fa-clipboard-list"></i> Exam/Assignment Name
                <span class="required-field">*</span>
              </label>
              <select
                id="exam-assignment-name"
                name="examAssignmentName"
                required
              >
                <option value="">
                  Select course first to see available assignments
                </option>
              </select>
              <div class="validation-message">
                Please select an assignment or exam
              </div>
            </div>
            <div class="form-group">
              <label for="student-id">
                <i class="fas fa-id-card"></i> Student ID (Optional)
              </label>
              <input
                type="text"
                id="student-id"
                name="studentId"
                placeholder="Enter your student ID"
              />
            </div>
            <div class="form-group">
              <label for="student-email">
                <i class="fas fa-envelope"></i> Student Email
                <span class="required-field">*</span>
              </label>
              <input
                type="email"
                id="student-email"
                name="studentEmail"
                required
                placeholder="Enter your email address"
              />
              <div class="validation-message">Please enter a valid email address</div>
            </div>
          </div>
          <div style="text-align: center; margin-top: 20px">
            <button
              type="button"
              class="btn-primary"
              onclick="validateStudentInfo()"
            >
              <i class="fas fa-check-circle"></i> Validate Information
            </button>
            
            <button
              type="button"
              class="btn-secondary"
              onclick="sendTestEmail()"
              style="margin-left: 15px; background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%); border: none; padding: 12px 24px; border-radius: 25px; color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease;"
              title="Send a comprehensive test email with current data"
            >
              <i class="fas fa-paper-plane"></i> Send Test Email
            </button>
            
            <button
              type="button"
              class="btn-info"
              onclick="previewEmailData()"
              style="margin-left: 15px; background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%); border: none; padding: 12px 24px; border-radius: 25px; color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease;"
              title="Preview the data that will be sent in the email"
            >
              <i class="fas fa-eye"></i> Preview Email Data
            </button>
          </div>
        </form>
        
        <!-- Email Data Preview Modal -->
        <div id="emailPreviewModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; overflow-y: auto;">
          <div style="background: white; margin: 50px auto; max-width: 90%; max-height: 80%; padding: 30px; border-radius: 15px; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
              <h3 style="color: #667eea; margin: 0;"><i class="fas fa-envelope"></i> Email Content Preview</h3>
              <button onclick="closeEmailPreview()" style="background: #f44336; color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer;">
                <i class="fas fa-times"></i> Close
              </button>
            </div>
            <div id="emailPreviewContent" style="background: #f5f5f5; padding: 20px; border-radius: 10px; font-family: 'Courier New', monospace; white-space: pre-wrap; max-height: 400px; overflow-y: auto; font-size: 0.9rem;"></div>
          </div>
        </div>
      </div>

      <!-- Email Status Notification -->
      <div id="email-status" class="email-status">
        <div id="email-status-content"></div>
      </div>

      <div class="timer" id="timer">
        <i class="fas fa-clock"></i> <span id="time-display">00:00:00</span>
      </div>

      <div class="participants-panel">
        <h3>
          <img src="images/AI.png" alt="AI Logo" class="mini-logo" /><i
            class="fas fa-users"
          ></i>
          Participants
        </h3>
                <i class="fas fa-save"></i> Save Progress
              </button>
                <span>88%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 88%"></div>
              </div>
            </div>
          </div>

          <div style="text-align: center; margin-top: 30px">
            <button class="btn-primary" onclick="generateReport()">
              <i class="fas fa-file-pdf"></i> Generate Report
            </button>
            <button class="btn-primary" onclick="exportData()">
              <i class="fas fa-download"></i> Export Data
            </button>
          </div>
        </div>
      </div>

      <!-- Assignments Section -->
      <div id="assignments" class="section active">
        <div class="card">
          <h2>
            <img src="images/AI.png" alt="AI Logo" class="small-logo" />
            <i class="fas fa-tasks"></i> Assignments
          </h2>

          <div class="alert alert-info">
            <i class="fas fa-info-circle"></i>
            <span>Complete your assignment questions below. All answers will be sent to MDai correction center for review and correction.</span>
          </div>

          <div id="assignment-questions-container">
            <div class="alert alert-warning">
              <i class="fas fa-exclamation-triangle"></i>
              <span>Please select a course and assignment type above to see your assignment questions.</span>
            </div>
          </div>

          <div style="text-align: center; margin-top: 30px">
            <button class="btn-primary" onclick="submitAssignment()">
              <i class="fas fa-paper-plane"></i> Submit Assignment
            </button>
          </div>
        </div>
      </div>

      <!-- Quiz Section -->
      <div id="quiz" class="section">
        <div class="card">
          <h2>
            <img src="images/AI.png" alt="AI Logo" class="small-logo" />
            <i class="fas fa-question-circle"></i> Interactive Quiz
          </h2>

          <div class="quiz-container">
            <div class="alert alert-info">
              <i class="fas fa-info-circle"></i>
              <span>Please select a course to automatically generate quiz questions.</span>
            </div>

            <div style="text-align: center; margin-top: 30px">
              <button class="btn-success" onclick="submitQuiz()">
                <i class="fas fa-paper-plane"></i> Submit Quiz
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Assessment Section --> 
      <div id="assessment" class="section">
        <div class="card">
          <h2>
            <img src="images/AI.png" alt="AI Logo" class="small-logo" />
            <i class="fas fa-chart-bar"></i> Assessment Dashboard
          </h2>

          <div class="assessment-grid">
            <div class="score-card">
              <i class="fas fa-trophy" style="font-size: 2rem; margin-bottom: 15px;"></i>
              <div class="score-value">85%</div>
              <p>Overall Performance</p>
            </div>
            <div class="score-card">
              <i class="fas fa-clock" style="font-size: 2rem; margin-bottom: 15px;"></i>
              <div class="score-value">42</div>
              <p>Minutes Spent</p>
            </div>
            <div class="score-card">
              <i class="fas fa-check-circle" style="font-size: 2rem; margin-bottom: 15px;"></i>
              <div class="score-value">12/15</div>
              <p>Questions Correct</p>
            </div>
          </div>

          <div style="text-align: center; margin-top: 30px">
            <button class="btn-primary" onclick="generateReport()">
              <i class="fas fa-file-pdf"></i> Generate Report
            </button>
            <button class="btn-primary" onclick="exportData()">
              <i class="fas fa-download"></i> Export Data
            </button>
          </div>
        </div>
      </div>

      <!-- Media Center Section -->
      <div id="media" class="section">
        <div class="card">
          <h2>
            <img src="images/AI.png" alt="AI Logo" class="small-logo" /><i
              class="fas fa-play"
            ></i>
            Media Center
          </h2>

          <div class="alert alert-info">
            <i class="fas fa-info-circle"></i>
            <span
              >Interactive media player supporting MP3, MP4, and PDF files with
              real-time synchronization</span
            >
          </div>

          <div class="media-player">
            <video
              id="video-player"
              controls
              style="width: 100%; height: 400px"
            >
              <source src="" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
          </div>

          <div style="margin: 20px 0">
            <audio id="audio-player" controls style="width: 100%">
              <source src="" type="audio/mpeg" />
              Your browser does not support the audio element.
            </audio>
          </div>

          <div style="margin: 20px 0">
            <iframe id="pdf-viewer" class="pdf-viewer" src=""></iframe>
          </div>

          <div style="text-align: center; margin-top: 20px">
            <button
              class="btn-primary"
              onclick="document.getElementById('media-input').click()"
            >
              <i class="fas fa-upload"></i> Load Media
            </button>
            <input
              type="file"
              id="media-input"
              style="display: none"
              accept=".mp3,.mp4,.pdf"
              onchange="loadMedia(this)"
            />
          </div>
        </div>
      </div>
    </div>

    <script>
      // Timer functionality
      let startTime = Date.now();
      let timerInterval = setInterval(updateTimer, 1000);

      function updateTimer() {
        const elapsed = Date.now() - startTime;
        const hours = Math.floor(elapsed / 3600000);
        const minutes = Math.floor((elapsed % 3600000) / 60000);
        const seconds = Math.floor((elapsed % 60000) / 1000);

        document.getElementById("time-display").textContent = `${hours
          .toString()
          .padStart(2, "0")}:${minutes.toString().padStart(2, "0")}:${seconds
          .toString()
          .padStart(2, "0")}`;
      }

      // Comprehensive EmailJS Configuration and Functions
      let emailConfig = {
        serviceId: 'service_osvola7',
        templateId: 'template_mgtrumv',
        publicKey: 'px88hVvZZOI8odox8',
        recipientEmail: 'symphorienpyana065@gmail.com',
        isConfigured: false
      };

      // Save email configuration
      function saveEmailConfiguration() {
        const serviceId = document.getElementById('emailServiceId').value.trim();
        const templateId = document.getElementById('emailTemplateId').value.trim();
        const publicKey = document.getElementById('emailPublicKey').value.trim();
        const recipientEmail = document.getElementById('recipientEmail').value.trim();

        if (!serviceId || !templateId || !publicKey || !recipientEmail) {
          showEmailStatus('Please fill in all EmailJS configuration fields!', 'error');
          return;
        }

        emailConfig = {
          serviceId,
          templateId,
          publicKey,
          recipientEmail,
          isConfigured: true
        };

        // Initialize EmailJS with the provided public key
        try {
          emailjs.init(publicKey);
          
          // Update status indicator
          const statusEl = document.getElementById('emailConfigStatus');
          statusEl.textContent = 'Configured ';
          statusEl.style.background = '#4caf50';
          
          // Save to localStorage for persistence
          localStorage.setItem('emailConfig', JSON.stringify(emailConfig));
          
          showEmailStatus('EmailJS configuration saved successfully!', 'success');
        } catch (error) {
          showEmailStatus('Failed to initialize EmailJS. Please check your configuration.', 'error');
        }
      }

      // Load saved email configuration on page load
      function loadEmailConfiguration() {
        try {
          const savedConfig = localStorage.getItem('emailConfig');
          if (savedConfig) {
            emailConfig = JSON.parse(savedConfig);
            
            document.getElementById('emailServiceId').value = emailConfig.serviceId || '';
            document.getElementById('emailTemplateId').value = emailConfig.templateId || '';
            document.getElementById('emailPublicKey').value = emailConfig.publicKey || '';
            document.getElementById('recipientEmail').value = emailConfig.recipientEmail || 'symphorienpyana065@gmail.com';
            
            if (emailConfig.isConfigured && emailConfig.publicKey) {
              emailjs.init(emailConfig.publicKey);
              const statusEl = document.getElementById('emailConfigStatus');
              statusEl.textContent = 'Configured ';
              statusEl.style.background = '#4caf50';
            }
          }
        } catch (error) {
          console.error('Failed to load email configuration:', error);
        }
      }

      // Initialize EmailJS (will be replaced by user configuration)
      (function () {
        // Load saved configuration on page load
        setTimeout(loadEmailConfiguration, 1000);
      })();

      // Course-Specific Question Database
      const courseQuestions = {
        "English 1": [
          // Basic Grammar Questions
          {
            question: "What is a noun?",
            type: "multiple",
            options: [
              "A word that describes an action",
              "A word that names a person, place, thing, or idea",
              "A word that modifies a verb",
              "A word that connects clauses",
            ],
            correct: 1,
          },
          {
            question: "Choose the correct article: ___ apple is red.",
            type: "multiple",
            options: ["a", "an", "the", "no article needed"],
            correct: 1,
          },
          {
            question:
              "Fill in the blank: The cat ___ on the table. (present tense)",
            type: "fillblank",
            answer: "is",
            placeholder: "Type the correct form of 'be'",
          },
          {
            question: "What is the plural form of 'child'?",
            type: "multiple",
            options: ["childs", "childes", "children", "child's"],
            correct: 2,
          },
          {
            question: "Choose the correct pronoun: ___ is my friend.",
            type: "multiple",
            options: ["Him", "His", "He", "Her"],
            correct: 2,
          },

          // Speaking & Listening Questions
          {
            question: "How do you greet someone in the morning?",
            type: "multiple",
            options: [
              "Good night",
              "Good morning",
              "Good afternoon",
              "Good evening",
            ],
            correct: 1,
          },
          {
            question: "Complete this introduction: 'Hello, my name ___ John.'",
            type: "fillblank",
            answer: "is",
            placeholder: "Fill in the correct word",
          },
          {
            question: "What do you say when you want to know someone's name?",
            type: "text",
            placeholder: "Write the question you would ask",
          },
          {
            question: "How do you express that you like something?",
            type: "multiple",
            options: [
              "I don't like it",
              "I like it",
              "I hate it",
              "I never want it",
            ],
            correct: 1,
          },
          {
            question: "Fill in: 'Excuse me, where ___ the bank?'",
            type: "fillblank",
            answer: "is",
            placeholder: "Complete the question",
          },

          // Writing & Reading Questions
          {
            question: "Which sentence has correct capitalization?",
            type: "multiple",
            options: [
              "i live in new york",
              "I live in New York",
              "I Live In New York",
              "i Live in new York",
            ],
            correct: 1,
          },
          {
            question: "Write a simple sentence about your daily routine.",
            type: "text",
            placeholder: "Example: I wake up at 7 AM every day.",
          },
          {
            question: "Complete this sentence: 'I ___ to school every day.'",
            type: "fillblank",
            answer: "go",
            placeholder: "Use the correct verb",
          },
          {
            question: "What punctuation mark goes at the end of a question?",
            type: "multiple",
            options: [".", "!", "?", ","],
            correct: 2,
          },

          // Vocabulary Building Questions
          {
            question: "What number comes after nineteen?",
            type: "multiple",
            options: ["eighteen", "twenty", "twenty-one", "thirty"],
            correct: 1,
          },
          {
            question: "What color do you get when you mix red and yellow?",
            type: "multiple",
            options: ["green", "blue", "orange", "purple"],
            correct: 2,
          },
          {
            question: "Which day comes after Monday?",
            type: "multiple",
            options: ["Sunday", "Wednesday", "Tuesday", "Thursday"],
            correct: 2,
          },
          {
            question:
              "Fill in the blank: 'It's very ___ today. I need a jacket.' (weather)",
            type: "fillblank",
            answer: "cold",
            placeholder: "Describe cold weather",
          },
          {
            question: "What do you call a person who teaches students?",
            type: "multiple",
            options: ["doctor", "teacher", "cook", "driver"],
            correct: 1,
          },
          {
            question: "Complete: 'I eat ___ for breakfast.'",
            type: "text",
            placeholder: "Name a breakfast food",
          },

          // Practical Use Questions
          {
            question:
              "At the doctor: 'I have a ___.' (something wrong with health)",
            type: "fillblank",
            answer: "headache",
            placeholder: "Common health problem",
          },
          {
            question: "At the hotel: How do you ask for a room?",
            type: "text",
            placeholder: "Write what you would say at hotel reception",
          },
          {
            question: "What do you say in an emergency?",
            type: "multiple",
            options: ["Thank you", "Help me!", "Good morning", "How are you?"],
            correct: 1,
          },
          {
            question: "At the airport: 'Where is the ___ area?'",
            type: "fillblank",
            answer: "waiting",
            placeholder: "Place where you wait for flights",
          },
          {
            question: "How do you ask for the time politely?",
            type: "text",
            placeholder: "Write a polite question about time",
          },

          // Additional Grammar & Structure Questions
          {
            question: "Choose the correct sentence:",
            type: "multiple",
            options: [
              "She have a car",
              "She has a car",
              "She having a car",
              "She are have a car",
            ],
            correct: 1,
          },
          {
            question: "Fill in: 'There ___ two books on the table.'",
            type: "fillblank",
            answer: "are",
            placeholder: "Use correct form of 'be'",
          },
          {
            question: "What is the past tense of 'eat'?",
            type: "multiple",
            options: ["eated", "ate", "eating", "eats"],
            correct: 1,
          },
          {
            question: "Complete the sentence: 'I ___ English every day.'",
            type: "fillblank",
            answer: "study",
            placeholder: "What do you do with English?",
          },
          {
            question: "Write a sentence using 'my family':",
            type: "text",
            placeholder: "Example: My family lives in a big house.",
          },
        ],
        "English 2": [
          // 1. Intermediate Grammar / Grammaire Intermdiaire
          {
            question:
              "Choose the correct form: 'I ___ to Paris last year.' vs 'I ___ been to Paris.'",
            type: "multiple",
            options: [
              "went / have",
              "have gone / had",
              "go / have",
              "was going / has",
            ],
            correct: 0,
          },
          {
            question: "Which sentence uses the future perfect correctly?",
            type: "multiple",
            options: [
              "I will finish by tomorrow",
              "I will have finished by tomorrow",
              "I will be finishing tomorrow",
              "I am going to finish tomorrow",
            ],
            correct: 1,
          },
          {
            question:
              "Complete the conditional: 'If I ___ rich, I ___ travel the world.'",
            type: "multiple",
            options: [
              "am / will",
              "were / would",
              "was / will",
              "would be / will",
            ],
            correct: 1,
          },
          {
            question:
              "Choose the correct modal verb: 'You ___ study harder if you want to pass.'",
            type: "multiple",
            options: ["can", "should", "may", "will"],
            correct: 1,
          },
          {
            question: "Which is the correct comparative form?",
            type: "multiple",
            options: [
              "more good than",
              "gooder than",
              "better than",
              "best than",
            ],
            correct: 2,
          },
          {
            question:
              "Choose the correct relative clause: 'The book ___ I read was interesting.'",
            type: "multiple",
            options: ["who", "which", "where", "when"],
            correct: 1,
          },
          {
            question: "Convert to passive voice: 'The chef cooked the meal.'",
            type: "text",
            placeholder: "Write the sentence in passive voice...",
          },
          {
            question: "Change to reported speech: 'I am going home,' she said.",
            type: "text",
            placeholder: "She said that...",
          },
          {
            question: "Choose the correct form: 'I enjoy ___ books.'",
            type: "multiple",
            options: ["read", "reading", "to read", "reads"],
            correct: 1,
          },
          {
            question: "Add the correct question tag: 'You like coffee, ___?'",
            type: "multiple",
            options: ["do you", "don't you", "are you", "aren't you"],
            correct: 1,
          },

          // 2. Speaking & Communication / Expression orale et communication
          {
            question: "How would you express a strong opinion politely?",
            type: "multiple",
            options: [
              "You're wrong!",
              "I strongly believe that...",
              "That's stupid",
              "No way!",
            ],
            correct: 1,
          },
          {
            question: "Which phrase shows disagreement politely?",
            type: "multiple",
            options: [
              "You're completely wrong",
              "I'm afraid I don't agree",
              "That's nonsense",
              "You don't know anything",
            ],
            correct: 1,
          },
          {
            question: "How do you make a suggestion?",
            type: "multiple",
            options: [
              "You must do this",
              "Why don't we...?",
              "Do this now!",
              "I order you to...",
            ],
            correct: 1,
          },
          {
            question:
              "Describe a memorable experience you had (5-7 sentences).",
            type: "text",
            placeholder: "Last year, I had an amazing experience when...",
          },
          {
            question: "How would you start a formal phone conversation?",
            type: "multiple",
            options: [
              "Hey, what's up?",
              "Good morning, this is...",
              "Yo, it's me",
              "Hi there!",
            ],
            correct: 1,
          },
          {
            question:
              "Write a short story beginning with: 'It was a dark and stormy night...' (100 words)",
            type: "text",
            placeholder: "It was a dark and stormy night when...",
          },

          // 3. Reading & Writing Skills / Comptences en lecture et criture
          {
            question:
              "What is the main purpose of a topic sentence in a paragraph?",
            type: "multiple",
            options: [
              "To end the paragraph",
              "To introduce the main idea",
              "To provide examples",
              "To connect to the next paragraph",
            ],
            correct: 1,
          },
          {
            question:
              "Write a formal email asking for information about a course.",
            type: "text",
            placeholder: "Dear Sir/Madam, I am writing to inquire about...",
          },
          {
            question:
              "Describe your hometown in detail (150-200 words). Include location, attractions, and why you like/dislike it.",
            type: "text",
            placeholder: "My hometown is located in... It is famous for...",
          },
          {
            question: "Write your opinion about social media (100-150 words).",
            type: "text",
            placeholder:
              "In my opinion, social media has both advantages and disadvantages...",
          },
          {
            question:
              "What can you infer from this sentence: 'Sarah closed her umbrella and smiled as she stepped outside'?",
            type: "multiple",
            options: [
              "It was raining when she went inside",
              "She doesn't like umbrellas",
              "It stopped raining",
              "She forgot her umbrella",
            ],
            correct: 2,
          },

          // 4. Vocabulary Expansion / Enrichissement du vocabulaire
          {
            question: "What does the phrasal verb 'put off' mean?",
            type: "multiple",
            options: [
              "to wear something",
              "to postpone",
              "to turn on",
              "to remove",
            ],
            correct: 1,
          },
          {
            question: "What does the idiom 'break the ice' mean?",
            type: "multiple",
            options: [
              "to cool something down",
              "to start a conversation",
              "to break something frozen",
              "to make someone angry",
            ],
            correct: 1,
          },
          {
            question: "Choose the synonym for 'enormous':",
            type: "multiple",
            options: ["tiny", "huge", "medium", "small"],
            correct: 1,
          },
          {
            question: "Which words collocate with 'make'?",
            type: "multiple",
            options: [
              "make a mistake",
              "make a bath",
              "make a walk",
              "make a run",
            ],
            correct: 0,
          },
          {
            question: "What is the noun form of 'decide'?",
            type: "multiple",
            options: ["decidion", "decision", "deciding", "decisive"],
            correct: 1,
          },
          {
            question:
              "Complete with a linking word: 'I studied hard; ___, I failed the test.'",
            type: "multiple",
            options: ["therefore", "however", "because", "and"],
            correct: 1,
          },
          {
            question:
              "Which is a false friend for French speakers learning English?",
            type: "multiple",
            options: [
              "'Actually' (vraiment, en fait)",
              "'Book' (livre)",
              "'Water' (eau)",
              "'House' (maison)",
            ],
            correct: 0,
          },

          // 5. Real-life English / Anglais pratique
          {
            question: "How would you ask for a day off at work?",
            type: "text",
            placeholder: "Dear [Manager's name], I would like to request...",
          },
          {
            question:
              "What would you say in a university presentation introduction?",
            type: "multiple",
            options: [
              "Um, so, like, today I'm gonna talk about...",
              "Good morning everyone, today I will present...",
              "Hey guys, let's talk about...",
              "So, yeah, this is about...",
            ],
            correct: 1,
          },
          {
            question: "How do you overcome nervousness when speaking publicly?",
            type: "text",
            placeholder: "Some effective strategies for public speaking are...",
          },
          {
            question:
              "How would you explain a cultural difference to a foreign visitor?",
            type: "text",
            placeholder:
              "In our culture, we usually... However, in other countries...",
          },
          {
            question:
              "What's the best way to answer 'Tell me about yourself' in a job interview?",
            type: "multiple",
            options: [
              "I was born in... and I like pizza",
              "I have relevant experience in... and I'm passionate about...",
              "I don't know what to say",
              "I'm looking for any job",
            ],
            correct: 1,
          },
          {
            question: "How would you ask for directions while traveling?",
            type: "multiple",
            options: [
              "Where is it?",
              "Excuse me, could you tell me how to get to...?",
              "I'm lost!",
              "Show me the way!",
            ],
            correct: 1,
          },
          {
            question:
              "Describe how you would solve this problem: Your hotel room is too noisy.",
            type: "text",
            placeholder:
              "I would approach the front desk and politely explain...",
          },
        ],
        "English 3": [
          {
            question: "What is an argumentative essay?",
            type: "multiple",
            options: [
              "An essay that tells a story",
              "An essay that describes something",
              "An essay that presents and supports a claim",
              "An essay that explains a process",
            ],
            correct: 2,
          },
          {
            question:
              "Which citation format is commonly used for English papers?",
            type: "multiple",
            options: ["APA", "MLA", "Chicago", "IEEE"],
            correct: 1,
          },
          {
            question: "What is the purpose of a thesis statement?",
            type: "multiple",
            options: [
              "To conclude the essay",
              "To introduce the topic",
              "To state the main argument",
              "To provide evidence",
            ],
            correct: 2,
          },
          {
            question:
              "Analyze how symbolism is used in literature. Provide an example.",
            type: "text",
            placeholder: "Discuss symbolism and provide a literary example...",
          },
        ],
        "Web Development": [
          {
            question: "What does HTML stand for?",
            type: "multiple",
            options: [
              "High Tech Modern Language",
              "HyperText Markup Language",
              "Home Tool Markup Language",
              "Hyperlink and Text Markup Language",
            ],
            correct: 1,
          },
          {
            question: "Which CSS property is used to change text color?",
            type: "multiple",
            options: ["text-color", "font-color", "color", "text-style"],
            correct: 2,
          },
          {
            question: "What is the correct HTML tag for creating a hyperlink?",
            type: "multiple",
            options: ["<link>", "<href>", "<a>", "<url>"],
            correct: 2,
          },
          {
            question:
              "Explain the difference between HTML, CSS, and JavaScript in web development.",
            type: "text",
            placeholder:
              "Describe the role of each technology in web development...",
          },
        ],
        Excel: [
          {
            question:
              "What function would you use to add up a range of cells in Excel?",
            type: "multiple",
            options: ["ADD()", "TOTAL()", "SUM()", "PLUS()"],
            correct: 2,
          },
          {
            question: "Which symbol is used to start a formula in Excel?",
            type: "multiple",
            options: ["#", "@", "=", "$"],
            correct: 2,
          },
          {
            question: "What does VLOOKUP function do in Excel?",
            type: "multiple",
            options: [
              "Validates data",
              "Looks up values vertically in a table",
              "Creates visual charts",
              "Locks cells",
            ],
            correct: 1,
          },
          {
            question: "Explain how to create a pivot table and its purpose.",
            type: "text",
            placeholder:
              "Describe the steps to create a pivot table and its uses...",
          },
        ],
        Photoshop: [
          {
            question:
              "What is the shortcut key for the Move Tool in Photoshop?",
            type: "multiple",
            options: ["M", "V", "T", "B"],
            correct: 1,
          },
          {
            question: "Which format preserves transparency in Photoshop?",
            type: "multiple",
            options: ["JPEG", "PNG", "GIF", "Both PNG and GIF"],
            correct: 3,
          },
          {
            question:
              "What does the term 'resolution' mean in digital imaging?",
            type: "multiple",
            options: [
              "The size of the file",
              "The number of pixels per inch",
              "The color depth",
              "The brightness level",
            ],
            correct: 1,
          },
          {
            question:
              "Explain the difference between raster and vector graphics.",
            type: "text",
            placeholder:
              "Describe the characteristics and uses of raster vs vector graphics...",
          },
        ],
        "C Programming": [
          {
            question:
              "Which symbol is used to indicate the end of a statement in C?",
            type: "multiple",
            options: [".", ",", ";", ":"],
            correct: 2,
          },
          {
            question:
              "What is the correct way to declare an integer variable in C?",
            type: "multiple",
            options: ["integer x;", "int x;", "var x;", "x int;"],
            correct: 1,
          },
          {
            question: "Which function is used to print output in C?",
            type: "multiple",
            options: ["print()", "output()", "printf()", "cout()"],
            correct: 2,
          },
          {
            question:
              "Explain the difference between '=' and '==' operators in C programming.",
            type: "text",
            placeholder: "Describe the purpose and usage of both operators...",
          },
        ],
        Python: [
          {
            question: "Which keyword is used to define a function in Python?",
            type: "multiple",
            options: ["function", "def", "define", "func"],
            correct: 1,
          },
          {
            question: "What is the correct way to create a list in Python?",
            type: "multiple",
            options: [
              "list = {1, 2, 3}",
              "list = (1, 2, 3)",
              "list = [1, 2, 3]",
              "list = <1, 2, 3>",
            ],
            correct: 2,
          },
          {
            question: "Which operator is used for exponentiation in Python?",
            type: "multiple",
            options: ["^", "**", "exp", "pow"],
            correct: 1,
          },
          {
            question:
              "Explain the concept of indentation in Python and why it's important.",
            type: "text",
            placeholder:
              "Describe how Python uses indentation and its significance...",
          },
        ],
        PowerPoint: [
          {
            question:
              "What is the default file extension for PowerPoint presentations?",
            type: "multiple",
            options: [".ppt", ".pptx", ".pp", ".pps"],
            correct: 1,
          },
          {
            question: "Which view is best for organizing slides in PowerPoint?",
            type: "multiple",
            options: [
              "Normal View",
              "Slide Sorter View",
              "Notes View",
              "Reading View",
            ],
            correct: 1,
          },
          {
            question:
              "What is the recommended number of bullet points per slide?",
            type: "multiple",
            options: ["3-5", "6-8", "9-10", "As many as needed"],
            correct: 0,
          },
          {
            question:
              "Explain the principles of effective slide design and presentation.",
            type: "text",
            placeholder:
              "Describe best practices for creating engaging presentations...",
          },
        ],
      };

      // Course-Specific Assignment Database
      const courseAssignments = {
        "English 1": ["Assignment 1", "Assignment 2", "Examen"],
        "English 2": ["Assignment 1", "Assignment 2", "Examen"],
        "English 3": ["Assignment 1", "Assignment 2", "Examen"],
        "Web Development": ["Assignment 1", "Assignment 2", "Examen"],
        Excel: ["Assignment 1", "Assignment 2", "Examen"],
        Photoshop: ["Assignment 1", "Assignment 2", "Examen"],
        "C Programming": ["Assignment 1", "Assignment 2", "Examen"],
        Python: ["Assignment 1", "Assignment 2", "Examen"],
        PowerPoint: ["Assignment 1", "Assignment 2", "Examen"],
      };

      // Assignment Questions Database
      const assignmentQuestions = {
        "English 1": {
          "Assignment 1": [
            {
              question:
                "Write 5 sentences about yourself using 'I am', 'I have', 'I like'.",
              type: "text",
              placeholder:
                "Example: I am a student. I have brown hair. I like pizza...",
            },
            {
              question:
                "Fill in the blanks with a, an, or the: ___ cat sits on ___ chair.",
              type: "fillblank",
              placeholder: "Type your answers separated by commas",
            },
            {
              question:
                "Write the plural forms: book, child, mouse, woman, foot",
              type: "text",
              placeholder: "Write the plural form of each word",
            },
            {
              question:
                "Complete these greetings: Good _____ (morning), How _____ you? (are), Nice to _____ you (meet)",
              type: "fillblank",
              placeholder: "Fill in the missing words",
            },
            {
              question: "Write 3 sentences about your family members.",
              type: "text",
              placeholder:
                "Example: My mother is a teacher. My brother likes football...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Write a short paragraph (5-7 sentences) about your daily routine.",
              type: "text",
              placeholder: "Start with: Every day I wake up at...",
            },
            {
              question:
                "Fill in with correct prepositions: I go ___ school ___ Monday ___ Friday.",
              type: "fillblank",
              placeholder: "Use prepositions like: to, on, from, at, in",
            },
            {
              question:
                "Write questions for these answers: a) I am 20 years old. b) I live in Paris. c) I study English.",
              type: "text",
              placeholder: "Write the questions that would get these answers",
            },
            {
              question:
                "Describe what you see in your room (5 items with colors).",
              type: "text",
              placeholder: "Example: I see a red book on the table...",
            },
            {
              question:
                "Complete with correct form of 'be': She ___ a doctor. They ___ students. I ___ happy.",
              type: "fillblank",
              placeholder: "Use am, is, or are",
            },
          ],
          Examen: [
            {
              question:
                "Write a conversation between you and a friend meeting for the first time (8-10 lines).",
              type: "text",
              placeholder:
                "You: Hello, my name is... Friend: Hi, nice to meet you...",
            },
            {
              question:
                "Fill in the story: Yesterday I ___ (go) to the store. I ___ (buy) some bread and milk. Then I ___ (come) home.",
              type: "fillblank",
              placeholder: "Use past tense verbs",
            },
            {
              question:
                "Write directions from your house to the nearest shop (use: go straight, turn left/right, it's next to...).",
              type: "text",
              placeholder: "Start with: From my house, first you...",
            },
            {
              question:
                "Describe your favorite food: what it is, how it tastes, when you eat it (5-6 sentences).",
              type: "text",
              placeholder:
                "My favorite food is... It tastes... I usually eat it...",
            },
            {
              question:
                "Complete the emergency phrases: Help! I need ___. Call the ___. Where is the ___?",
              type: "fillblank",
              placeholder: "Complete these emergency expressions",
            },
          ],
        },
        "English 2": {
          "Assignment 1": [
            {
              question:
                "Write a short story (150-200 words) with a clear beginning, middle, and end.",
              type: "text",
              placeholder:
                "Start with: Once upon a time... or Last week something interesting happened...",
            },
            {
              question:
                "Complete with past tense: Yesterday I ___ (walk) to school. I ___ (meet) my friend. We ___ (talk) about the test.",
              type: "fillblank",
              placeholder: "Use simple past tense verbs",
            },
            {
              question:
                "Describe your favorite place in your city (5-7 sentences). Use adjectives.",
              type: "text",
              placeholder:
                "My favorite place is... It is very... I like it because...",
            },
            {
              question:
                "Write a letter to your friend inviting them to your birthday party.",
              type: "text",
              placeholder:
                "Dear friend, I hope you are well. I want to invite you to...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Compare two different seasons. Write about weather, activities, and your preferences (6-8 sentences).",
              type: "text",
              placeholder: "Winter and summer are very different. In winter...",
            },
            {
              question:
                "Fill in with correct modal verbs: You ___ study hard. I ___ speak three languages. We ___ go to the movies tonight.",
              type: "fillblank",
              placeholder: "Use can, could, should, must, might, etc.",
            },
            {
              question:
                "Write instructions for making your favorite food (5 steps).",
              type: "text",
              placeholder: "First, you need to... Then, you should... Next...",
            },
            {
              question:
                "Describe a memorable day from your childhood (7-10 sentences).",
              type: "text",
              placeholder:
                "When I was young, I remember one special day when...",
            },
          ],
          Examen: [
            {
              question:
                "Write an essay about the importance of education (200-250 words).",
              type: "text",
              placeholder:
                "Education plays a crucial role in our lives because...",
            },
            {
              question:
                "Complete this dialogue with appropriate responses: A: What do you think about technology? B: ___ A: Do you use social media? B: ___",
              type: "text",
              placeholder: "Write natural responses for person B",
            },
            {
              question:
                "Describe your future plans and dreams (8-10 sentences). Use future tense.",
              type: "text",
              placeholder:
                "In the future, I will... I hope to... My dream is to...",
            },
          ],
        },
        "English 3": {
          "Assignment 1": [
            {
              question:
                "Write a persuasive paragraph about why recycling is important (150-200 words).",
              type: "text",
              placeholder: "Recycling is essential for our planet because...",
            },
            {
              question:
                "Analyze this quote: 'Education is the most powerful weapon which you can use to change the world.' - Nelson Mandela",
              type: "text",
              placeholder:
                "This quote means that... I agree/disagree because...",
            },
            {
              question:
                "Write a formal email to your teacher asking for an extension on an assignment.",
              type: "text",
              placeholder:
                "Subject: Request for Assignment Extension\n\nDear Professor...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Compare and contrast online learning vs. traditional classroom learning (200-250 words).",
              type: "text",
              placeholder:
                "Online learning and traditional learning both have advantages and disadvantages...",
            },
            {
              question:
                "Write a book review for a book you've read recently (150-200 words).",
              type: "text",
              placeholder:
                "The book I recently read is... The story is about... I would recommend it because...",
            },
            {
              question:
                "Discuss the impact of social media on young people (3 paragraphs).",
              type: "text",
              placeholder:
                "Social media has significantly changed how young people communicate...",
            },
          ],
          Examen: [
            {
              question:
                "Write an argumentative essay: 'Should students be allowed to use phones in school?' (300-400 words)",
              type: "text",
              placeholder:
                "The debate about phone use in schools is complex. On one hand...",
            },
            {
              question:
                "Create a detailed character analysis of someone you admire (200-250 words).",
              type: "text",
              placeholder:
                "The person I admire most is... Their most important qualities are...",
            },
            {
              question:
                "Write a news report about an event in your community (150-200 words).",
              type: "text",
              placeholder:
                "BREAKING NEWS: Yesterday, an important event occurred in our community...",
            },
          ],
        },
        "Web Development": {
          "Assignment 1": [
            {
              question:
                "Create a basic HTML structure for a personal portfolio website. Include header, navigation, main content, and footer.",
              type: "text",
              placeholder:
                "<!DOCTYPE html>\n<html>\n<head>...\n</head>\n<body>...",
            },
            {
              question:
                "Write CSS code to style a navigation menu with hover effects.",
              type: "text",
              placeholder:
                ".nav-menu {\n  display: flex;\n  ...\n}\n.nav-menu:hover {\n  ...\n}",
            },
            {
              question:
                "Explain the difference between HTML, CSS, and JavaScript in web development.",
              type: "text",
              placeholder:
                "HTML is responsible for... CSS handles... JavaScript enables...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Create a responsive layout using CSS Flexbox or Grid for a blog homepage.",
              type: "text",
              placeholder:
                ".container {\n  display: grid;\n  grid-template-columns: ...\n}",
            },
            {
              question:
                "Write JavaScript code to validate a contact form (name, email, message fields).",
              type: "text",
              placeholder:
                "function validateForm() {\n  const name = document.getElementById('name').value;\n  ...",
            },
            {
              question:
                "Design a mobile-first approach for a restaurant website. Describe your strategy.",
              type: "text",
              placeholder:
                "Mobile-first design means starting with... The key considerations are...",
            },
          ],
          Examen: [
            {
              question:
                "Build a complete interactive webpage with HTML, CSS, and JavaScript that includes a contact form, image gallery, and smooth scrolling navigation.",
              type: "text",
              placeholder:
                "Provide the complete code with proper structure and comments explaining each section.",
            },
            {
              question:
                "Explain web accessibility principles and how to implement them in your projects.",
              type: "text",
              placeholder:
                "Web accessibility ensures... Key principles include... Implementation strategies are...",
            },
            {
              question:
                "Compare different CSS frameworks (Bootstrap, Tailwind, etc.) and explain when to use each.",
              type: "text",
              placeholder:
                "Bootstrap is best for... Tailwind excels when... The choice depends on...",
            },
          ],
        },
        Excel: {
          "Assignment 1": [
            {
              question:
                "Create a personal budget spreadsheet with income, expenses, and savings calculations.",
              type: "text",
              placeholder:
                "Describe your spreadsheet structure: Column A - Categories, Column B - Amounts, etc. Include formulas used.",
            },
            {
              question:
                "Explain how to use SUM, AVERAGE, and COUNT functions with examples.",
              type: "text",
              placeholder:
                "SUM function: =SUM(A1:A10) calculates... AVERAGE function: =AVERAGE(B1:B5)...",
            },
            {
              question:
                "Create a simple chart from data showing monthly sales figures.",
              type: "text",
              placeholder:
                "Describe your data table and explain the steps to create the chart...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Design a student grade tracker with conditional formatting to highlight failing grades.",
              type: "text",
              placeholder:
                "Table structure: Student Name, Test 1, Test 2, Final Grade. Conditional formatting rules...",
            },
            {
              question:
                "Use VLOOKUP function to create a product price lookup system.",
              type: "text",
              placeholder:
                "=VLOOKUP(A2,ProductTable,2,FALSE) - Explain how this formula works...",
            },
            {
              question:
                "Create a pivot table from sales data showing sales by region and product category.",
              type: "text",
              placeholder:
                "Data source includes: Date, Region, Product, Sales Amount. Pivot table structure...",
            },
          ],
          Examen: [
            {
              question:
                "Build a complete business dashboard with multiple charts, pivot tables, and dynamic formulas for a retail store.",
              type: "text",
              placeholder:
                "Dashboard includes: Sales trends, top products, regional performance. Explain all formulas and chart types used.",
            },
            {
              question:
                "Create an inventory management system with automatic reorder alerts using IF and AND functions.",
              type: "text",
              placeholder:
                "System tracks: Product, Current Stock, Minimum Level, Reorder Amount. Alert formula: =IF(AND(...))",
            },
            {
              question:
                "Analyze a dataset using advanced Excel features: What-If Analysis, Data Tables, and Goal Seek.",
              type: "text",
              placeholder:
                "Explain each tool's purpose and provide examples of business scenarios where each would be useful.",
            },
          ],
        },
        Photoshop: {
          "Assignment 1": [
            {
              question:
                "Create a basic photo manipulation: Remove background from a portrait and add a new background.",
              type: "text",
              placeholder:
                "Describe your process: 1. Selection tools used, 2. Background removal technique, 3. Blending methods...",
            },
            {
              question:
                "Design a simple logo using shapes, text, and basic effects.",
              type: "text",
              placeholder:
                "Logo concept: Company name, industry, color scheme chosen, design elements used...",
            },
            {
              question:
                "Explain the difference between raster and vector graphics, and when to use each.",
              type: "text",
              placeholder:
                "Raster graphics are made of pixels and are best for... Vector graphics use paths and are ideal for...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Create a social media post design with text overlay, filters, and brand elements.",
              type: "text",
              placeholder:
                "Design purpose: Platform (Instagram/Facebook), target audience, message, visual elements used...",
            },
            {
              question:
                "Demonstrate color correction and retouching techniques on a photograph.",
              type: "text",
              placeholder:
                "Original photo issues: lighting, color balance, blemishes. Corrections applied: curves, levels, healing brush...",
            },
            {
              question:
                "Design a magazine cover layout with typography, images, and visual hierarchy.",
              type: "text",
              placeholder:
                "Magazine theme: Target audience, headline, supporting text, image placement, color scheme...",
            },
          ],
          Examen: [
            {
              question:
                "Create a complete brand identity package: logo, business card, letterhead, and social media templates.",
              type: "text",
              placeholder:
                "Brand concept: Company type, target market, design philosophy, color psychology, typography choices...",
            },
            {
              question:
                "Produce a digital artwork combining multiple techniques: photo manipulation, digital painting, and typography.",
              type: "text",
              placeholder:
                "Artwork theme: Concept, techniques used, layer organization, effects applied, final message conveyed...",
            },
            {
              question:
                "Analyze and recreate a professional design, explaining the design principles and techniques used.",
              type: "text",
              placeholder:
                "Original design analysis: Layout principles, color theory, typography, visual flow, technical execution...",
            },
          ],
        },
        "C Programming": {
          "Assignment 1": [
            {
              question:
                "Write a C program that calculates the area and perimeter of a rectangle using user input.",
              type: "text",
              placeholder:
                "#include <stdio.h>\nint main() {\n    float length, width;\n    // Your code here\n    return 0;\n}",
            },
            {
              question:
                "Create a program that determines if a number is even or odd using if-else statements.",
              type: "text",
              placeholder:
                "Include input validation and clear output messages...",
            },
            {
              question:
                "Explain the difference between int, float, char, and double data types with examples.",
              type: "text",
              placeholder:
                "int stores whole numbers like... float stores decimal numbers... char stores...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Write a program using loops to print the multiplication table for any given number.",
              type: "text",
              placeholder:
                "Use for loop or while loop, include user input for the number, format output clearly...",
            },
            {
              question:
                "Create a function that finds the factorial of a number using recursion.",
              type: "text",
              placeholder:
                "int factorial(int n) {\n    // Base case and recursive case\n}",
            },
            {
              question:
                "Implement a simple calculator that performs +, -, *, / operations using switch statement.",
              type: "text",
              placeholder:
                "Include error handling for division by zero and invalid operators...",
            },
          ],
          Examen: [
            {
              question:
                "Write a complete program that manages a student database using arrays and structures.",
              type: "text",
              placeholder:
                "struct Student { char name[50]; int age; float gpa; }; Include functions for add, display, search students...",
            },
            {
              question:
                "Create a program that reads a text file, counts words, and writes statistics to another file.",
              type: "text",
              placeholder:
                "Include file handling, error checking, and proper memory management...",
            },
            {
              question:
                "Implement a sorting algorithm (bubble sort or selection sort) and explain its time complexity.",
              type: "text",
              placeholder:
                "Algorithm implementation with explanation of how it works and performance analysis...",
            },
          ],
        },
        Python: {
          "Assignment 1": [
            {
              question:
                "Write a Python program that creates a simple quiz game with at least 5 questions.",
              type: "text",
              placeholder:
                "questions = ['What is 2+2?', ...]\nanswers = ['4', ...]\nscore = 0\n# Your code here",
            },
            {
              question:
                "Create a program that analyzes a list of numbers: finds max, min, average, and sum.",
              type: "text",
              placeholder:
                "numbers = [10, 25, 30, ...]\n# Use built-in functions and explain each step",
            },
            {
              question:
                "Explain Python data types: list, tuple, dictionary, and set with examples.",
              type: "text",
              placeholder:
                "List is mutable and ordered: [1,2,3]. Tuple is immutable: (1,2,3). Dictionary stores key-value pairs...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Build a password generator that creates secure passwords with different criteria (length, special characters, etc.).",
              type: "text",
              placeholder:
                "import random\nimport string\n# Include options for password complexity",
            },
            {
              question:
                "Create a class 'BankAccount' with methods for deposit, withdraw, and check balance.",
              type: "text",
              placeholder:
                "class BankAccount:\n    def __init__(self, initial_balance=0):\n        # Your code here",
            },
            {
              question:
                "Write a program that reads a CSV file and performs data analysis (using pandas if possible).",
              type: "text",
              placeholder:
                "import pandas as pd\n# Read CSV, show basic statistics, create simple visualizations",
            },
          ],
          Examen: [
            {
              question:
                "Develop a complete web scraping project that extracts data from a website and saves it to a database or file.",
              type: "text",
              placeholder:
                "import requests\nfrom bs4 import BeautifulSoup\n# Include error handling and ethical scraping practices",
            },
            {
              question:
                "Create a GUI application using tkinter that manages a to-do list with add, edit, delete, and save functions.",
              type: "text",
              placeholder:
                "import tkinter as tk\nfrom tkinter import messagebox\n# Include proper event handling and data persistence",
            },
            {
              question:
                "Build a data visualization dashboard using matplotlib or plotly that analyzes a real dataset.",
              type: "text",
              placeholder:
                "import matplotlib.pyplot as plt\nimport pandas as pd\n# Create multiple chart types with insights and interpretations",
            },
          ],
        },
        PowerPoint: {
          "Assignment 1": [
            {
              question:
                "Create a 5-slide presentation about your favorite hobby including title slide, content slides with images, and conclusion.",
              type: "text",
              placeholder:
                "Slide 1: Title - My Favorite Hobby\nSlide 2: Introduction to the hobby\nSlide 3: Why I enjoy it...",
            },
            {
              question:
                "Design a professional slide template with consistent fonts, colors, and layout for a business presentation.",
              type: "text",
              placeholder:
                "Template design: Company colors, professional fonts (Arial/Calibri), slide master setup, placeholder positions...",
            },
            {
              question:
                "Explain effective presentation design principles: contrast, alignment, repetition, and proximity.",
              type: "text",
              placeholder:
                "Contrast helps elements stand out by... Alignment creates order by... Repetition builds consistency through...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Create an interactive presentation with hyperlinks, action buttons, and slide transitions for a product demo.",
              type: "text",
              placeholder:
                "Product: Target audience, key features, navigation structure, interactive elements used...",
            },
            {
              question:
                "Design an infographic-style slide using charts, SmartArt, and data visualization to present statistics.",
              type: "text",
              placeholder:
                "Topic chosen, data sources, chart types used, visual hierarchy, color scheme for data clarity...",
            },
            {
              question:
                "Create a training presentation with animations and multimedia elements (audio/video).",
              type: "text",
              placeholder:
                "Training topic, learning objectives, multimedia integration strategy, animation timing...",
            },
          ],
          Examen: [
            {
              question:
                "Develop a complete business pitch presentation (10-12 slides) with professional design, data charts, and compelling narrative.",
              type: "text",
              placeholder:
                "Business idea, market analysis, financial projections, slide-by-slide content plan, design rationale...",
            },
            {
              question:
                "Create a presentation portfolio showcasing different PowerPoint techniques: templates, animations, multimedia, and interactive elements.",
              type: "text",
              placeholder:
                "Portfolio structure, technique demonstrations, before/after examples, skill progression showcase...",
            },
            {
              question:
                "Design a presentation for online delivery including speaker notes, timing, and engagement strategies.",
              type: "text",
              placeholder:
                "Online presentation challenges, audience engagement techniques, technical considerations, speaker notes strategy...",
            },
          ],
        },
      };

      // Student information and email functionality
      let studentInfo = {
        name: "",
        course: "",
        examAssignment: "",
        studentId: "",
        studentEmail: "",
      };

      function validateStudentInfo() {
        const name = document.getElementById("student-name").value.trim();
        const course = document.getElementById("course-name").value;
        const examAssignment = document
          .getElementById("exam-assignment-name")
          .value.trim();
        const studentId = document.getElementById("student-id").value.trim();
        const studentEmail = document.getElementById("student-email").value.trim();

        // Reset validation messages
        document.querySelectorAll(".validation-message").forEach((msg) => {
          msg.style.display = "none";
        });

        let isValid = true;

        if (!name) {
          document.querySelector(
            "#student-name + .validation-message"
          ).style.display = "block";
          isValid = false;
        }

        if (!course) {
          document.querySelector(
            "#course-name + .validation-message"
          ).style.display = "block";
          isValid = false;
        }

        if (!examAssignment) {
          document.querySelector(
            "#exam-assignment-name + .validation-message"
          ).style.display = "block";
          isValid = false;
        }

        if (!studentEmail) {
          document.querySelector(
            "#student-email + .validation-message"
          ).style.display = "block";
          isValid = false;
        } else if (!isValidEmail(studentEmail)) {
          document.querySelector(
            "#student-email + .validation-message"
          ).textContent = "Please enter a valid email address";
          document.querySelector(
            "#student-email + .validation-message"
          ).style.display = "block";
          isValid = false;
        }

        if (isValid) {
          studentInfo = {
            name: name,
            course: course,
            examAssignment: examAssignment,
            studentId: studentId || "Not provided",
            studentEmail: studentEmail,
          };

          showEmailStatus(
            "Student information validated successfully!",
            "success"
          );

          // Automatically generate quiz for the selected course
          if (course && courseQuestions[course]) {
            generateQuizQuestions(course);
            showCourseInfo(course);
            updateAssignmentTips(course);
            populateAssignments(course);

            // Show additional success message about quiz generation
            setTimeout(() => {
              showEmailStatus(
                `${course} quiz automatically generated with course-specific questions and assignments!`,
                "success"
              );
            }, 2000);
          }

          // Change button to show success
          const validateBtn = event.target;
          validateBtn.innerHTML =
            '<i class="fas fa-check-circle"></i> Information Validated & Quiz Generated';
          validateBtn.classList.remove("btn-primary");
          validateBtn.classList.add("btn-success");
        } else {
          showEmailStatus("Please fill in all required fields.", "error");
        }
      }

      // Email validation function
      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }

      function showEmailStatus(message, type) {
        const statusDiv = document.getElementById("email-status");
        const contentDiv = document.getElementById("email-status-content");

        contentDiv.innerHTML = `<img src="images/AI.png" alt="AI Logo" class="mini-logo"><i class="fas ${
          type === "success"
            ? "fa-check-circle"
            : type === "error"
            ? "fa-exclamation-circle"
            : "fa-spinner fa-spin"
        }"></i> ${message}`;

        statusDiv.className = `email-status ${type} show`;

        setTimeout(
          () => {
            statusDiv.classList.remove("show");
          },
          type === "success" ? 3000 : 5000
        );
      }

      // Utility functions for comprehensive data collection
      function getSessionDuration() {
        const sessionStart = sessionStorage.getItem('sessionStart');
        if (!sessionStart) {
          sessionStorage.setItem('sessionStart', Date.now().toString());
          return '0 minutes';
        }
        const duration = Math.floor((Date.now() - parseInt(sessionStart)) / 60000);
        return `${duration} minutes`;
      }

      function getBrowserInfo() {
        const browser = navigator.userAgent;
        if (browser.includes('Chrome')) return 'Chrome';
        if (browser.includes('Firefox')) return 'Firefox';
        if (browser.includes('Safari')) return 'Safari';
        if (browser.includes('Edge')) return 'Edge';
        return 'Unknown';
      }

      function getSubmissionType() {
        // Check which form is being submitted based on current context
        const currentSection = document.querySelector('.section.active');
        if (currentSection) {
          if (currentSection.id === 'quiz-section') return 'Quiz';
          if (currentSection.id === 'assignment-section') return 'Assignment';
        }
        return 'Student Information';
      }

      function getTotalQuestions() {
        return document.querySelectorAll('.quiz-question').length;
      }

      function getAnsweredQuestions() {
        return document.querySelectorAll('input[type="radio"]:checked').length;
      }

      function getCompletionPercentage() {
        const total = getTotalQuestions();
        const answered = getAnsweredQuestions();
        return total > 0 ? Math.round((answered / total) * 100) : 0;
      }

      function collectAllFormData() {
        const allData = {};
        
        // Student Information
        allData.studentInfo = {
          name: studentInfo.name,
          course: studentInfo.course,
          examAssignment: studentInfo.examAssignment,
          studentId: studentInfo.studentId,
          studentEmail: studentInfo.studentEmail
        };

        // Quiz Answers
        const quizQuestions = document.querySelectorAll('.quiz-question');
        allData.quizAnswers = {};
        quizQuestions.forEach((question, index) => {
          const questionText = question.querySelector('h4')?.textContent || `Question ${index + 1}`;
          const selectedAnswer = question.querySelector('input[type="radio"]:checked');
          allData.quizAnswers[`question_${index + 1}`] = {
            question: questionText,
            answer: selectedAnswer ? selectedAnswer.value : 'Not answered',
            options: Array.from(question.querySelectorAll('input[type="radio"]')).map(input => input.value)
          };
        });

        // Assignment Content
        const assignmentTextarea = document.getElementById('assignmentContent');
        if (assignmentTextarea) {
          allData.assignmentContent = {
            content: assignmentTextarea.value,
            wordCount: assignmentTextarea.value.split(/\s+/).filter(word => word.length > 0).length,
            characterCount: assignmentTextarea.value.length
          };
        }

        return allData;
      }

      function getPageInteractions() {
        return {
          clickCount: sessionStorage.getItem('clickCount') || 0,
          keyPressCount: sessionStorage.getItem('keyPressCount') || 0,
          scrollPosition: window.pageYOffset,
          timeOnPage: getSessionDuration(),
          lastInteraction: new Date().toISOString(),
          windowSize: `${window.innerWidth}x${window.innerHeight}`,
          devicePixelRatio: window.devicePixelRatio || 1
        };
      }

      // Track page interactions
      let clickCount = parseInt(sessionStorage.getItem('clickCount') || '0');
      let keyPressCount = parseInt(sessionStorage.getItem('keyPressCount') || '0');

      document.addEventListener('click', () => {
        clickCount++;
        sessionStorage.setItem('clickCount', clickCount.toString());
      });

      document.addEventListener('keypress', () => {
        keyPressCount++;
        sessionStorage.setItem('keyPressCount', keyPressCount.toString());
      });

      function createComprehensiveEmailContent(subject, originalContent, params) {
        const submissionType = getSubmissionType();
        const formData = collectAllFormData();
        
        let emailContent = `
=== COMPREHENSIVE SUBMISSION REPORT ===

SUBMISSION DETAILS:
- Type: ${submissionType}
- Subject: ${subject}
- Submission Time: ${new Date().toLocaleString()}
- Session Duration: ${getSessionDuration()}

STUDENT INFORMATION:
- Name: ${studentInfo.name}
- Student ID: ${studentInfo.studentId}
- Email: ${studentInfo.studentEmail}
- Course: ${studentInfo.course}
- Exam/Assignment: ${studentInfo.examAssignment}

TECHNICAL DETAILS:
- Browser: ${getBrowserInfo()}
- Screen Resolution: ${screen.width}x${screen.height}
- Page URL: ${window.location.href}
- Platform: InterroPlatform

SUBMISSION CONTENT:
${originalContent}

`;

        // Add quiz-specific details if applicable
        if (submissionType === 'Quiz' && formData.quizAnswers) {
          emailContent += `
QUIZ PERFORMANCE:
- Total Questions: ${getTotalQuestions()}
- Answered Questions: ${getAnsweredQuestions()}
- Completion Rate: ${getCompletionPercentage()}%

DETAILED ANSWERS:
`;
          Object.entries(formData.quizAnswers).forEach(([key, answer]) => {
            emailContent += `
${answer.question}
Answer: ${answer.answer}
Available Options: ${answer.options.join(', ')}
---
`;
          });
        }

        // Add assignment-specific details if applicable
        if (submissionType === 'Assignment' && formData.assignmentContent) {
          emailContent += `
ASSIGNMENT ANALYSIS:
- Word Count: ${formData.assignmentContent.wordCount}
- Character Count: ${formData.assignmentContent.characterCount}
- Content Length: ${formData.assignmentContent.content.length > 500 ? 'Comprehensive' : 'Brief'}

ASSIGNMENT CONTENT:
${formData.assignmentContent.content}
`;
        }

        // Add interaction analytics
        const interactions = getPageInteractions();
        emailContent += `
USER INTERACTION ANALYTICS:
- Total Clicks: ${interactions.clickCount}
- Key Presses: ${interactions.keyPressCount}
- Time on Page: ${interactions.timeOnPage}
- Window Size: ${interactions.windowSize}
- Last Interaction: ${interactions.lastInteraction}

COMPLETE FORM DATA (JSON):
${JSON.stringify(formData, null, 2)}

=== END OF REPORT ===
`;

        return emailContent;
      }

      function createDetailedAnalysis() {
        const analysis = {
          performanceMetrics: {
            completionRate: getCompletionPercentage(),
            timeEfficiency: calculateTimeEfficiency(),
            engagementLevel: calculateEngagementLevel()
          },
          behaviorAnalysis: {
            focusTime: getSessionDuration(),
            interactionPattern: analyzeInteractionPattern(),
            submissionReadiness: assessSubmissionReadiness()
          },
          technicalContext: {
            deviceInfo: getDeviceInfo(),
            networkConditions: getNetworkInfo(),
            sessionStability: assessSessionStability()
          }
        };
        
        return JSON.stringify(analysis, null, 2);
      }

      function calculateTimeEfficiency() {
        const sessionTime = parseInt(sessionStorage.getItem('sessionStart') || Date.now().toString());
        const timeSpent = Date.now() - sessionTime;
        const questionsAnswered = getAnsweredQuestions();
        return questionsAnswered > 0 ? Math.round(timeSpent / questionsAnswered / 1000) : 0;
      }

      function calculateEngagementLevel() {
        const clicks = parseInt(sessionStorage.getItem('clickCount') || '0');
        const keyPresses = parseInt(sessionStorage.getItem('keyPressCount') || '0');
        const sessionTime = (Date.now() - parseInt(sessionStorage.getItem('sessionStart') || Date.now().toString())) / 60000;
        return sessionTime > 0 ? Math.round((clicks + keyPresses) / sessionTime) : 0;
      }

      function analyzeInteractionPattern() {
        const clicks = parseInt(sessionStorage.getItem('clickCount') || '0');
        const keyPresses = parseInt(sessionStorage.getItem('keyPressCount') || '0');
        
        if (keyPresses > clicks * 2) return 'Text-Heavy';
        if (clicks > keyPresses * 2) return 'Navigation-Heavy';
        return 'Balanced';
      }

      function assessSubmissionReadiness() {
        const completion = getCompletionPercentage();
        if (completion >= 90) return 'Fully Prepared';
        if (completion >= 70) return 'Well Prepared';
        if (completion >= 50) return 'Moderately Prepared';
        return 'Needs More Work';
      }

      function getDeviceInfo() {
        return {
          platform: navigator.platform,
          language: navigator.language,
          cookieEnabled: navigator.cookieEnabled,
          onlineStatus: navigator.onLine
        };
      }

      function getNetworkInfo() {
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        return {
          effectiveType: connection?.effectiveType || 'unknown',
          downlink: connection?.downlink || 'unknown',
          rtt: connection?.rtt || 'unknown'
        };
      }

      function assessSessionStability() {
        const startTime = parseInt(sessionStorage.getItem('sessionStart') || Date.now().toString());
        const currentTime = Date.now();
        const sessionLength = currentTime - startTime;
        
        if (sessionLength > 1800000) return 'Extended Session'; // 30+ minutes
        if (sessionLength > 900000) return 'Normal Session'; // 15-30 minutes
        if (sessionLength > 300000) return 'Quick Session'; // 5-15 minutes
        return 'Brief Session'; // < 5 minutes
      }

      // Initialize session tracking
      if (!sessionStorage.getItem('sessionStart')) {
        sessionStorage.setItem('sessionStart', Date.now().toString());
      }

      async function sendEmailNotification(subject, content) {
        // Check if EmailJS is configured
        if (!emailConfig.isConfigured) {
          showEmailStatus(
            "Please configure EmailJS settings first!",
            "error"
          );
          return false;
        }

        if (!studentInfo.name) {
          showEmailStatus(
            "Please validate your student information first!",
            "error"
          );
          return false;
        }

        // Start the 5-second animation sequence
        showLoadingAnimation();

        try {
          // Collect comprehensive data
          const comprehensiveData = collectComprehensiveFormData();
          
          // Create detailed email content
          const detailedContent = createDetailedEmailContent(subject, content, comprehensiveData);
          
          const templateParams = {
            to_email: emailConfig.recipientEmail,
            student_name: studentInfo.name,
            course_name: studentInfo.course,
            exam_assignment_name: studentInfo.examAssignment,
            student_id: studentInfo.studentId,
            student_email: studentInfo.studentEmail,
            subject: subject,
            content: detailedContent,
            submission_time: new Date().toLocaleString(),
            platform_name: "InterroPlatform - Comprehensive Assessment System",
            
            // Comprehensive Analytics
            session_duration: getSessionDuration(),
            browser_info: getBrowserInfo(),
            page_url: window.location.href,
            user_agent: navigator.userAgent,
            screen_resolution: `${screen.width}x${screen.height}`,
            window_size: `${window.innerWidth}x${window.innerHeight}`,
            timestamp: Date.now(),
            submission_type: getSubmissionType(),
            total_questions: getTotalQuestions(),
            answered_questions: getAnsweredQuestions(),
            completion_percentage: getCompletionPercentage(),
            
            // Structured Data
            student_data: JSON.stringify(studentInfo, null, 2),
            quiz_data: JSON.stringify(comprehensiveData.quizAnswers, null, 2),
            assignment_data: JSON.stringify(comprehensiveData.assignmentAnalysis, null, 2),
            performance_data: JSON.stringify(comprehensiveData.performanceMetrics, null, 2),
            technical_data: JSON.stringify(comprehensiveData.technicalInfo, null, 2),
            interaction_data: JSON.stringify(comprehensiveData.interactionAnalytics, null, 2),
            
            // Complete raw data for advanced processing
            complete_data: JSON.stringify(comprehensiveData, null, 2)
          };

          // Send email using configured EmailJS settings
          const result = await emailjs.send(
            emailConfig.serviceId,
            emailConfig.templateId,
            templateParams
          );

          console.log('Email sent successfully:', result);
          
          // Show success message
          setTimeout(() => {
            hideLoadingAnimation();
            showEmailStatus('Email sent successfully to MDai correction center!', 'success');
          }, 5000);

          return true;

        } catch (error) {
          console.error('Email sending failed:', error);
          
          setTimeout(() => {
            hideLoadingAnimation();
            showEmailStatus(`Failed to send email: ${error.text || error.message}`, 'error');
          }, 5000);

          return false;
        }
      }

      // Comprehensive data collection function
      function collectComprehensiveFormData() {
        // Student Information
        const studentData = {
          name: studentInfo.name,
          studentId: studentInfo.studentId,
          email: studentInfo.studentEmail,
          course: studentInfo.course,
          examAssignment: studentInfo.examAssignment
        };

        // Quiz Answers Analysis
        const quizAnswers = {};
        const questions = document.querySelectorAll('.quiz-question');
        questions.forEach((question, index) => {
          const questionText = question.querySelector('h4')?.textContent || `Question ${index + 1}`;
          const selectedAnswer = question.querySelector('input[type="radio"]:checked');
          const allOptions = Array.from(question.querySelectorAll('input[type="radio"]')).map(input => input.value);
          
          quizAnswers[`question_${index + 1}`] = {
            question: questionText,
            answer: selectedAnswer ? selectedAnswer.value : 'Not answered',
            options: allOptions,
            isAnswered: !!selectedAnswer
          };
        });

        // Assignment Content Analysis
        const assignmentTextarea = document.getElementById('assignmentContent');
        const assignmentContent = assignmentTextarea ? assignmentTextarea.value : '';
        const assignmentAnalysis = {
          content: assignmentContent,
          wordCount: assignmentContent.split(/\s+/).filter(word => word.length > 0).length,
          characterCount: assignmentContent.length,
          hasContent: assignmentContent.trim().length > 0,
          estimatedReadingTime: Math.ceil(assignmentContent.split(/\s+/).filter(word => word.length > 0).length / 200)
        };

        // Performance Metrics
        const sessionDuration = Math.floor((Date.now() - parseInt(sessionStorage.getItem('sessionStart') || Date.now().toString())) / 60000);
        const totalQuestions = questions.length;
        const answeredQuestions = Object.values(quizAnswers).filter(q => q.isAnswered).length;
        const completionRate = totalQuestions > 0 ? Math.round((answeredQuestions / totalQuestions) * 100) : 0;

        const performanceMetrics = {
          sessionDuration: `${sessionDuration} minutes`,
          totalQuestions,
          answeredQuestions,
          completionRate: `${completionRate}%`,
          efficiency: calculateEfficiencyRating(completionRate, sessionDuration),
          timePerQuestion: totalQuestions > 0 ? Math.round(sessionDuration / totalQuestions * 100) / 100 : 0
        };

        // Technical Information
        const technicalInfo = {
          browser: getBrowserInfo(),
          screenResolution: `${screen.width}x${screen.height}`,
          windowSize: `${window.innerWidth}x${window.innerHeight}`,
          userAgent: navigator.userAgent,
          platform: navigator.platform,
          language: navigator.language,
          onlineStatus: navigator.onLine,
          timestamp: new Date().toISOString(),
          pageUrl: window.location.href,
          devicePixelRatio: window.devicePixelRatio || 1,
          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
        };

        // Interaction Analytics
        const clickCount = parseInt(sessionStorage.getItem('clickCount') || '0');
        const keyPressCount = parseInt(sessionStorage.getItem('keyPressCount') || '0');
        const totalInteractions = clickCount + keyPressCount;

        const interactionAnalytics = {
          sessionDuration: performanceMetrics.sessionDuration,
          totalInteractions,
          clickCount,
          keyPressCount,
          interactionsPerMinute: sessionDuration > 0 ? Math.round(totalInteractions / sessionDuration) : 0,
          engagementLevel: calculateEngagementLevel(totalInteractions, sessionDuration),
          activityPattern: analyzeActivityPattern(clickCount, keyPressCount),
          lastInteraction: new Date().toISOString()
        };

        return {
          studentData,
          quizAnswers,
          assignmentAnalysis,
          performanceMetrics,
          technicalInfo,
          interactionAnalytics,
          submissionTime: new Date().toLocaleString(),
          platform: "InterroPlatform - Direct Email Integration"
        };
      }

      // Create detailed email content
      function createDetailedEmailContent(subject, originalContent, data) {
        return `
=== COMPREHENSIVE INTERROPLATFORM SUBMISSION REPORT ===

 SUBMISSION OVERVIEW:
- Subject: ${subject}
- Submission Time: ${data.submissionTime}
- Platform: ${data.platform}
- Session Duration: ${data.performanceMetrics.sessionDuration}

 STUDENT INFORMATION:
- Name: ${data.studentData.name}
- Student ID: ${data.studentData.studentId}
- Email: ${data.studentData.email}
- Course: ${data.studentData.course}
- Exam/Assignment: ${data.studentData.examAssignment}

 PERFORMANCE SUMMARY:
- Quiz Completion: ${data.performanceMetrics.completionRate}
- Questions Answered: ${data.performanceMetrics.answeredQuestions}/${data.performanceMetrics.totalQuestions}
- Efficiency Rating: ${data.performanceMetrics.efficiency}
- Average Time per Question: ${data.performanceMetrics.timePerQuestion} minutes

 DETAILED QUIZ RESPONSES:
${Object.entries(data.quizAnswers).map(([key, answer]) => `
${answer.question}
 Student Answer: ${answer.answer}
 Available Options: ${answer.options.join(', ')}
${answer.isAnswered ? ' Answered' : ' Not Answered'}
${''.repeat(50)}`).join('')}

 ASSIGNMENT ANALYSIS:
- Content Available: ${data.assignmentAnalysis.hasContent ? 'Yes' : 'No'}
- Word Count: ${data.assignmentAnalysis.wordCount} words
- Character Count: ${data.assignmentAnalysis.characterCount} characters
- Estimated Reading Time: ${data.assignmentAnalysis.estimatedReadingTime} minutes

ASSIGNMENT CONTENT:
${data.assignmentAnalysis.content || 'No assignment content provided'}

 INTERACTION ANALYTICS:
- Total Interactions: ${data.interactionAnalytics.totalInteractions}
- Clicks: ${data.interactionAnalytics.clickCount}
- Key Presses: ${data.interactionAnalytics.keyPressCount}
- Interactions per Minute: ${data.interactionAnalytics.interactionsPerMinute}
- Engagement Level: ${data.interactionAnalytics.engagementLevel}
- Activity Pattern: ${data.interactionAnalytics.activityPattern}

 TECHNICAL DETAILS:
- Browser: ${data.technicalInfo.browser}
- Screen Resolution: ${data.technicalInfo.screenResolution}
- Window Size: ${data.technicalInfo.windowSize}
- Platform: ${data.technicalInfo.platform}
- Language: ${data.technicalInfo.language}
- Timezone: ${data.technicalInfo.timezone}
- Online Status: ${data.technicalInfo.onlineStatus}

 ORIGINAL SUBMISSION:
${originalContent}

 COMPLETE DATA (JSON):
${JSON.stringify(data, null, 2)}

=== END OF COMPREHENSIVE REPORT ===

 This automated report was generated by InterroPlatform
 Delivered to: MDai Correction Center
 Generated on: ${new Date().toLocaleString()}
        `;
      }

      // Helper functions for analysis
      function calculateEfficiencyRating(completionRate, sessionMinutes) {
        const completion = parseInt(completionRate);
        if (sessionMinutes === 0) return "Just Started";
        if (completion >= 90 && sessionMinutes <= 10) return "Highly Efficient ";
        if (completion >= 75 && sessionMinutes <= 20) return "Efficient ";
        if (completion >= 50 && sessionMinutes <= 30) return "Moderate ";
        if (completion >= 25) return "Needs Improvement ";
        return "Poor Performance ";
      }

      function analyzeActivityPattern(clicks, keyPresses) {
        if (keyPresses > clicks * 3) return "Text-Heavy User (Detailed Writer)";
        if (clicks > keyPresses * 3) return "Navigation-Heavy User (Quick Browser)";
        if (clicks > 50 && keyPresses > 100) return "Highly Active User";
        if (clicks < 10 && keyPresses < 20) return "Minimal Interaction";
        return "Balanced User";
      }

      // Enhanced email sending with progress tracking
      }

      // New function to show loading animation
      function showLoadingAnimation() {
        const overlay = document.getElementById('loading-overlay');
        overlay.classList.add('active');
        
        // Create floating particles
        createFloatingParticles();
      }

      // New function to hide loading animation
      function hideLoadingAnimation() {
        const overlay = document.getElementById('loading-overlay');
        overlay.classList.remove('active');
        
        // Reset all steps
        document.querySelectorAll('.loading-step').forEach(step => {
          step.classList.remove('active', 'completed');
        });
      }

      // Simulate email process with step-by-step animation
      async function simulateEmailProcess() {
        const steps = [
          { id: 'step-1', delay: 500 },
          { id: 'step-2', delay: 1000 },
          { id: 'step-3', delay: 1500 },
          { id: 'step-4', delay: 2500 },
          { id: 'step-5', delay: 4000 }
        ];

        for (const step of steps) {
          await new Promise(resolve => {
            setTimeout(() => {
              // Mark previous step as completed
              const prevStep = document.querySelector('.loading-step.active');
              if (prevStep) {
                prevStep.classList.remove('active');
                prevStep.classList.add('completed');
              }
              
              // Activate current step
              const currentStep = document.getElementById(step.id);
              currentStep.classList.add('active');
              
              resolve();
            }, step.delay);
          });
        }

        // Complete the last step
        setTimeout(() => {
          const lastStep = document.querySelector('.loading-step.active');
          if (lastStep) {
            lastStep.classList.remove('active');
            lastStep.classList.add('completed');
          }
        }, 500);
      }

      // Show success animation
      function showSuccessAnimation() {
        hideLoadingAnimation();
        
        const successDiv = document.getElementById('success-animation');
        successDiv.classList.add('show');
        
        // Hide success animation after 3 seconds
        setTimeout(() => {
          successDiv.classList.remove('show');
        }, 3000);
      }

      // Create floating particles effect
      function createFloatingParticles() {
        const overlay = document.getElementById('loading-overlay');
        
        for (let i = 0; i < 20; i++) {
          setTimeout(() => {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.width = Math.random() * 6 + 2 + 'px';
            particle.style.height = particle.style.width;
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 2 + 's';
            
            overlay.appendChild(particle);
            
            // Remove particle after animation
            setTimeout(() => {
              if (particle.parentNode) {
                particle.parentNode.removeChild(particle);
              }
            }, 3000);
          }, i * 100);
        }
      }

      // Assignment Population Functions
      function populateAssignments(courseName) {
        const assignmentSelect = document.getElementById(
          "exam-assignment-name"
        );

        // Clear existing options
        assignmentSelect.innerHTML = "";

        if (courseName && courseAssignments[courseName]) {
          // Add default option
          const defaultOption = document.createElement("option");
          defaultOption.value = "";
          defaultOption.textContent = "Select assignment or exam";
          assignmentSelect.appendChild(defaultOption);

          // Add course-specific assignments
          courseAssignments[courseName].forEach((assignment) => {
            const option = document.createElement("option");
            option.value = assignment;
            option.textContent = assignment;
            assignmentSelect.appendChild(option);
          });

          // Add event listener for assignment selection
          assignmentSelect.onchange = function () {
            const selectedAssignment = this.value;
            if (selectedAssignment) {
              generateAssignmentQuestions(courseName, selectedAssignment);
              showAssignmentStatus(
                `${selectedAssignment} questions loaded successfully!`,
                "success"
              );
            } else {
              generateAssignmentQuestions("", "");
            }
          };

          // Update placeholder and styling
          assignmentSelect.style.borderColor = "#667eea";
          assignmentSelect.style.backgroundColor = "rgba(102, 126, 234, 0.05)";

          // Show success indicator
          showAssignmentStatus(
            `${courseAssignments[courseName].length} assignments available for ${courseName}`,
            "success"
          );
        } else {
          // No course selected
          const defaultOption = document.createElement("option");
          defaultOption.value = "";
          defaultOption.textContent =
            "Select course first to see available assignments";
          assignmentSelect.appendChild(defaultOption);

          // Reset styling
          assignmentSelect.style.borderColor = "rgba(102, 126, 234, 0.2)";
          assignmentSelect.style.backgroundColor = "rgba(255, 255, 255, 0.9)";
        }
      }

      function showAssignmentStatus(message, type) {
        // Create or update assignment status indicator
        let statusDiv = document.getElementById("assignment-status");

        if (!statusDiv) {
          statusDiv = document.createElement("div");
          statusDiv.id = "assignment-status";
          statusDiv.className = "assignment-status";

          const assignmentGroup = document
            .querySelector("#exam-assignment-name")
            .closest(".form-group");
          assignmentGroup.appendChild(statusDiv);
        }

        statusDiv.innerHTML = `<img src="images/AI.png" alt="AI Logo" class="mini-logo"><i class="fas ${
          type === "success" ? "fa-check-circle" : "fa-info-circle"
        }"></i> ${message}`;
        statusDiv.className = `assignment-status ${type}`;
        statusDiv.style.display = "block";

        // Auto-hide after 4 seconds for success messages
        if (type === "success") {
          setTimeout(() => {
            if (statusDiv) {
              statusDiv.style.display = "none";
            }
          }, 4000);
        }
      }

      // Dynamic Quiz Generation Functions
      function updateQuizForCourse() {
        const selectedCourse = document.getElementById("course-name").value;
        if (selectedCourse && courseQuestions[selectedCourse]) {
          generateQuizQuestions(selectedCourse);
          showCourseInfo(selectedCourse);
          updateAssignmentTips(selectedCourse);
          populateAssignments(selectedCourse);
        } else {
          resetQuizSection();
          updateAssignmentTips("");
          populateAssignments("");
        }
      }

      function generateQuizQuestions(courseName) {
        const questions = courseQuestions[courseName];
        const quizContainer = document.querySelector(".quiz-container");

        // Clear existing questions (keep the alert)
        const existingQuestions = quizContainer.querySelectorAll(".question");
        existingQuestions.forEach((q) => q.remove());

        // Randomize questions (take 4 random questions if more than 4 available)
        const selectedQuestions =
          questions.length > 4
            ? shuffleArray([...questions]).slice(0, 4)
            : [...questions];

        // Generate HTML for each question
        selectedQuestions.forEach((q, index) => {
          const questionDiv = document.createElement("div");
          questionDiv.className = "question";
          questionDiv.setAttribute("data-question-index", index);

          if (q.type === "multiple") {
            questionDiv.innerHTML = `
              <h3>Question ${index + 1}: ${q.question}</h3>
              <ul class="options">
                ${q.options
                  .map(
                    (option, optIndex) => `
                  <li class="option">
                    <input type="radio" name="q${index}" value="${optIndex}" id="q${index}${String.fromCharCode(
                      97 + optIndex
                    )}">
                    <label for="q${index}${String.fromCharCode(
                      97 + optIndex
                    )}">${option}</label>
                  </li>
                `
                  )
                  .join("")}
              </ul>
            `;
          } else if (q.type === "text") {
            questionDiv.innerHTML = `
              <h3>Question ${index + 1}: ${q.question}</h3>
              <textarea 
                name="q${index}" 
                style="width: 100%; height: 100px; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-family: inherit;" 
                placeholder="${q.placeholder}"
              ></textarea>
            `;
          } else if (q.type === "fillblank") {
            questionDiv.innerHTML = `
              <h3>Question ${index + 1}: ${q.question}</h3>
              <input 
                type="text" 
                name="q${index}" 
                style="width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-family: inherit; font-size: 1rem;" 
                placeholder="${q.placeholder}"
              />
              <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                <i class="fas fa-info-circle"></i> Fill in the blank with the correct word or phrase
              </div>
            `;
          }

          quizContainer.appendChild(questionDiv);
        });

        // Update the alert message
        const alertDiv = quizContainer.querySelector(".alert-success");
        if (alertDiv) {
          alertDiv.innerHTML = `
            <i class="fas fa-play"></i>
            <span>${courseName} quiz is now active! Answer all ${selectedQuestions.length} questions and submit before time runs out.</span>
          `;
        }
      }

      function showCourseInfo(courseName) {
        const totalQuestions = courseQuestions[courseName].length;
        const quizSection = document.getElementById("quiz");

        // Remove existing course info if any
        const existingInfo = quizSection.querySelector(".course-info");
        if (existingInfo) {
          existingInfo.remove();
        }

        // Add course information card
        const courseInfoDiv = document.createElement("div");
        courseInfoDiv.className = "course-info alert alert-info";
        courseInfoDiv.innerHTML = `
          <i class="fas fa-info-circle"></i>
          <span><strong>${courseName}</strong> - Quiz automatically generated with ${Math.min(
          4,
          totalQuestions
        )} questions from our ${totalQuestions}-question database.</span>
        `;

        const quizCard = quizSection.querySelector(".card");
        quizCard.insertBefore(
          courseInfoDiv,
          quizCard.querySelector(".quiz-container")
        );
      }

      function resetQuizSection() {
        const quizContainer = document.querySelector(".quiz-container");
        const existingQuestions = quizContainer.querySelectorAll(".question");
        existingQuestions.forEach((q) => q.remove());

        // Reset alert message
        const alertDiv = quizContainer.querySelector(".alert-success");
        if (alertDiv) {
          alertDiv.innerHTML = `
            <i class="fas fa-info-circle"></i>
            <span>Please select a course to automatically generate quiz questions.</span>
          `;
          alertDiv.className = "alert alert-info";
        }

        // Remove course info
        const quizSection = document.getElementById("quiz");
        const existingInfo = quizSection.querySelector(".course-info");
        if (existingInfo) {
          existingInfo.remove();
        }
      }

      function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
      }

      function generateAssignmentQuestions(courseName, assignmentType) {
        const questionsContainer = document.getElementById(
          "assignment-questions-container"
        );

        // Clear existing content
        questionsContainer.innerHTML = "";

        if (
          courseName &&
          assignmentType &&
          assignmentQuestions[courseName] &&
          assignmentQuestions[courseName][assignmentType]
        ) {
          const questions = assignmentQuestions[courseName][assignmentType];

          // Add header
          const headerDiv = document.createElement("div");
          headerDiv.className = "alert alert-success";
          headerDiv.innerHTML = `
            <img src="images/AI.png" alt="AI Logo" class="mini-logo">
            <i class="fas fa-tasks"></i>
            <span><strong>${courseName} - ${assignmentType}</strong>: Complete all ${questions.length} questions below.</span>
          `;
          questionsContainer.appendChild(headerDiv);

          // Generate questions
          questions.forEach((q, index) => {
            const questionDiv = document.createElement("div");
            questionDiv.className = "question assignment-question";
            questionDiv.setAttribute("data-assignment-question", index);

            if (q.type === "text") {
              questionDiv.innerHTML = `
                <h3><i class="fas fa-edit"></i> Question ${index + 1}:</h3>
                <p style="color: #555; margin-bottom: 15px;">${q.question}</p>
                <textarea 
                  name="assignment_q${index}" 
                  style="width: 100%; height: 120px; padding: 15px; border: 2px solid #667eea; border-radius: 10px; font-family: inherit; resize: vertical;" 
                  placeholder="${q.placeholder}"
                ></textarea>
              `;
            } else if (q.type === "fillblank") {
              questionDiv.innerHTML = `
                <h3><i class="fas fa-edit"></i> Question ${index + 1}:</h3>
                <p style="color: #555; margin-bottom: 15px;">${q.question}</p>
                <input 
                  type="text" 
                  name="assignment_q${index}" 
                  style="width: 100%; padding: 15px; border: 2px solid #667eea; border-radius: 10px; font-family: inherit; font-size: 1rem;" 
                  placeholder="${q.placeholder}"
                />
                <div style="font-size: 0.9rem; color: #666; margin-top: 8px;">
                  <i class="fas fa-info-circle"></i> Fill in the blanks with the correct words
                </div>
              `;
            }

            questionsContainer.appendChild(questionDiv);
          });
        } else {
          // No assignment selected or no questions available
          questionsContainer.innerHTML = `
            <div class="alert alert-warning">
              <i class="fas fa-exclamation-triangle"></i>
              <span>Please select a course and assignment type above to see your assignment questions.</span>
            </div>
          `;
        }
      }

      function updateAssignmentTips(courseName) {
        const assignmentTips = {
          "English 1":
            " Recommended file formats: .doc, .docx, .pdf for essays and writing assignments",
          "English 2":
            " Submit literature analysis, creative writing, or research papers",
          "English 3":
            " Upload argumentative essays, research papers, or literary critiques",
          "Web Development":
            " Submit .html, .css, .js files or screenshots of your web projects",
          Excel:
            " Upload .xlsx files with your spreadsheets, charts, and data analysis",
          Photoshop:
            " Submit .psd files or exported images (.jpg, .png) of your designs",
          "C Programming":
            " Upload .c source files or screenshots of your code and output",
          Python:
            " Submit .py files or .ipynb notebooks with your Python programs",
          PowerPoint: " Upload .pptx files of your presentations",
        };

        const assignmentSection = document.getElementById("assignments");
        const existingTip = assignmentSection.querySelector(
          ".course-assignment-tip"
        );

        if (existingTip) {
          existingTip.remove();
        }

        if (courseName && assignmentTips[courseName]) {
          const tipDiv = document.createElement("div");
          tipDiv.className = "course-assignment-tip alert alert-info";
          tipDiv.innerHTML = `
            <i class="fas fa-lightbulb"></i>
            <span><strong>${courseName} Assignment Tips:</strong> ${assignmentTips[courseName]}</span>
          `;

          const assignmentCard = assignmentSection.querySelector(".card");
          const alertInfo = assignmentCard.querySelector(".alert-info");
          assignmentCard.insertBefore(tipDiv, alertInfo.nextSibling);
        }
      }

      // Navigation functionality
      function showSection(sectionName) {
        // Hide all sections
        document.querySelectorAll(".section").forEach((section) => {
          section.classList.remove("active");
        });

        // Remove active class from all nav buttons
        document.querySelectorAll(".nav-btn").forEach((btn) => {
          btn.classList.remove("active");
        });

        // Show selected section
        document.getElementById(sectionName).classList.add("active");

        // Add active class to clicked button
        event.target.classList.add("active");
      }

      // File upload functionality
      const uploadArea = document.getElementById("upload-area");
      const fileInput = document.getElementById("file-input");
      const fileList = document.getElementById("file-list");

      uploadArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        uploadArea.classList.add("dragover");
      });

      uploadArea.addEventListener("dragleave", () => {
        uploadArea.classList.remove("dragover");
      });

      uploadArea.addEventListener("drop", (e) => {
        e.preventDefault();
        uploadArea.classList.remove("dragover");
        handleFiles(e.dataTransfer.files);
      });

      uploadArea.addEventListener("click", () => {
        fileInput.click();
      });

      fileInput.addEventListener("change", (e) => {
        handleFiles(e.target.files);
      });

      function handleFiles(files) {
        Array.from(files).forEach((file) => {
          addFileToList(file);
        });
      }

      function addFileToList(file) {
        const fileItem = document.createElement("div");
        fileItem.className = "file-item";

        const fileIcon = getFileIcon(file.type);
        const fileSize = (file.size / 1024 / 1024).toFixed(2);

        fileItem.innerHTML = `
                <div class="file-info">
                    <i class="fas ${fileIcon} file-icon"></i>
                    <div>
                        <div style="font-weight: 600;">${file.name}</div>
                        <div style="color: #666; font-size: 0.9rem;">${fileSize} MB</div>
                    </div>
                </div>
                <div>
                    <button class="btn-danger" onclick="removeFile(this)" style="padding: 8px 15px; font-size: 0.9rem;">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="progress-bar" style="width: 200px; margin-left: 15px;">
                    <div class="progress-fill" style="width: 0%;"></div>
                </div>
            `;

        fileList.appendChild(fileItem);

        // Simulate upload progress
        simulateUpload(fileItem.querySelector(".progress-fill"));
      }

      function getFileIcon(fileType) {
        if (fileType.includes("pdf")) return "fa-file-pdf";
        if (fileType.includes("audio")) return "fa-file-audio";
        if (fileType.includes("video")) return "fa-file-video";
        if (fileType.includes("image")) return "fa-file-image";
        if (fileType.includes("word")) return "fa-file-word";
        if (fileType.includes("powerpoint")) return "fa-file-powerpoint";
        return "fa-file";
      }

      function simulateUpload(progressFill) {
        let progress = 0;
        const interval = setInterval(() => {
          progress += Math.random() * 15;
          if (progress >= 100) {
            progress = 100;
            clearInterval(interval);
          }
          progressFill.style.width = progress + "%";
        }, 200);
      }

      function removeFile(button) {
        button.closest(".file-item").remove();
      }

      async function submitAssignment() {
        // Check if assignment questions are loaded
        const assignmentQuestions = document.querySelectorAll(
          ".assignment-question"
        );
        if (assignmentQuestions.length === 0) {
          showEmailStatus(
            "Please select a course and assignment to see questions.",
            "error"
          );
          return;
        }

        if (!studentInfo.name) {
          showEmailStatus(
            "Please validate your student information first!",
            "error"
          );
          return;
        }

        const submitBtn = event.target;
        const originalContent = submitBtn.innerHTML;
        submitBtn.innerHTML =
          '<i class="fas fa-spinner fa-spin"></i> Processing...';
        submitBtn.disabled = true;

        // Collect assignment answers
        const assignmentAnswers = [];
        assignmentQuestions.forEach((questionDiv, index) => {
          const questionText = questionDiv.querySelector("p").textContent;
          const input = questionDiv.querySelector(
            'textarea, input[type="text"]'
          );
          const answer = input ? input.value.trim() : "No answer provided";

          assignmentAnswers.push(
            `Question ${
              index + 1
            }: ${questionText}\nAnswer: ${answer}\n${"".repeat(50)}`
          );
        });

        // Prepare email content
        const subject = `Assignment Submission - ${studentInfo.examAssignment}`;
        const content = `
 ASSIGNMENT SUBMISSION DETAILS

 Student Information:
 Name: ${studentInfo.name}
 Email: ${studentInfo.studentEmail}
 Course: ${studentInfo.course}
 Student ID: ${studentInfo.studentId}
 Assignment: ${studentInfo.examAssignment}

 Assignment Answers:
${assignmentAnswers.join("\n\n")}

 Submission Time: ${new Date().toLocaleString()}
 Platform: InterroPlatform - Advanced Assessment System

 This is an automated notification from the InterroPlatform assessment system.
        `;

        try {
          const emailSent = await sendEmailNotification(subject, content);

          if (emailSent) {
            submitBtn.innerHTML =
              '<i class="fas fa-check"></i> Successfully Submitted!';
            submitBtn.classList.remove("btn-primary");
            submitBtn.classList.add("btn-success");

            // Show success message
            const alertDiv = document.createElement("div");
            alertDiv.className = "alert alert-success";
            alertDiv.innerHTML = `
              <i class="fas fa-check-circle"></i>
              <span>Assignment submitted successfully! Email with all responses sent to MDai correction center</span>
            `;

            const assignmentCard =
              document.querySelector("#assignments .card");
            assignmentCard.insertBefore(alertDiv, assignmentCard.firstChild);

            // Remove success message after 10 seconds
            setTimeout(() => {
              alertDiv.remove();
            }, 10000);
          } else {
            submitBtn.innerHTML =
              '<i class="fas fa-exclamation-triangle"></i> Submission Failed';
            submitBtn.classList.remove("btn-primary");
            submitBtn.classList.add("btn-warning");
            submitBtn.disabled = false;
          }
        } catch (error) {
          console.error("Assignment submission error:", error);
          submitBtn.innerHTML = originalContent;
          submitBtn.classList.remove("btn-primary");
          submitBtn.classList.add("btn-danger");
          submitBtn.disabled = false;
        }
      }

      async function submitQuiz() {
        if (!studentInfo.name) {
          showEmailStatus(
            "Please validate your student information first!",
            "error"
          );
          return;
        }

        const answers = [];
        const questions = document.querySelectorAll(".question");

        questions.forEach((question, index) => {
          const questionText = question.querySelector("h3").textContent;
          const selectedOption = question.querySelector(
            'input[type="radio"]:checked'
          );
          const textAnswer = question.querySelector("textarea");
          const fillblankInputs =
            question.querySelectorAll('input[type="text"]');

          if (selectedOption) {
            const optionLabel = document.querySelector(
              `label[for="${selectedOption.id}"]`
            ).textContent;
            answers.push(
              `${questionText}\nAnswer: ${selectedOption.value}) ${optionLabel}`
            );
          } else if (fillblankInputs.length > 0) {
            // Handle fill-in-the-blank questions
            const fillAnswers = Array.from(fillblankInputs)
              .map(
                (input, i) =>
                  `Blank ${i + 1}: ${input.value.trim() || "[No answer]"}`
              )
              .join(", ");
            answers.push(`${questionText}\nAnswers: ${fillAnswers}`);
          } else if (textAnswer && textAnswer.value.trim()) {
            answers.push(`${questionText}\nAnswer: ${textAnswer.value.trim()}`);
          } else {
            answers.push(`${questionText}\nAnswer: [No answer provided]`);
          }
        });

        if (
          answers.filter((answer) => !answer.includes("[No answer provided]"))
            .length === 0
        ) {
          showEmailStatus("Please answer at least one question.", "error");
          return;
        }

        const submitBtn = event.target;
        const originalContent = submitBtn.innerHTML;
        submitBtn.innerHTML =
          '<i class="fas fa-spinner fa-spin"></i> Processing Quiz...';
        submitBtn.disabled = true;

        // Prepare quiz email content
        const subject = `Quiz Submission - ${studentInfo.examAssignment}`;
        const content = `
 QUIZ SUBMISSION DETAILS

 Student Information:
 Name: ${studentInfo.name}
 Email: ${studentInfo.studentEmail}
 Course: ${studentInfo.course}
 Student ID: ${studentInfo.studentId}
 Quiz/Exam: ${studentInfo.examAssignment}

 Quiz Answers (${
          answers.filter((answer) => !answer.includes("[No answer provided]"))
            .length
        }/${answers.length} answered):

${answers
  .map((answer, index) => `\n${index + 1}. ${answer}\n${"".repeat(50)}`)
  .join("\n")}

 Summary:
 Total Questions: ${answers.length}
 Answered Questions: ${
          answers.filter((answer) => !answer.includes("[No answer provided]"))
            .length
        }
 Completion Rate: ${Math.round(
          (answers.filter((answer) => !answer.includes("[No answer provided]"))
            .length /
            answers.length) *
            100
        )}%

 Submission Time: ${new Date().toLocaleString()}
 Platform: InterroPlatform - Advanced Assessment System

 This is an automated notification from the InterroPlatform assessment system.
        `;

        try {
          const emailSent = await sendEmailNotification(subject, content);

          if (emailSent) {
            submitBtn.innerHTML =
              '<i class="fas fa-check"></i> Quiz Successfully Submitted!';
            submitBtn.classList.remove("btn-success");
            submitBtn.classList.add("btn-success");

            // Show success message
            const alertDiv = document.createElement("div");
            alertDiv.className = "alert alert-success";
            alertDiv.innerHTML = `
              <i class="fas fa-check-circle"></i>
              <span>Quiz submitted successfully! ${
                answers.filter(
                  (answer) => !answer.includes("[No answer provided]")
                ).length
              }/${
              answers.length
            } questions answered. All responses sent to MDai correction center</span>
            `;

            const quizCard = document.querySelector("#quiz .card");
            quizCard.insertBefore(
              alertDiv,
              quizCard.querySelector(".quiz-container")
            );

            // Disable all form elements
            document
              .querySelectorAll("#quiz input, #quiz textarea")
              .forEach((element) => {
                element.disabled = true;
              });

            // Remove success message after 10 seconds
            setTimeout(() => {
              alertDiv.remove();
            }, 10000);
          } else {
            submitBtn.innerHTML =
              '<i class="fas fa-exclamation-triangle"></i> Quiz Submission Failed';
            submitBtn.classList.remove("btn-success");
            submitBtn.classList.add("btn-warning");
            submitBtn.disabled = false;
          }
        } catch (error) {
          console.error("Quiz submission error:", error);
          submitBtn.innerHTML = originalContent;
          submitBtn.classList.remove("btn-success");
          submitBtn.classList.add("btn-danger");
          submitBtn.disabled = false;
        }
      }

      function saveProgress() {
        alert("Progress saved successfully!");
      }

      function generateReport() {
        alert("Generating comprehensive assessment report...");
      }

      function exportData() {
        alert("Exporting data in CSV format...");
      }

      function loadMedia(input) {
        const file = input.files[0];
        if (!file) return;

        const url = URL.createObjectURL(file);
        const fileType = file.type;

        if (fileType.includes("video")) {
          document.getElementById("video-player").src = url;
          document.getElementById("video-player").style.display = "block";
        } else if (fileType.includes("audio")) {
          document.getElementById("audio-player").src = url;
        } else if (fileType.includes("pdf")) {
          document.getElementById("pdf-viewer").src = url;
        }
      }

      // Real-time participant updates
      function updateParticipants() {
        // Simulate real-time participant updates
        const participants = document.querySelectorAll(".participant");
        participants.forEach((participant) => {
          // Random activity simulation
          if (Math.random() > 0.8) {
            participant.style.background = "rgba(255, 193, 7, 0.1)";
            setTimeout(() => {
              participant.style.background = "rgba(76, 175, 80, 0.1)";
            }, 1000);
          }
        });
      }

      // Update participants every 5 seconds
      setInterval(updateParticipants, 5000);

      // Initialize the platform
      document.addEventListener("DOMContentLoaded", () => {
        console.log("InterroPlatform initialized successfully!");

        // Add some example notifications
        setTimeout(() => {
          const alert = document.createElement("div");
          alert.className = "alert alert-success";
          alert.innerHTML =
            '<i class="fas fa-check-circle"></i> <span>Platform connected successfully! Real-time features are active with AI-powered assessment tools.</span>';
          document
            .querySelector(".container")
            .insertBefore(alert, document.querySelector(".navigation"));

          setTimeout(() => {
            alert.remove();
          }, 5000);
        }, 4000);
      });

      /*
      ========================================
       EMAILJS SETUP INSTRUCTIONS
      ========================================
      
      To enable automatic email sending to MDai correction center:
      
      1. Go to https://www.emailjs.com/ and create a free account
      2. Create a new email service (Gmail, Outlook, etc.)
      3. Create an email template with these variables:
         - {{student_name}}
         - {{student_email}}
         - {{course_name}} 
         - {{exam_assignment_name}}
         - {{student_id}}
         - {{subject}}
         - {{content}}
         - {{submission_time}}
         - {{platform_name}}
         
      4. Replace the following in the code above:
         - 'YOUR_PUBLIC_KEY' with your EmailJS public key
         - 'YOUR_SERVICE_ID' with your EmailJS service ID  
         - 'YOUR_TEMPLATE_ID' with your EmailJS template ID
         
      5. Email template example:
         Subject: {{subject}}
         
         Dear MDai Correction Center,
         
         Student: {{student_name}} ({{student_email}})
         Course: {{course_name}}
         
         {{content}}
         
         Best regards,
        // Data sharing functionality for EmailJS integration
      function shareDataWithEmailJS() {
        try {
          // Store current data in localStorage for emailjs.html to access
          if (studentInfo.name) {
            localStorage.setItem('studentInfo', JSON.stringify(studentInfo));
            sessionStorage.setItem('currentStudentInfo', JSON.stringify(studentInfo));
          }

          // Store quiz answers if available
          const currentQuizAnswers = collectCurrentQuizAnswers();
          if (Object.keys(currentQuizAnswers).length > 0) {
            localStorage.setItem('quizAnswers', JSON.stringify(currentQuizAnswers));
            sessionStorage.setItem('currentQuizAnswers', JSON.stringify(currentQuizAnswers));
          }

          // Store assignment content if available
          const assignmentTextarea = document.getElementById('assignmentContent');
          if (assignmentTextarea && assignmentTextarea.value) {
            localStorage.setItem('assignmentContent', assignmentTextarea.value);
          }

          // Store session tracking data
          sessionStorage.setItem('sessionStart', sessionStorage.getItem('sessionStart') || Date.now().toString());
          
          // Send data to emailjs.html via postMessage (if it's open)
          window.postMessage({
            type: 'INTERRO_DATA_UPDATE',
            studentInfo: studentInfo,
            quizAnswers: currentQuizAnswers,
            assignmentContent: assignmentTextarea ? assignmentTextarea.value : '',
            sessionData: {
              clickCount: sessionStorage.getItem('clickCount') || '0',
              keyPressCount: sessionStorage.getItem('keyPressCount') || '0',
              sessionStart: sessionStorage.getItem('sessionStart')
            }
          }, '*');

          console.log('Data shared with EmailJS integration');
        } catch (error) {
          console.error('Error sharing data with EmailJS:', error);
        }
      }

      function collectCurrentQuizAnswers() {
        const quizAnswers = {};
        const questions = document.querySelectorAll('.quiz-question');
        questions.forEach((question, index) => {
          const questionText = question.querySelector('h4')?.textContent || `Question ${index + 1}`;
          const selectedAnswer = question.querySelector('input[type="radio"]:checked');
          const allOptions = Array.from(question.querySelectorAll('input[type="radio"]')).map(input => input.value);
          
          quizAnswers[`question_${index + 1}`] = {
            question: questionText,
            answer: selectedAnswer ? selectedAnswer.value : 'Not answered',
            options: allOptions
          };
        });
        return quizAnswers;
      }

      // Listen for data requests from emailjs.html
      window.addEventListener('message', function(event) {
        if (event.data.type === 'REQUEST_INTERRO_DATA') {
          console.log('EmailJS requesting data, sending current data...');
          shareDataWithEmailJS();
        }
      });

      // Auto-share data whenever student info changes
      function updateStudentInfo() {
        // Existing updateStudentInfo logic...
        // Add data sharing at the end
        setTimeout(shareDataWithEmailJS, 100);
      }

      // Share data periodically and on key events
      setInterval(shareDataWithEmailJS, 10000); // Every 10 seconds

      // Share data when student info form changes
      document.addEventListener('change', function(event) {
        if (event.target.closest('#studentForm')) {
          setTimeout(shareDataWithEmailJS, 500);
        }
      });

      // Share data when quiz answers change
      document.addEventListener('change', function(event) {
        if (event.target.type === 'radio') {
          setTimeout(shareDataWithEmailJS, 100);
        }
      });

      // Share data when assignment content changes
      document.addEventListener('input', function(event) {
        if (event.target.id === 'assignmentContent') {
          setTimeout(shareDataWithEmailJS, 1000); // Debounce for text input
        }
      });

      // Test email functionality
      async function sendTestEmail() {
        if (!emailConfig.isConfigured) {
          showEmailStatus('Please configure EmailJS settings first!', 'error');
          return;
        }

        if (!studentInfo.name) {
          showEmailStatus('Please validate your student information first!', 'error');
          return;
        }

        const subject = ` Test Email - ${studentInfo.examAssignment || 'InterroPlatform Test'}`;
        const content = `This is a comprehensive test email from InterroPlatform containing all current data and analytics.`;
        
        const success = await sendEmailNotification(subject, content);
        
        if (success) {
          console.log('Test email sent successfully');
        }
      }

      // Preview email data functionality
      function previewEmailData() {
        try {
          if (!studentInfo.name) {
            showEmailStatus('Please validate your student information first!', 'error');
            return;
          }

          const comprehensiveData = collectComprehensiveFormData();
          const subject = ` Preview - ${studentInfo.examAssignment || 'InterroPlatform Data'}`;
          const content = `This is a preview of the comprehensive data that will be sent.`;
          const emailContent = createDetailedEmailContent(subject, content, comprehensiveData);
          
          document.getElementById('emailPreviewContent').textContent = emailContent;
          document.getElementById('emailPreviewModal').style.display = 'block';
          
        } catch (error) {
          console.error('Error generating email preview:', error);
          showEmailStatus('Error generating email preview. Please try again.', 'error');
        }
      }

      // Close email preview modal
      function closeEmailPreview() {
        document.getElementById('emailPreviewModal').style.display = 'none';
      }

      // Close modal when clicking outside
      document.addEventListener('click', function(event) {
        const modal = document.getElementById('emailPreviewModal');
        if (event.target === modal) {
          closeEmailPreview();
        }
      });

      // ESC key to close modal
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
          closeEmailPreview();
        }
      });

      /*
      ========================================
       DIRECT EMAIL INTEGRATION FEATURES:
      ========================================
      
       Complete EmailJS Configuration Interface
       Comprehensive Data Collection & Analysis
       Real-time Email Preview Functionality
       Test Email with Full Analytics
       Performance Metrics & Interaction Tracking
       Technical Diagnostics & Browser Information
       Quiz & Assignment Detailed Analysis
       Professional Email Formatting
       Error Handling & Status Notifications
       Persistent Configuration Storage
      
      ========================================
       EMAIL INTEGRATION FEATURES:
      ========================================
      
       Real-time Data Sharing with EmailJS
       LocalStorage and SessionStorage Integration
       PostMessage Communication
       Auto-sync with EmailJS Integration Center
       Comprehensive Data Collection
       Cross-Window Communication
      
      ========================================
       {{platform_name}}
      
      ========================================
       FEATURES IMPLEMENTED:
      ========================================
      
       Student Information Form (Name, Email, Course, Exam/Assignment Name, Student ID)
       Automatic Email Notifications to MDai correction center
       Student Email Collection and Validation
       Assignment Submission with All Student Data
       Quiz Submission with Complete Student Information
       Real-time Email Status Notifications
       Professional Email Formatting
       Error Handling and Validation
       5-Second Loading Animations
       Modern, Advanced UI Design
       Responsive Mobile-Friendly Layout
       Real-time Progress Tracking
      
      ========================================
      */
    </script>
  </body>
</html>
