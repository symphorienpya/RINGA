<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InterroPlatform - Advanced Assessment System</title>
    <link rel="icon" type="image/png" href="images/AI.png" />
    <link rel="shortcut icon" type="image/png" href="images/AI.png" />
    <link rel="apple-touch-icon" href="images/AI.png" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <!-- EmailJS CDN -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-color: #6366f1;
        --primary-dark: #4f46e5;
        --secondary-color: #8b5cf6;
        --success-color: #10b981;
        --warning-color: #f59e0b;
        --error-color: #ef4444;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --border-color: #e5e7eb;
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        --radius-sm: 0.375rem;
        --radius-md: 0.5rem;
        --radius-lg: 0.75rem;
        --radius-xl: 1rem;
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #6366f1 100%
        );
        min-height: 100vh;
        line-height: 1.6;
        color: var(--text-primary);
        animation: gradientShift 10s ease-in-out infinite;
        background-size: 200% 200%;
      }

      @keyframes gradientShift {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      .animated-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
      }

      .floating-shapes {
        position: absolute;
        width: 100%;
        height: 100%;
      }

      .shape {
        position: absolute;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        animation: float 6s ease-in-out infinite;
      }

      .shape:nth-child(1) {
        width: 80px;
        height: 80px;
        top: 20%;
        left: 10%;
        animation-delay: 0s;
      }

      .shape:nth-child(2) {
        width: 60px;
        height: 60px;
        top: 60%;
        right: 20%;
        animation-delay: 2s;
      }

      .shape:nth-child(3) {
        width: 100px;
        height: 100px;
        bottom: 20%;
        left: 20%;
        animation-delay: 4s;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(180deg);
        }
      }

      .container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-xl);
        margin: 2rem auto;
        padding: 3rem;
        max-width: 1200px;
        animation: slideInUp 0.8s ease-out;
        position: relative;
        overflow: hidden;
      }

      .container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      }

      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .header {
        text-align: center;
        margin-bottom: 3rem;
        animation: fadeInDown 1s ease-out 0.3s both;
      }

      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .logo {
        width: 80px;
        height: 80px;
        margin: 0 auto 1.5rem;
        border-radius: 50%;
        overflow: hidden;
        box-shadow: var(--shadow-lg);
        animation: pulse 2s ease-in-out infinite;
        position: relative;
      }

      .logo::before {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        border-radius: 50%;
        z-index: -1;
        animation: rotate 3s linear infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .logo img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
      }

      .header h1 {
        color: var(--text-primary);
        font-weight: 800;
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
        font-weight: 500;
      }

      .form-section {
        animation: slideInLeft 0.8s ease-out 0.5s both;
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .form-group {
        margin-bottom: 2rem;
        animation: fadeInUp 0.6s ease-out both;
      }

      .form-group:nth-child(odd) {
        animation-delay: 0.1s;
      }
      .form-group:nth-child(even) {
        animation-delay: 0.2s;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      label {
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.95rem;
      }

      label i {
        color: var(--primary-color);
        font-size: 1.1rem;
      }

      select,
      input[type="text"],
      input[type="email"],
      textarea {
        width: 100%;
        padding: 1rem 1.25rem;
        border: 2px solid var(--border-color);
        border-radius: var(--radius-lg);
        font-size: 1rem;
        font-family: inherit;
        transition: var(--transition);
        background: var(--bg-primary);
        color: var(--text-primary);
      }

      select:focus,
      input:focus,
      textarea:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        transform: translateY(-1px);
      }

      select:hover,
      input:hover,
      textarea:hover {
        border-color: var(--primary-dark);
        transform: translateY(-1px);
      }

      .status-message {
        padding: 1.25rem 1.5rem;
        border-radius: var(--radius-lg);
        margin: 1.5rem 0;
        display: none;
        font-weight: 500;
        font-size: 0.95rem;
        animation: slideInRight 0.5s ease-out;
        position: relative;
        overflow: hidden;
      }

      .status-message::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: currentColor;
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .status-message.success {
        background: linear-gradient(
          135deg,
          rgba(16, 185, 129, 0.1),
          rgba(16, 185, 129, 0.05)
        );
        color: var(--success-color);
        border: 1px solid rgba(16, 185, 129, 0.2);
      }

      .status-message.info {
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.1),
          rgba(99, 102, 241, 0.05)
        );
        color: var(--primary-color);
        border: 1px solid rgba(99, 102, 241, 0.2);
      }

      .status-message.loading {
        background: linear-gradient(
          135deg,
          rgba(245, 158, 11, 0.1),
          rgba(245, 158, 11, 0.05)
        );
        color: var(--warning-color);
        border: 1px solid rgba(245, 158, 11, 0.2);
      }

      .questions-container {
        margin-top: 2rem;
        animation: fadeIn 0.8s ease-out 0.7s both;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .question-item {
        background: var(--bg-primary);
        border: 2px solid var(--border-color);
        border-radius: var(--radius-xl);
        padding: 2rem;
        margin: 1.5rem 0;
        box-shadow: var(--shadow-md);
        transition: var(--transition);
        animation: scaleIn 0.5s ease-out both;
        position: relative;
        overflow: hidden;
      }

      .question-item::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        transform: scaleX(0);
        transition: transform 0.3s ease;
      }

      .question-item:hover {
        border-color: var(--primary-color);
        transform: translateY(-4px);
        box-shadow: var(--shadow-xl);
      }

      .question-item:hover::before {
        transform: scaleX(1);
      }

      @keyframes scaleIn {
        from {
          opacity: 0;
          transform: scale(0.9);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .question-header {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        margin-bottom: 1.5rem;
        padding-bottom: 1.5rem;
        border-bottom: 2px solid var(--bg-secondary);
      }

      .question-number {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--primary-dark)
        );
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 1.2rem;
        box-shadow: var(--shadow-md);
        animation: bounce 2s ease-in-out infinite;
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      .question-text {
        flex: 1;
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--text-primary);
        line-height: 1.5;
      }

      .question-type {
        background: linear-gradient(135deg, var(--secondary-color), #a855f7);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 2rem;
        font-size: 0.85rem;
        font-weight: 600;
        box-shadow: var(--shadow-sm);
      }

      .option-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1.25rem 1.5rem;
        border: 2px solid var(--border-color);
        border-radius: var(--radius-lg);
        margin: 0.75rem 0;
        cursor: pointer;
        transition: var(--transition);
        background: var(--bg-secondary);
        font-size: 1rem;
        font-weight: 500;
      }

      .option-item:hover {
        border-color: var(--primary-color);
        background: rgba(99, 102, 241, 0.05);
        transform: translateX(8px);
      }

      .option-item.selected {
        border-color: var(--primary-color);
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.1),
          rgba(99, 102, 241, 0.05)
        );
        transform: translateX(8px);
      }

      .option-input {
        width: 22px;
        height: 22px;
        accent-color: var(--primary-color);
        transform: scale(1.2);
      }

      textarea {
        min-height: 150px;
        resize: vertical;
        font-family: inherit;
        line-height: 1.6;
      }

      .submit-section {
        margin-top: 3rem;
        text-align: center;
        padding: 2.5rem;
        background: linear-gradient(
          135deg,
          var(--bg-secondary),
          var(--bg-primary)
        );
        border-radius: var(--radius-xl);
        border: 2px dashed var(--border-color);
        animation: fadeInUp 0.8s ease-out 1s both;
      }

      .submit-section h3 {
        color: var(--text-primary);
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 0.75rem;
      }

      .submit-section p {
        color: var(--text-secondary);
        font-size: 1rem;
        margin-bottom: 2rem;
      }

      .btn-submit {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--primary-dark)
        );
        color: white;
        border: none;
        padding: 1.25rem 3rem;
        border-radius: 3rem;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        box-shadow: var(--shadow-lg);
        position: relative;
        overflow: hidden;
      }

      .btn-submit::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .btn-submit:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-xl);
      }

      .btn-submit:hover::before {
        left: 100%;
      }

      .btn-submit:active {
        transform: translateY(-1px);
      }

      .timer {
        position: fixed;
        top: 2rem;
        right: 2rem;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 1rem 1.5rem;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-lg);
        font-weight: 600;
        color: var(--text-primary);
        border: 1px solid rgba(255, 255, 255, 0.2);
        animation: slideInDown 0.5s ease-out 1.5s both;
      }

      @keyframes slideInDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Loading spinner */
      .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid currentColor;
        border-radius: 50%;
        border-top-color: transparent;
        animation: spin 1s linear infinite;
        margin-right: 0.5rem;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .container {
          margin: 1rem;
          padding: 2rem 1.5rem;
        }

        .header h1 {
          font-size: 2rem;
        }

        .timer {
          position: relative;
          top: auto;
          right: auto;
          margin-bottom: 1rem;
          display: inline-block;
        }

        .question-header {
          flex-direction: column;
          gap: 1rem;
          text-align: center;
        }

        .question-number {
          margin: 0 auto;
        }
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        :root {
          --text-primary: #f9fafb;
          --text-secondary: #d1d5db;
          --bg-primary: #1f2937;
          --bg-secondary: #374151;
          --border-color: #4b5563;
        }

        .container {
          background: rgba(31, 41, 55, 0.95);
        }
      }

      /* Auto-correction styles */
      .correction-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .correction-overlay.show {
        opacity: 1;
      }

      .correction-content {
        background: white;
        border-radius: 20px;
        padding: 40px;
        max-width: 90%;
        max-height: 90%;
        overflow-y: auto;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        transform: scale(0.8);
        transition: transform 0.5s ease;
      }

      .correction-overlay.show .correction-content {
        transform: scale(1);
      }

      .correction-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .correction-title {
        font-size: 2.5em;
        color: #2563eb;
        margin-bottom: 10px;
        font-weight: 800;
      }

      .correction-subtitle {
        font-size: 1.2em;
        color: #6b7280;
        margin-bottom: 20px;
      }

      .correction-progress {
        width: 100%;
        height: 8px;
        background: #e5e7eb;
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 30px;
      }

      .correction-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #3b82f6, #1d4ed8);
        width: 0%;
        transition: width 0.3s ease;
      }

      .correction-item {
        margin-bottom: 25px;
        padding: 20px;
        background: #f8fafc;
        border-radius: 12px;
        border-left: 4px solid #e5e7eb;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.5s ease;
      }

      .correction-item.show {
        opacity: 1;
        transform: translateY(0);
      }

      .correction-item.correct {
        border-left-color: #10b981;
        background: #ecfdf5;
      }

      .correction-item.incorrect {
        border-left-color: #ef4444;
        background: #fef2f2;
      }

      .correction-item.partial {
        border-left-color: #f59e0b;
        background: #fffbeb;
      }

      .question-review {
        font-weight: 600;
        margin-bottom: 10px;
        color: #374151;
      }

      .answer-comparison {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-top: 10px;
      }

      .your-answer,
      .correct-answer {
        padding: 10px;
        border-radius: 8px;
        font-size: 0.9em;
      }

      .your-answer {
        background: #fee2e2;
        border: 1px solid #fca5a5;
      }

      .correct-answer {
        background: #d1fae5;
        border: 1px solid #6ee7b7;
      }

      .correction-item.correct .your-answer {
        background: #d1fae5;
        border: 1px solid #6ee7b7;
      }

      .score-summary {
        text-align: center;
        margin: 30px 0;
        padding: 25px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px;
      }

      .score-circle {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: white;
        color: #667eea;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        font-size: 2em;
        font-weight: bold;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .warning-message {
        background: #fef3c7;
        border: 2px solid #f59e0b;
        color: #92400e;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        margin: 20px 0;
        font-weight: 600;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
      }

      .download-section {
        text-align: center;
        margin-top: 30px;
        padding: 25px;
        background: #f0f9ff;
        border-radius: 15px;
        border: 2px solid #0ea5e9;
      }

      .btn-download {
        background: linear-gradient(135deg, #0ea5e9, #0284c7);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 25px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3);
        margin: 10px;
      }

      .btn-download:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(14, 165, 233, 0.4);
      }

      .countdown-timer {
        font-size: 1.5em;
        font-weight: bold;
        color: #ef4444;
        margin: 15px 0;
      }
    </style>
  </head>
  <body>
    <!-- Animated Background -->
    <div class="animated-bg">
      <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
      </div>
    </div>

    <div class="timer" id="timer">⏱️ 00:00:00</div>

    <div class="container">
      <div class="header">
        <div class="logo">
          <img src="images/AI.png" alt="InterroPlatform Logo" />
        </div>
        <h1>InterroPlatform</h1>
        <p>Advanced AI-Powered Assessment System</p>
      </div>

      <div class="form-section">
        <form id="assessment-form">
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="student-name"
                  ><i class="fas fa-user"></i> Student Name:</label
                >
                <input
                  type="text"
                  id="student-name"
                  name="student-name"
                  required
                  placeholder="Enter your full name"
                />
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="student-email"
                  ><i class="fas fa-envelope"></i> Email:</label
                >
                <input
                  type="email"
                  id="student-email"
                  name="student-email"
                  required
                  placeholder="Enter your email"
                />
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="course-name"
                  ><i class="fas fa-book"></i> Course:</label
                >
                <select id="course-name" name="course-name" required>
                  <option value="">📚 Select your course</option>
                  <option value="English 1">📖 English 1</option>
                  <option value="English 2">📖 English 2</option>
                  <option value="English 3">📖 English 3</option>
                  <option value="Web Development">💻 Web Development</option>
                  <option value="Introduction to Python programming">
                    🐍 Introduction to Python programming
                  </option>
                  <option value="C programming">⚡ C programming</option>
                  <option value="Excel">📊 Excel</option>
                  <option value="Photoshop">🎨 Photoshop</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="exam-assignment-name"
                  ><i class="fas fa-clipboard-list"></i> Assessment Type:</label
                >
                <select
                  id="exam-assignment-name"
                  name="exam-assignment-name"
                  required
                >
                  <option value="">📝 Select course first</option>
                </select>
              </div>
            </div>
          </div>

          <div id="status-message" class="status-message"></div>

          <div id="questions-container" class="questions-container"></div>

          <div id="submit-section" class="submit-section" style="display: none">
            <h3><i class="fas fa-check-circle"></i> Ready to Submit?</h3>
            <p>Review your answers and submit when ready.</p>
            <button type="submit" class="btn-submit">
              <i class="fas fa-paper-plane"></i> Submit Assessment
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <!-- jsPDF for generating PDF reports -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
      // Initialize the application
      console.log("🚀 InterroPlatform Loading...");

      // EmailJS Configuration - Replace with your actual credentials
      const EMAILJS_CONFIG = {
        publicKey: "YOUR_PUBLIC_KEY", // Replace with your EmailJS public key
        serviceId: "YOUR_SERVICE_ID", // Replace with your EmailJS service ID
        templateId: "YOUR_TEMPLATE_ID", // Replace with your EmailJS template ID
        recipientEmail: "symphorienpyana065@gmail.com", // Your email to receive submissions
      };

      // Initialize EmailJS
      emailjs.init(EMAILJS_CONFIG.publicKey);

      // Timer functionality
      let startTime = Date.now();
      let timerInterval = setInterval(updateTimer, 1000);

      function updateTimer() {
        const elapsed = Date.now() - startTime;
        const hours = Math.floor(elapsed / 3600000);
        const minutes = Math.floor((elapsed % 3600000) / 60000);
        const seconds = Math.floor((elapsed % 60000) / 1000);

        document.getElementById("timer").innerHTML = `⏱️ ${hours
          .toString()
          .padStart(2, "0")}:${minutes.toString().padStart(2, "0")}:${seconds
          .toString()
          .padStart(2, "0")}`;
      }

      // DOM elements
      const courseSelect = document.getElementById("course-name");
      const assessmentSelect = document.getElementById("exam-assignment-name");
      const statusMessage = document.getElementById("status-message");
      const questionsContainer = document.getElementById("questions-container");
      const submitSection = document.getElementById("submit-section");

      // Comprehensive question database for English courses
      const sampleQuestions = {
        "English 1": {
          "Assignment 1": [
            {
              question:
                "Choose the correct greeting when you meet someone at 2 PM:",
              type: "multiple",
              options: [
                "Good morning",
                "Good afternoon",
                "Good evening",
                "Good night",
              ],
            },
            {
              question: "Fill in the alphabet: A, B, C, _____, E",
              type: "multiple",
              options: ["D", "F", "G", "H"],
            },
            {
              question: "Complete: My _____ is Sarah. (talking about yourself)",
              type: "multiple",
              options: ["name", "names", "naming", "named"],
            },
            {
              question:
                "Choose the correct number: How many fingers do you have?",
              type: "multiple",
              options: ["nine", "ten", "eleven", "twelve"],
            },
            {
              question:
                "Write 3 sentences about your family using simple words (My father is..., My mother likes..., I have...).",
              type: "text",
              placeholder:
                "Write simple sentences about your family members...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Fill in the days of the week: Monday, Tuesday, _____, Thursday",
              type: "multiple",
              options: ["Wednesday", "Friday", "Saturday", "Sunday"],
            },
            {
              question: "Choose what you wear on your feet:",
              type: "multiple",
              options: ["hat", "shirt", "shoes", "pants"],
            },
            {
              question:
                "Complete the sentence: I _____ pizza. (expressing likes)",
              type: "multiple",
              options: ["like", "likes", "liking", "liked"],
            },
            {
              question: "Fill in the animal sound: A dog says _____.",
              type: "multiple",
              options: ["meow", "moo", "woof", "chirp"],
            },
            {
              question:
                "Write a short message to a friend about meeting for coffee (use simple English).",
              type: "text",
              placeholder:
                "Write: Hi [friend name], Let's meet for coffee at... See you...",
            },
          ],
          Examen: [
            {
              question:
                "Fill in the blank with the correct article: I have _____ apple and _____ banana.",
              type: "multiple",
              options: ["a, a", "an, a", "a, an", "an, an"],
            },
            {
              question:
                "Choose the correct greeting: When you meet someone in the morning, you say:",
              type: "multiple",
              options: [
                "Good night",
                "Good morning",
                "Good afternoon",
                "Good evening",
              ],
            },
            {
              question: "Complete the sentence: My family _____ five people.",
              type: "multiple",
              options: ["have", "has", "are", "is"],
            },
            {
              question: "Fill in the plural form: One cat, two _____.",
              type: "multiple",
              options: ["cats", "cat", "cates", "catses"],
            },
            {
              question: "Choose the correct color: The sun is _____.",
              type: "multiple",
              options: ["blue", "green", "yellow", "purple"],
            },
            {
              question: "Complete: Today is Monday. Tomorrow is _____.",
              type: "multiple",
              options: ["Sunday", "Tuesday", "Wednesday", "Thursday"],
            },
            {
              question:
                "Fill in the correct verb: I _____ breakfast at 7 o'clock every day.",
              type: "multiple",
              options: ["eat", "eats", "eating", "ate"],
            },
            {
              question: "Choose the correct pronoun: _____ name is John.",
              type: "multiple",
              options: ["Me", "My", "I", "Mine"],
            },
            {
              question: "Complete the question: _____ old are you?",
              type: "multiple",
              options: ["What", "Where", "How", "When"],
            },
            {
              question: "Fill in the preposition: The book is _____ the table.",
              type: "multiple",
              options: ["in", "on", "at", "under"],
            },
            {
              question:
                "Choose the correct time expression: I go to school _____ the morning.",
              type: "multiple",
              options: ["in", "on", "at", "by"],
            },
            {
              question:
                "Complete the sentence: There _____ three dogs in the park.",
              type: "multiple",
              options: ["is", "are", "am", "be"],
            },
            {
              question:
                "Fill in the correct adjective: The weather is very _____ today.",
              type: "multiple",
              options: ["hot", "hots", "hotly", "heating"],
            },
            {
              question: "Choose the correct body part: I use my _____ to see.",
              type: "multiple",
              options: ["ears", "nose", "eyes", "mouth"],
            },
            {
              question:
                "Complete the food sentence: I like to eat _____ for lunch.",
              type: "multiple",
              options: ["sandwich", "sandwichs", "sandwiches", "sandwichies"],
            },
            {
              question:
                "Write a simple introduction about yourself (name, age, where you live).",
              type: "text",
              placeholder:
                "Use simple sentences: My name is... I am ... years old. I live in...",
            },
            {
              question: "Fill in the transportation: I go to work by _____.",
              type: "multiple",
              options: ["car", "cars", "a cars", "the cars"],
            },
            {
              question:
                "Choose the correct polite expression: When someone helps you, you say:",
              type: "multiple",
              options: ["Sorry", "Thank you", "Excuse me", "Please"],
            },
            {
              question:
                "Complete the weather sentence: When it rains, I use an _____.",
              type: "multiple",
              options: ["umbrella", "coat", "hat", "shoes"],
            },
            {
              question:
                "Describe your daily routine using 5 simple sentences (wake up, eat, work/study, etc.).",
              type: "text",
              placeholder:
                "Write about what you do every day using simple present tense...",
            },
          ],
        },
        "English 2": {
          "Assignment 1": [
            {
              question:
                "Choose the correct tense: I _____ in Paris for three years. (still living there)",
              type: "multiple",
              options: ["lived", "have lived", "live", "was living"],
            },
            {
              question:
                "Complete with the correct modal verb: You _____ wear a helmet when riding a bike.",
              type: "multiple",
              options: ["can", "should", "might", "would"],
            },
            {
              question:
                "Fill in the comparative: This book is _____ than the movie.",
              type: "multiple",
              options: [
                "more interesting",
                "most interesting",
                "interestinger",
                "interesting",
              ],
            },
            {
              question:
                "Choose the correct phrasal verb: I need to _____ this information before the meeting.",
              type: "multiple",
              options: ["look up", "look after", "look for", "look into"],
            },
            {
              question:
                "Write an email to your boss explaining why you will be late for work tomorrow (use formal language and proper email structure).",
              type: "text",
              placeholder:
                "Subject: Late arrival tomorrow\nDear [Boss name],\nI am writing to inform you that...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Complete the reported speech: She said, 'I am tired.' → She said that she _____ tired.",
              type: "multiple",
              options: ["is", "was", "has been", "had been"],
            },
            {
              question:
                "Choose the correct question tag: You haven't finished your homework, _____?",
              type: "multiple",
              options: ["have you", "haven't you", "did you", "didn't you"],
            },
            {
              question:
                "Fill in with gerund or infinitive: I enjoy _____ books in my free time.",
              type: "multiple",
              options: ["reading", "to read", "read", "reads"],
            },
            {
              question:
                "Choose the correct linking word: I studied hard; _____, I failed the exam.",
              type: "multiple",
              options: ["therefore", "however", "moreover", "furthermore"],
            },
            {
              question:
                "Write a descriptive paragraph about your ideal vacation destination (include specific details about location, activities, and why you want to go there).",
              type: "text",
              placeholder:
                "My ideal vacation destination would be... The reason I want to visit this place is...",
            },
          ],
          Examen: [
            {
              question:
                "Choose the correct tense: I _____ my homework when you called yesterday.",
              type: "multiple",
              options: ["did", "was doing", "have done", "had done"],
            },
            {
              question:
                "Complete the conditional: If I _____ you, I would take that job offer.",
              type: "multiple",
              options: ["am", "was", "were", "will be"],
            },
            {
              question:
                "Fill in the passive voice: The letter _____ by the secretary yesterday.",
              type: "multiple",
              options: ["wrote", "was written", "has written", "writes"],
            },
            {
              question:
                "Choose the correct relative clause: The woman _____ car was stolen called the police.",
              type: "multiple",
              options: ["who", "whose", "which", "that"],
            },
            {
              question:
                "Complete with the correct modal: You _____ have told me about the meeting earlier.",
              type: "multiple",
              options: ["should", "could", "might", "would"],
            },
            {
              question:
                "Fill in the superlative: This is the _____ movie I have ever seen.",
              type: "multiple",
              options: ["better", "best", "good", "more good"],
            },
            {
              question:
                "Choose the correct future form: This time tomorrow, I _____ on the beach.",
              type: "multiple",
              options: ["will lie", "will be lying", "am lying", "lie"],
            },
            {
              question:
                "Write your opinion about working from home vs. working in an office (include advantages and disadvantages of both).",
              type: "text",
              placeholder:
                "In my opinion, working from home has several advantages... However, working in an office also offers...",
            },
            {
              question:
                "Complete the phrasal verb: Can you _____ this problem for me?",
              type: "multiple",
              options: ["work out", "work up", "work on", "work off"],
            },
            {
              question:
                "Fill in reported speech: 'I will help you tomorrow,' he said. → He said he _____ me the next day.",
              type: "multiple",
              options: ["will help", "would help", "helps", "helped"],
            },
            {
              question: "Choose the correct idiom meaning 'very expensive':",
              type: "multiple",
              options: [
                "costs an arm and a leg",
                "piece of cake",
                "break a leg",
                "hit the books",
              ],
            },
            {
              question:
                "Complete with gerund/infinitive: I remember _____ him at the party last week.",
              type: "multiple",
              options: ["meeting", "to meet", "meet", "met"],
            },
            {
              question:
                "Fill in the correct collocation: I need to _____ a decision about my career.",
              type: "multiple",
              options: ["do", "make", "take", "have"],
            },
            {
              question: "Choose the synonym for 'difficult':",
              type: "multiple",
              options: ["easy", "challenging", "simple", "clear"],
            },
            {
              question:
                "Complete the question tag: Let's go to the cinema, _____?",
              type: "multiple",
              options: ["shall we", "will we", "do we", "are we"],
            },
            {
              question:
                "Describe a memorable experience you had while traveling (use past tenses and descriptive language).",
              type: "text",
              placeholder:
                "One of the most memorable experiences I had while traveling was when... I remember feeling...",
            },
            {
              question:
                "Fill in the word formation: The _____ of this project will take six months. (complete)",
              type: "multiple",
              options: [
                "completion",
                "completing",
                "completed",
                "completeness",
              ],
            },
            {
              question:
                "Choose the correct linking word: I wanted to go out; _____, it was raining heavily.",
              type: "multiple",
              options: ["therefore", "however", "moreover", "furthermore"],
            },
            {
              question:
                "Complete the telephone conversation: 'Could I _____ to Mr. Johnson, please?'",
              type: "multiple",
              options: ["speak", "talk", "say", "tell"],
            },
            {
              question:
                "Write a formal letter applying for a part-time job at a local bookstore (include your qualifications and availability).",
              type: "text",
              placeholder:
                "Dear Hiring Manager,\nI am writing to apply for the part-time position... My qualifications include...",
            },
          ],
        },
        "English 3": {
          "Assignment 1": [
            {
              question:
                "Complete the subjunctive construction: It is imperative that every student _____ the assignment on time.",
              type: "multiple",
              options: ["submits", "submit", "submitted", "will submit"],
            },
            {
              question:
                "Choose the correct inversion for emphasis: Never before _____ such dedication to the cause.",
              type: "multiple",
              options: ["we have seen", "have we seen", "we saw", "did we see"],
            },
            {
              question:
                "Fill in the cleft sentence: _____ concerns me most is the lack of transparency in the process.",
              type: "multiple",
              options: ["What", "That", "Which", "It"],
            },
            {
              question:
                "Select the appropriate academic register: The research methodology employed in this study _____.",
              type: "multiple",
              options: [
                "is really good",
                "demonstrates rigor",
                "works well",
                "seems okay",
              ],
            },
            {
              question:
                "Compose a persuasive thesis statement for an essay on artificial intelligence's impact on employment, using sophisticated vocabulary and complex sentence structures.",
              type: "text",
              placeholder:
                "Write a nuanced, arguable thesis that demonstrates advanced analytical thinking and academic discourse...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Identify the rhetorical device: 'The report's findings were not exactly encouraging.' (meaning they were discouraging)",
              type: "multiple",
              options: ["Litotes", "Hyperbole", "Metonymy", "Synecdoche"],
            },
            {
              question:
                "Complete the nominalization: The government's _____ of the new policy surprised many critics.",
              type: "multiple",
              options: [
                "implementing",
                "implementation",
                "implement",
                "implemented",
              ],
            },
            {
              question:
                "Choose the sophisticated phrasal verb: The committee will _____ the proposal before making a decision.",
              type: "multiple",
              options: ["look at", "mull over", "see", "check"],
            },
            {
              question:
                "Fill in the embedded question: The researcher questioned _____ such results could be replicated.",
              type: "multiple",
              options: ["that", "whether", "if", "what"],
            },
            {
              question:
                "Write a critical analysis of bias in media reporting, demonstrating sophisticated vocabulary and complex argumentation (minimum 200 words).",
              type: "text",
              placeholder:
                "Analyze how media bias manifests in contemporary journalism, using advanced discourse markers and academic vocabulary...",
            },
          ],
          Examen: [
            {
              question:
                "Complete the complex conditional: Had the researchers _____ more rigorous methodology, the results would have been more conclusive.",
              type: "multiple",
              options: ["employed", "employ", "employing", "to employ"],
            },
            {
              question:
                "Identify the euphemism: 'The company is rightsizing its workforce.'",
              type: "multiple",
              options: [
                "Hiring more people",
                "Laying off employees",
                "Training staff",
                "Promoting workers",
              ],
            },
            {
              question:
                "Choose the sophisticated word formation: The _____ of the argument was immediately apparent to scholars.",
              type: "multiple",
              options: [
                "fallacious",
                "fallaciousness",
                "fallacy",
                "fallaciously",
              ],
            },
            {
              question:
                "Complete the elliptical construction: Some students prefer online learning, others _____.",
              type: "multiple",
              options: [
                "traditional classrooms",
                "prefer traditional classrooms",
                "do traditional classrooms",
                "traditional",
              ],
            },
            {
              question:
                "Fill in the advanced passive: The proposal is _____ to undergo extensive revision before implementation.",
              type: "multiple",
              options: ["likely", "supposed", "expected", "meant"],
            },
            {
              question:
                "Choose the appropriate academic hedging: The findings _____ indicate a significant correlation.",
              type: "multiple",
              options: ["clearly", "tentatively", "obviously", "definitely"],
            },
            {
              question:
                "Complete the inversion for emphasis: Under no circumstances _____ this information be disclosed.",
              type: "multiple",
              options: ["should", "would", "could", "might"],
            },
            {
              question:
                "Compose a comprehensive research proposal abstract for a study on digital literacy's impact on democratic participation (minimum 250 words).",
              type: "text",
              placeholder:
                "Include research objectives, methodology, theoretical framework, and expected outcomes using advanced academic discourse...",
            },
            {
              question:
                "Identify the logical fallacy: 'If we allow students to retake exams, soon they'll expect to retake everything in life.'",
              type: "multiple",
              options: [
                "Slippery slope",
                "False analogy",
                "Ad hominem",
                "Straw man",
              ],
            },
            {
              question:
                "Fill in the sophisticated substitution: The government's policy on immigration is controversial, and _____ on education is equally so.",
              type: "multiple",
              options: ["that", "this", "it", "one"],
            },
            {
              question:
                "Choose the most precise idiomatic expression meaning 'to reveal a secret accidentally':",
              type: "multiple",
              options: [
                "spill the beans",
                "break the ice",
                "bite the bullet",
                "hit the nail on the head",
              ],
            },
            {
              question:
                "Complete the nominalization: The _____ of artificial intelligence raises ethical concerns about human agency.",
              type: "multiple",
              options: [
                "proliferate",
                "proliferation",
                "proliferating",
                "proliferated",
              ],
            },
            {
              question:
                "Fill in the cleft sentence for emphasis: _____ was the lack of funding that prevented the project's completion.",
              type: "multiple",
              options: ["What", "It", "That", "Which"],
            },
            {
              question:
                "Choose the sophisticated phrasal verb: The committee will need to _____ the implications of this decision.",
              type: "multiple",
              options: [
                "think through",
                "mull over",
                "work through",
                "hash out",
              ],
            },
            {
              question:
                "Complete the embedded question: The board questioned _____ such a significant investment was justified.",
              type: "multiple",
              options: ["whether", "that", "if", "what"],
            },
            {
              question:
                "Write a critical analysis of irony in contemporary political discourse, examining its rhetorical effects and cultural implications (minimum 300 words).",
              type: "text",
              placeholder:
                "Analyze how irony functions as a rhetorical device in modern political communication, considering audience, context, and effectiveness...",
            },
            {
              question:
                "Identify the tone in this passage: 'The committee's decision to postpone the meeting indefinitely demonstrates their characteristic efficiency.'",
              type: "multiple",
              options: ["Sincere", "Sarcastic", "Neutral", "Optimistic"],
            },
            {
              question:
                "Choose the most appropriate formal register: In response to your inquiry regarding the proposed amendments...",
              type: "multiple",
              options: [
                "we're happy to tell you",
                "we are pleased to inform you",
                "we want to let you know",
                "we'd like to say",
              ],
            },
            {
              question:
                "Complete the sophisticated conditional: _____ the evidence been more compelling, the jury's verdict might have differed.",
              type: "multiple",
              options: ["Had", "If", "Should", "Were"],
            },
            {
              question:
                "Compose a persuasive business proposal for implementing sustainable practices in a multinational corporation, demonstrating mastery of professional discourse and strategic argumentation (minimum 300 words).",
              type: "text",
              placeholder:
                "Present a comprehensive business case using sophisticated vocabulary, logical structure, and persuasive techniques appropriate for executive-level communication...",
            },
          ],
        },
        "Web Development": {
          "Assignment 1": [
            {
              question:
                "Which HTML element is used for the main heading of a page?",
              type: "multiple",
              options: ["<title>", "<h1>", "<header>", "<head>"],
            },
            {
              question:
                "Complete the semantic HTML structure: <_____ > represents the main content area of a webpage.",
              type: "multiple",
              options: ["<div>", "<section>", "<main>", "<content>"],
            },
            {
              question:
                "What CSS property controls the space between an element's content and its border?",
              type: "multiple",
              options: ["margin", "padding", "border-spacing", "gap"],
            },
            {
              question:
                "Fill in the JavaScript variable declaration: _____ name = 'John'; (modern ES6+ syntax)",
              type: "multiple",
              options: ["var", "let", "const", "string"],
            },
            {
              question:
                "Create a simple HTML form with an input field for email and a submit button, including proper semantic elements and attributes.",
              type: "text",
              placeholder:
                "Write HTML code: <form>...</form> with email input, labels, and proper attributes...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Which CSS layout method is best for creating responsive grid layouts?",
              type: "multiple",
              options: ["Flexbox", "CSS Grid", "Float", "Position"],
            },
            {
              question:
                "Complete the DOM manipulation: document._____ ('myButton').addEventListener('click', function);",
              type: "multiple",
              options: [
                "querySelector",
                "getElementById",
                "getElement",
                "find",
              ],
            },
            {
              question:
                "What HTTP method is used to retrieve data from a REST API?",
              type: "multiple",
              options: ["POST", "PUT", "GET", "DELETE"],
            },
            {
              question:
                "Fill in the modern JavaScript: const data = _____ fetch('/api/users');",
              type: "multiple",
              options: ["wait", "async", "await", "promise"],
            },
            {
              question:
                "Design a responsive card component using CSS Flexbox or Grid. Include HTML structure and CSS styling with mobile-first approach.",
              type: "text",
              placeholder:
                "Write HTML and CSS for a responsive card component with proper semantic structure...",
            },
          ],
          Examen: [
            {
              question:
                "What is the correct HTML5 semantic structure for a blog post?",
              type: "multiple",
              options: [
                "<div><h1></h1><p></p></div>",
                "<article><header><h1></h1></header><p></p></article>",
                "<section><title></title><content></content></section>",
                "<post><heading></heading><text></text></post>",
              ],
            },
            {
              question:
                "Complete the CSS Box Model: margin → _____ → padding → content",
              type: "multiple",
              options: ["outline", "border", "shadow", "background"],
            },
            {
              question: "Which CSS property creates a flexible container?",
              type: "multiple",
              options: [
                "display: block",
                "display: flex",
                "display: grid",
                "display: inline",
              ],
            },
            {
              question:
                "Fill in the JavaScript data type: typeof 'Hello World' returns _____",
              type: "multiple",
              options: ["text", "string", "char", "varchar"],
            },
            {
              question:
                "What method is used to select multiple elements in the DOM?",
              type: "multiple",
              options: [
                "getElementById",
                "querySelector",
                "querySelectorAll",
                "getElementsByClass",
              ],
            },
            {
              question:
                "Complete the event listener: button.addEventListener('_____', handleClick);",
              type: "multiple",
              options: ["onclick", "click", "pressed", "mouse"],
            },
            {
              question:
                "Which ES6+ feature allows you to extract values from objects?",
              type: "multiple",
              options: ["Destructuring", "Spreading", "Mapping", "Filtering"],
            },
            {
              question:
                "Create a complete HTML page structure with semantic elements for a portfolio website including navigation, main content, and footer.",
              type: "text",
              placeholder:
                "Write semantic HTML5 structure: <!DOCTYPE html>, <nav>, <main>, <footer>, etc...",
            },
            {
              question: "What does SPA stand for in web development?",
              type: "multiple",
              options: [
                "Single Page Application",
                "Server Page Architecture",
                "Static Page Assembly",
                "Secure Page Access",
              ],
            },
            {
              question:
                "Fill in the fetch API syntax: fetch('/api/data').then(response => response._____())",
              type: "multiple",
              options: ["parse", "json", "data", "convert"],
            },
            {
              question:
                "Which Node.js framework is commonly used for building web servers?",
              type: "multiple",
              options: ["React", "Express.js", "Angular", "Vue.js"],
            },
            {
              question:
                "Complete the REST API endpoint: GET /api/_____ (to retrieve all users)",
              type: "multiple",
              options: ["user", "users", "getUsers", "allUsers"],
            },
            {
              question: "What type of database is MongoDB?",
              type: "multiple",
              options: [
                "SQL database",
                "NoSQL database",
                "Relational database",
                "Graph database",
              ],
            },
            {
              question:
                "Fill in the Git command: git _____ origin main (to upload changes)",
              type: "multiple",
              options: ["upload", "send", "push", "commit"],
            },
            {
              question:
                "Which hosting platform is popular for deploying static websites for free?",
              type: "multiple",
              options: ["AWS EC2", "Netlify", "DigitalOcean", "Azure VMs"],
            },
            {
              question:
                "Write a JavaScript function that fetches user data from an API endpoint and displays it on a webpage using modern async/await syntax.",
              type: "text",
              placeholder:
                "async function fetchUsers() { const response = await fetch('/api/users'); ... }",
            },
            {
              question: "What does CI/CD stand for in web development?",
              type: "multiple",
              options: [
                "Code Integration/Code Deployment",
                "Continuous Integration/Continuous Deployment",
                "Client Interface/Client Database",
                "Component Integration/Component Development",
              ],
            },
            {
              question:
                "Complete the CSS Grid syntax: display: grid; grid-template-columns: _____ _____ _____ (three equal columns)",
              type: "multiple",
              options: [
                "1fr 1fr 1fr",
                "auto auto auto",
                "33% 33% 33%",
                "repeat(3, 1fr)",
              ],
            },
            {
              question:
                "Which HTTP status code indicates a successful request?",
              type: "multiple",
              options: ["404", "500", "200", "301"],
            },
            {
              question:
                "Design and code a complete responsive e-commerce product card component with HTML, CSS, and JavaScript functionality (add to cart, hover effects, responsive design).",
              type: "text",
              placeholder:
                "Create HTML structure, CSS styling with responsive design, and JavaScript for interactive features...",
            },
          ],
        },
        "Introduction to Python programming": {
          "Assignment 1": [
            {
              question: "What file extension is used for Python programs?",
              type: "multiple",
              options: [".txt", ".py", ".python", ".exe"],
            },
            {
              question: "Which of these is a valid Python variable name?",
              type: "multiple",
              options: ["2name", "my-name", "my_name", "my name"],
            },
            {
              question: "Complete the code: age = 25. What data type is 'age'?",
              type: "multiple",
              options: ["string", "integer", "float", "boolean"],
            },
            {
              question:
                "Fill in the conditional: if temperature _____ 30: print('Hot day')",
              type: "multiple",
              options: ["=", "==", ">", ">="],
            },
            {
              question:
                "Write a simple Python function that takes two numbers as parameters and returns their sum. Include the function definition and a function call.",
              type: "text",
              placeholder:
                "def add_numbers(a, b):\n    return a + b\n\n# Call the function\nresult = add_numbers(5, 3)",
            },
          ],
          "Assignment 2": [
            {
              question: "Which method is used to open a file in Python?",
              type: "multiple",
              options: ["file.open()", "open()", "read_file()", "load()"],
            },
            {
              question:
                "Complete the error handling: try: ... except _____ as e:",
              type: "multiple",
              options: ["Error", "Exception", "Mistake", "Problem"],
            },
            {
              question: "How do you import a module called 'math' in Python?",
              type: "multiple",
              options: ["include math", "import math", "use math", "load math"],
            },
            {
              question:
                "Fill in the class definition: class Car: def _____(self, brand):",
              type: "multiple",
              options: ["start", "__init__", "create", "new"],
            },
            {
              question:
                "Create a Python class called 'Student' with attributes for name and age, and a method to display student information.",
              type: "text",
              placeholder:
                "class Student:\n    def __init__(self, name, age):\n        # Your code here\n    \n    def display_info(self):\n        # Your code here",
            },
          ],
          Examen: [
            {
              question:
                "Which IDE is commonly recommended for Python development?",
              type: "multiple",
              options: [
                "Notepad",
                "PyCharm",
                "Microsoft Word",
                "Internet Explorer",
              ],
            },
            {
              question:
                "Complete the variable assignment: name = '___' (string data type)",
              type: "multiple",
              options: ["John", "123", "True", "3.14"],
            },
            {
              question:
                "Which loop is best for iterating through a list in Python?",
              type: "multiple",
              options: [
                "while loop",
                "for loop",
                "do-while loop",
                "repeat loop",
              ],
            },
            {
              question:
                "Fill in the function parameter: def greet(___): return f'Hello, {name}!'",
              type: "multiple",
              options: ["name", "'name'", "string", "parameter"],
            },
            {
              question:
                "What mode should you use to write to a file in Python?",
              type: "multiple",
              options: ["'r'", "'w'", "'read'", "'write'"],
            },
            {
              question:
                "Complete the try-except block: try: result = 10/0 except _____:",
              type: "multiple",
              options: [
                "Error",
                "ZeroDivisionError",
                "MathError",
                "DivisionError",
              ],
            },
            {
              question: "Which statement imports all functions from a module?",
              type: "multiple",
              options: [
                "import module",
                "from module import *",
                "import * from module",
                "include module.*",
              ],
            },
            {
              question:
                "Write a Python program that reads a text file and counts the number of words in it. Include proper error handling.",
              type: "text",
              placeholder:
                "try:\n    with open('filename.txt', 'r') as file:\n        # Your code here\nexcept FileNotFoundError:\n    # Error handling",
            },
            {
              question:
                "Fill in the inheritance: class Dog(___): # Dog inherits from Animal",
              type: "multiple",
              options: ["Animal", "'Animal'", "Parent", "Base"],
            },
            {
              question:
                "Which module is used for working with dates in Python?",
              type: "multiple",
              options: ["time", "datetime", "calendar", "date"],
            },
            {
              question: "What keyword is used to create a generator function?",
              type: "multiple",
              options: ["return", "yield", "generate", "create"],
            },
            {
              question:
                "Complete the decorator syntax: @_____ def my_function():",
              type: "multiple",
              options: ["decorator_name", "function", "def", "method"],
            },
            {
              question:
                "Which module is used for regular expressions in Python?",
              type: "multiple",
              options: ["regex", "re", "regexp", "regular"],
            },
            {
              question:
                "Fill in the JSON parsing: import json; data = json._____(json_string)",
              type: "multiple",
              options: ["parse", "loads", "decode", "read"],
            },
            {
              question:
                "Which library is commonly used for web scraping in Python?",
              type: "multiple",
              options: [
                "requests",
                "beautifulsoup4",
                "Both requests and beautifulsoup4",
                "urllib only",
              ],
            },
            {
              question:
                "Create a Python password generator that creates a random 8-character password using letters, numbers, and symbols. Use appropriate modules.",
              type: "text",
              placeholder:
                "import random\nimport string\n\ndef generate_password():\n    # Your code here\n    return password",
            },
            {
              question:
                "Complete the list comprehension: squares = [x___2 for x in range(10)]",
              type: "multiple",
              options: ["*", "**", "^", "pow"],
            },
            {
              question: "Which method converts a Python object to JSON string?",
              type: "multiple",
              options: [
                "json.loads()",
                "json.dumps()",
                "json.parse()",
                "json.stringify()",
              ],
            },
            {
              question:
                "Fill in the web request: import requests; response = requests._____(url)",
              type: "multiple",
              options: ["fetch", "get", "request", "call"],
            },
            {
              question:
                "Design and code a simple Python quiz application that asks 3 questions, tracks the score, and displays the final result. Include user input validation.",
              type: "text",
              placeholder:
                "# Quiz Application\nquestions = [\n    # Your questions here\n]\n\nscore = 0\n# Your quiz logic here",
            },
          ],
        },
        "C programming": {
          "Assignment 1": [
            {
              question: "What is the file extension for C source code files?",
              type: "multiple",
              options: [".c", ".cpp", ".h", ".exe"],
            },
            {
              question:
                "Complete the basic C program structure: #include <stdio.h> _____ main() {",
              type: "multiple",
              options: ["void", "int", "char", "float"],
            },
            {
              question: "Which data type is used to store whole numbers in C?",
              type: "multiple",
              options: ["float", "char", "int", "double"],
            },
            {
              question:
                'Fill in the format specifier: printf("Number: ____", age); (for integer)',
              type: "multiple",
              options: ["%s", "%d", "%f", "%c"],
            },
            {
              question:
                "Write a complete 'Hello World' program in C including all necessary headers and proper main function structure.",
              type: "text",
              placeholder:
                "#include <stdio.h>\nint main() {\n    // Your code here\n    return 0;\n}",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Which operator is used for modulus (remainder) operation in C?",
              type: "multiple",
              options: ["/", "%", "*", "//"],
            },
            {
              question:
                'Complete the if statement: if (age _____ 18) { printf("Adult"); }',
              type: "multiple",
              options: ["=", "==", ">=", "=>"],
            },
            {
              question:
                "Which loop executes at least once even if condition is false?",
              type: "multiple",
              options: [
                "for loop",
                "while loop",
                "do-while loop",
                "nested loop",
              ],
            },
            {
              question:
                "Fill in the function declaration: _____ add(int a, int b);",
              type: "multiple",
              options: ["void", "int", "function", "def"],
            },
            {
              question:
                "Create a C function that calculates the factorial of a number using recursion. Include the function definition and explain how it works.",
              type: "text",
              placeholder:
                "int factorial(int n) {\n    // Your recursive implementation here\n}",
            },
          ],
          Examen: [
            {
              question: "Who developed the C programming language?",
              type: "multiple",
              options: [
                "Dennis Ritchie",
                "Bjarne Stroustrup",
                "James Gosling",
                "Guido van Rossum",
              ],
            },
            {
              question:
                "Which compiler is commonly used for C programming on Linux?",
              type: "multiple",
              options: ["Visual Studio", "GCC", "Turbo C", "Code::Blocks"],
            },
            {
              question:
                "Complete the constant declaration: _____ PI = 3.14159;",
              type: "multiple",
              options: ["const float", "constant", "#define", "final float"],
            },
            {
              question:
                "Fill in the arithmetic operator: result = a _____ b; (exponentiation - trick question)",
              type: "multiple",
              options: ["**", "^", "pow(a,b)", "exp"],
            },
            {
              question: "Which logical operator represents AND in C?",
              type: "multiple",
              options: ["&", "&&", "AND", "and"],
            },
            {
              question:
                "Complete the switch case: switch(grade) { _____ 'A': printf(\"Excellent\"); break;",
              type: "multiple",
              options: ["if", "when", "case", "option"],
            },
            {
              question:
                "Fill in the for loop: for(int i = 0; i _____ 10; i++) {",
              type: "multiple",
              options: ["<", "<=", "=", "=="],
            },
            {
              question:
                "Write a C program that uses a while loop to find the sum of numbers from 1 to 100.",
              type: "text",
              placeholder:
                "#include <stdio.h>\nint main() {\n    int i = 1, sum = 0;\n    // Your while loop here\n}",
            },
            {
              question: "How do you pass an array to a function in C?",
              type: "multiple",
              options: [
                "By value only",
                "By reference only",
                "Both by value and reference",
                "Arrays cannot be passed",
              ],
            },
            {
              question:
                "Complete the array declaration: int numbers_____ = {1, 2, 3, 4, 5};",
              type: "multiple",
              options: ["[5]", "(5)", "{5}", "<5>"],
            },
            {
              question:
                "Which function is used to find the length of a string in C?",
              type: "multiple",
              options: ["length()", "strlen()", "size()", "count()"],
            },
            {
              question:
                "Fill in the pointer declaration: int *_____ = &variable;",
              type: "multiple",
              options: ["ptr", "pointer", "address", "reference"],
            },
            {
              question:
                "Complete the pointer arithmetic: if ptr points to arr[2], then (ptr + 1) points to _____",
              type: "multiple",
              options: [
                "arr[1]",
                "arr[3]",
                "arr[2] + 1",
                "next memory location",
              ],
            },
            {
              question:
                "Fill in the structure declaration: _____ student { char name[50]; int age; };",
              type: "multiple",
              options: ["struct", "class", "type", "record"],
            },
            {
              question: "Which function opens a file in C?",
              type: "multiple",
              options: ["open()", "fopen()", "file_open()", "create()"],
            },
            {
              question:
                "Design and implement a C program for a simple student record system that can add, display, and search student records using structures and file handling.",
              type: "text",
              placeholder:
                "// Student Record System\n#include <stdio.h>\n\nstruct student {\n    // Define structure members\n};\n\n// Implement functions for add, display, search",
            },
            {
              question:
                "Complete the dynamic memory allocation: int *arr = _____(5 * sizeof(int));",
              type: "multiple",
              options: ["malloc", "alloc", "new", "create"],
            },
            {
              question:
                "Fill in the command line arguments: int main(int _____, char *argv[]) {",
              type: "multiple",
              options: ["args", "argc", "count", "num"],
            },
            {
              question:
                "Which preprocessor directive is used to include header files?",
              type: "multiple",
              options: ["#define", "#include", "#import", "#using"],
            },
            {
              question:
                "Create a complete C program for a mini calculator that performs basic arithmetic operations (+, -, *, /) using switch case and functions.",
              type: "text",
              placeholder:
                "// Mini Calculator Program\n#include <stdio.h>\n\n// Function declarations\nfloat add(float a, float b);\n// Add other function declarations\n\nint main() {\n    // Your calculator logic here\n}",
            },
          ],
        },
        Photoshop: {
          "Assignment 1": [
            {
              question:
                "What type of software is Adobe Photoshop primarily used for?",
              type: "multiple",
              options: [
                "Word processing",
                "Image editing and graphic design",
                "Video editing",
                "Web browsing",
              ],
            },
            {
              question:
                "Which panel shows all the tools available in Photoshop?",
              type: "multiple",
              options: [
                "Layers panel",
                "Properties panel",
                "Tools panel",
                "History panel",
              ],
            },
            {
              question:
                "What file format should you save your work in to preserve layers and editability?",
              type: "multiple",
              options: [".jpg", ".png", ".psd", ".gif"],
            },
            {
              question:
                "Complete the workspace navigation: The _____ tool allows you to move around the canvas when zoomed in.",
              type: "multiple",
              options: ["Move", "Hand", "Zoom", "Selection"],
            },
            {
              question:
                "Describe the main components of the Photoshop workspace and explain how to open and save a new document.",
              type: "text",
              placeholder:
                "Explain the Tools panel, Canvas area, Panels on the right... To open: File > New or Ctrl+N...",
            },
          ],
          "Assignment 2": [
            {
              question:
                "Which tool is used to select rectangular or circular areas?",
              type: "multiple",
              options: [
                "Lasso tool",
                "Magic Wand",
                "Marquee tool",
                "Quick Selection",
              ],
            },
            {
              question: "What is the primary purpose of layers in Photoshop?",
              type: "multiple",
              options: [
                "To make files smaller",
                "To organize and edit different elements separately",
                "To add color",
                "To print documents",
              ],
            },
            {
              question:
                "Fill in the layer operation: To hide a layer, click the _____ icon next to the layer name.",
              type: "multiple",
              options: ["lock", "eye", "chain", "mask"],
            },
            {
              question: "Which tool allows you to make freehand selections?",
              type: "multiple",
              options: [
                "Rectangular Marquee",
                "Elliptical Marquee",
                "Lasso tool",
                "Crop tool",
              ],
            },
            {
              question:
                "Create a step-by-step process for adding text to an image and applying a basic drop shadow effect.",
              type: "text",
              placeholder:
                "1. Select the Type tool (T)\n2. Click on the image and type your text...\n3. Right-click layer > Blending Options...",
            },
          ],
          Examen: [
            {
              question: "Adobe Photoshop was first released in which year?",
              type: "multiple",
              options: ["1988", "1990", "1995", "2000"],
            },
            {
              question:
                "Which keyboard shortcut opens a new document in Photoshop?",
              type: "multiple",
              options: ["Ctrl+O", "Ctrl+N", "Ctrl+S", "Ctrl+P"],
            },
            {
              question:
                "Complete the file format: _____ files preserve transparency but have larger file sizes.",
              type: "multiple",
              options: ["JPEG", "PNG", "GIF", "BMP"],
            },
            {
              question:
                "Fill in the tool shortcut: Press _____ to quickly access the Move tool.",
              type: "multiple",
              options: ["M", "V", "T", "B"],
            },
            {
              question:
                "Which tool is best for removing backgrounds or unwanted objects?",
              type: "multiple",
              options: [
                "Brush tool",
                "Eraser tool",
                "Clone Stamp tool",
                "All of the above",
              ],
            },
            {
              question:
                "Complete the zoom navigation: Hold _____ and scroll to zoom in and out quickly.",
              type: "multiple",
              options: ["Ctrl", "Alt", "Shift", "Space"],
            },
            {
              question: "What does Ctrl+Z do in Photoshop?",
              type: "multiple",
              options: [
                "Saves the file",
                "Undoes the last action",
                "Copies selection",
                "Zooms in",
              ],
            },
            {
              question:
                "Explain how to create a new layer, rename it, and change its blending mode. Include the steps and purpose of each action.",
              type: "text",
              placeholder:
                "1. Click the 'Create New Layer' icon or Ctrl+Shift+N...\n2. Double-click layer name to rename...\n3. Change blending mode from dropdown...",
            },
            {
              question:
                "Fill in the layer organization: _____ allow you to organize multiple layers into a single collapsible unit.",
              type: "multiple",
              options: [
                "Layer Groups",
                "Layer Sets",
                "Layer Collections",
                "Layer Folders",
              ],
            },
            {
              question: "Which command merges a layer with the layer below it?",
              type: "multiple",
              options: [
                "Merge Down",
                "Flatten Image",
                "Merge Visible",
                "Group Layers",
              ],
            },
            {
              question:
                "Complete the selection refinement: The _____ option makes selection edges softer and more natural.",
              type: "multiple",
              options: ["Feather", "Smooth", "Blur", "Soften"],
            },
            {
              question: "What is the purpose of a layer mask?",
              type: "multiple",
              options: [
                "To delete parts of a layer permanently",
                "To hide parts of a layer without deleting them",
                "To change layer colors",
                "To duplicate layers",
              ],
            },
            {
              question:
                "Fill in the selection tool: The _____ tool automatically selects areas of similar color.",
              type: "multiple",
              options: [
                "Magic Wand",
                "Quick Selection",
                "Color Range",
                "Magnetic Lasso",
              ],
            },
            {
              question: "Which keyboard shortcut accesses the Type tool?",
              type: "multiple",
              options: ["T", "Y", "U", "I"],
            },
            {
              question:
                "Complete the text formatting: To change font size, select the text and modify the _____ value.",
              type: "multiple",
              options: [
                "Font Family",
                "Font Size",
                "Font Style",
                "Font Weight",
              ],
            },
            {
              question:
                "Create a comprehensive tutorial for designing a simple logo using Photoshop. Include text, shapes, effects, and proper layer organization.",
              type: "text",
              placeholder:
                "Logo Design Tutorial:\n1. Create new document (1000x1000px)...\n2. Use Shape tools for basic elements...\n3. Add company name with Type tool...\n4. Apply layer styles (drop shadow, gradient)...",
            },
            {
              question:
                "Fill in the layer style: _____ Shadow creates a shadow effect behind text or objects.",
              type: "multiple",
              options: ["Inner", "Drop", "Outer", "Cast"],
            },
            {
              question:
                "Which blend mode is commonly used to create highlights and lighting effects?",
              type: "multiple",
              options: ["Multiply", "Screen", "Overlay", "Normal"],
            },
            {
              question:
                "Complete the workspace customization: You can save your current panel arrangement as a custom _____.",
              type: "multiple",
              options: ["Template", "Workspace", "Profile", "Layout"],
            },
            {
              question:
                "Design a step-by-step photo manipulation project that demonstrates masking, layer blending, color correction, and text overlay techniques for a movie poster design.",
              type: "text",
              placeholder:
                "Movie Poster Project:\n1. Import background image and main subject...\n2. Use layer masks to blend elements...\n3. Apply color grading with adjustment layers...\n4. Add dramatic text with effects...\n5. Final touches and export...",
            },
          ],
        },
      };

      // Correct answers database for auto-correction
      const correctAnswers = {
        "English 1": {
          "Assignment 1": [
            { type: "multiple", correct: 1 }, // Good afternoon
            { type: "multiple", correct: 0 }, // D
            { type: "multiple", correct: 0 }, // name
            { type: "multiple", correct: 1 }, // ten
            { type: "text", keywords: ["father", "mother", "family"] },
          ],
          "Assignment 2": [
            { type: "multiple", correct: 0 }, // Wednesday
            { type: "multiple", correct: 2 }, // shoes
            { type: "multiple", correct: 0 }, // like
            { type: "multiple", correct: 2 }, // woof
            { type: "text", keywords: ["coffee", "meet", "friend"] },
          ],
          Examen: [
            { type: "multiple", correct: 1 }, // an, a
            { type: "multiple", correct: 1 }, // Good morning
            { type: "multiple", correct: 1 }, // has
            { type: "multiple", correct: 0 }, // cats
            { type: "multiple", correct: 2 }, // yellow
            { type: "multiple", correct: 1 }, // Tuesday
            { type: "multiple", correct: 0 }, // eat
            { type: "multiple", correct: 1 }, // My
            { type: "multiple", correct: 2 }, // How
            { type: "multiple", correct: 1 }, // on
            { type: "multiple", correct: 0 }, // in
            { type: "multiple", correct: 1 }, // are
            { type: "multiple", correct: 0 }, // hot
            { type: "multiple", correct: 2 }, // eyes
            { type: "multiple", correct: 0 }, // sandwich
            { type: "text", keywords: ["name", "age", "live"] },
            { type: "multiple", correct: 0 }, // car
            { type: "multiple", correct: 1 }, // Thank you
            { type: "multiple", correct: 0 }, // umbrella
            { type: "text", keywords: ["wake", "eat", "work", "study"] },
          ],
        },
        "English 2": {
          "Assignment 1": [
            { type: "multiple", correct: 1 }, // have lived
            { type: "multiple", correct: 1 }, // should
            { type: "multiple", correct: 0 }, // more interesting
            { type: "multiple", correct: 0 }, // look up
            { type: "text", keywords: ["late", "boss", "formal", "email"] },
          ],
          "Assignment 2": [
            { type: "multiple", correct: 1 }, // was
            { type: "multiple", correct: 0 }, // have you
            { type: "multiple", correct: 0 }, // reading
            { type: "multiple", correct: 1 }, // however
            {
              type: "text",
              keywords: ["vacation", "destination", "activities"],
            },
          ],
          Examen: [
            { type: "multiple", correct: 1 }, // was doing
            { type: "multiple", correct: 2 }, // were
            { type: "multiple", correct: 1 }, // was written
            { type: "multiple", correct: 1 }, // whose
            { type: "multiple", correct: 0 }, // should
            { type: "multiple", correct: 1 }, // best
            { type: "multiple", correct: 1 }, // will be lying
            {
              type: "text",
              keywords: ["opinion", "working", "home", "office"],
            },
            { type: "multiple", correct: 0 }, // work out
            { type: "multiple", correct: 1 }, // would help
            { type: "multiple", correct: 0 }, // costs an arm and a leg
            { type: "multiple", correct: 0 }, // meeting
            { type: "multiple", correct: 1 }, // make
            { type: "multiple", correct: 1 }, // challenging
            { type: "multiple", correct: 0 }, // shall we
            { type: "text", keywords: ["travel", "experience", "memorable"] },
            { type: "multiple", correct: 0 }, // completion
            { type: "multiple", correct: 1 }, // however
            { type: "multiple", correct: 0 }, // speak
            {
              type: "text",
              keywords: ["job", "application", "qualifications"],
            },
          ],
        },
        "English 3": {
          "Assignment 1": [
            { type: "multiple", correct: 1 }, // submit
            { type: "multiple", correct: 1 }, // have we seen
            { type: "multiple", correct: 0 }, // What
            { type: "multiple", correct: 1 }, // demonstrates rigor
            {
              type: "text",
              keywords: ["thesis", "artificial", "intelligence", "employment"],
            },
          ],
          "Assignment 2": [
            { type: "multiple", correct: 0 }, // Litotes
            { type: "multiple", correct: 1 }, // implementation
            { type: "multiple", correct: 1 }, // mull over
            { type: "multiple", correct: 1 }, // whether
            {
              type: "text",
              keywords: ["bias", "media", "critical", "analysis"],
            },
          ],
          Examen: [
            { type: "multiple", correct: 0 }, // employed
            { type: "multiple", correct: 1 }, // Laying off employees
            { type: "multiple", correct: 2 }, // fallacy
            { type: "multiple", correct: 1 }, // prefer traditional classrooms
            { type: "multiple", correct: 2 }, // expected
            { type: "multiple", correct: 1 }, // tentatively
            { type: "multiple", correct: 0 }, // should
            {
              type: "text",
              keywords: ["research", "digital", "literacy", "democracy"],
            },
            { type: "multiple", correct: 0 }, // Slippery slope
            { type: "multiple", correct: 0 }, // that
            { type: "multiple", correct: 0 }, // spill the beans
            { type: "multiple", correct: 1 }, // proliferation
            { type: "multiple", correct: 1 }, // It
            { type: "multiple", correct: 1 }, // mull over
            { type: "multiple", correct: 0 }, // whether
            {
              type: "text",
              keywords: ["irony", "political", "discourse", "rhetoric"],
            },
            { type: "multiple", correct: 1 }, // Sarcastic
            { type: "multiple", correct: 1 }, // we are pleased to inform you
            { type: "multiple", correct: 0 }, // Had
            {
              type: "text",
              keywords: ["business", "sustainability", "proposal", "corporate"],
            },
          ],
        },
        "Web Development": {
          "Assignment 1": [
            { type: "multiple", correct: 1 }, // <h1>
            { type: "multiple", correct: 2 }, // <main>
            { type: "multiple", correct: 1 }, // padding
            { type: "multiple", correct: 1 }, // let
            { type: "text", keywords: ["form", "email", "input", "submit"] },
          ],
          "Assignment 2": [
            { type: "multiple", correct: 1 }, // CSS Grid
            { type: "multiple", correct: 1 }, // getElementById
            { type: "multiple", correct: 2 }, // GET
            { type: "multiple", correct: 2 }, // await
            {
              type: "text",
              keywords: ["card", "responsive", "flexbox", "grid"],
            },
          ],
          Examen: [
            { type: "multiple", correct: 1 }, // <article><header><h1></h1></header><p></p></article>
            { type: "multiple", correct: 1 }, // border
            { type: "multiple", correct: 1 }, // display: flex
            { type: "multiple", correct: 1 }, // string
            { type: "multiple", correct: 2 }, // querySelectorAll
            { type: "multiple", correct: 1 }, // click
            { type: "multiple", correct: 0 }, // Destructuring
            {
              type: "text",
              keywords: ["html", "semantic", "portfolio", "structure"],
            },
            { type: "multiple", correct: 0 }, // Single Page Application
            { type: "multiple", correct: 1 }, // json
            { type: "multiple", correct: 1 }, // Express.js
            { type: "multiple", correct: 1 }, // users
            { type: "multiple", correct: 1 }, // NoSQL database
            { type: "multiple", correct: 2 }, // push
            { type: "multiple", correct: 1 }, // Netlify
            { type: "text", keywords: ["javascript", "fetch", "api", "async"] },
            { type: "multiple", correct: 1 }, // Continuous Integration/Continuous Deployment
            { type: "multiple", correct: 3 }, // repeat(3, 1fr)
            { type: "multiple", correct: 2 }, // 200
            {
              type: "text",
              keywords: ["ecommerce", "product", "card", "responsive"],
            },
          ],
        },
        "Introduction to Python programming": {
          "Assignment 1": [
            { type: "multiple", correct: 1 }, // .py
            { type: "multiple", correct: 2 }, // my_name
            { type: "multiple", correct: 1 }, // integer
            { type: "multiple", correct: 2 }, // >
            {
              type: "text",
              keywords: ["def", "function", "return", "parameters"],
            },
          ],
          "Assignment 2": [
            { type: "multiple", correct: 1 }, // open()
            { type: "multiple", correct: 1 }, // Exception
            { type: "multiple", correct: 1 }, // import math
            { type: "multiple", correct: 1 }, // __init__
            {
              type: "text",
              keywords: ["class", "Student", "__init__", "method"],
            },
          ],
          Examen: [
            { type: "multiple", correct: 1 }, // PyCharm
            { type: "multiple", correct: 0 }, // John
            { type: "multiple", correct: 1 }, // for loop
            { type: "multiple", correct: 0 }, // name
            { type: "multiple", correct: 1 }, // 'w'
            { type: "multiple", correct: 1 }, // ZeroDivisionError
            { type: "multiple", correct: 1 }, // from module import *
            { type: "text", keywords: ["file", "read", "words", "count"] },
            { type: "multiple", correct: 0 }, // Animal
            { type: "multiple", correct: 1 }, // datetime
            { type: "multiple", correct: 1 }, // yield
            { type: "multiple", correct: 0 }, // decorator_name
            { type: "multiple", correct: 1 }, // re
            { type: "multiple", correct: 1 }, // loads
            { type: "multiple", correct: 2 }, // Both requests and beautifulsoup4
            {
              type: "text",
              keywords: ["password", "random", "generator", "string"],
            },
            { type: "multiple", correct: 1 }, // **
            { type: "multiple", correct: 1 }, // json.dumps()
            { type: "multiple", correct: 1 }, // get
            {
              type: "text",
              keywords: ["quiz", "questions", "score", "validation"],
            },
          ],
        },
        "C programming": {
          "Assignment 1": [
            { type: "multiple", correct: 0 }, // .c
            { type: "multiple", correct: 1 }, // int
            { type: "multiple", correct: 2 }, // int
            { type: "multiple", correct: 1 }, // %d
            {
              type: "text",
              keywords: ["#include", "stdio.h", "main", "printf"],
            },
          ],
          "Assignment 2": [
            { type: "multiple", correct: 1 }, // %
            { type: "multiple", correct: 2 }, // >=
            { type: "multiple", correct: 2 }, // do-while loop
            { type: "multiple", correct: 1 }, // int
            {
              type: "text",
              keywords: ["factorial", "recursive", "function", "int"],
            },
          ],
          Examen: [
            { type: "multiple", correct: 0 }, // Dennis Ritchie
            { type: "multiple", correct: 1 }, // GCC
            { type: "multiple", correct: 0 }, // const float
            { type: "multiple", correct: 2 }, // pow(a,b)
            { type: "multiple", correct: 1 }, // &&
            { type: "multiple", correct: 2 }, // case
            { type: "multiple", correct: 0 }, // <
            { type: "text", keywords: ["while", "loop", "sum", "numbers"] },
            { type: "multiple", correct: 1 }, // By reference only
            { type: "multiple", correct: 0 }, // [5]
            { type: "multiple", correct: 1 }, // strlen()
            { type: "multiple", correct: 0 }, // ptr
            { type: "multiple", correct: 1 }, // arr[3]
            { type: "multiple", correct: 0 }, // struct
            { type: "multiple", correct: 1 }, // fopen()
            { type: "text", keywords: ["student", "struct", "file", "system"] },
            { type: "multiple", correct: 0 }, // malloc
            { type: "multiple", correct: 1 }, // argc
            { type: "multiple", correct: 1 }, // #include
            {
              type: "text",
              keywords: ["calculator", "switch", "functions", "arithmetic"],
            },
          ],
        },
        Photoshop: {
          "Assignment 1": [
            { type: "multiple", correct: 1 }, // Image editing and graphic design
            { type: "multiple", correct: 2 }, // Tools panel
            { type: "multiple", correct: 2 }, // .psd
            { type: "multiple", correct: 1 }, // Hand
            {
              type: "text",
              keywords: ["workspace", "tools", "panels", "document"],
            },
          ],
          "Assignment 2": [
            { type: "multiple", correct: 2 }, // Marquee tool
            { type: "multiple", correct: 1 }, // To organize and edit different elements separately
            { type: "multiple", correct: 1 }, // eye
            { type: "multiple", correct: 2 }, // Lasso tool
            { type: "text", keywords: ["text", "type", "tool", "shadow"] },
          ],
          Examen: [
            { type: "multiple", correct: 1 }, // 1990
            { type: "multiple", correct: 1 }, // Ctrl+N
            { type: "multiple", correct: 1 }, // PNG
            { type: "multiple", correct: 1 }, // V
            { type: "multiple", correct: 3 }, // All of the above
            { type: "multiple", correct: 0 }, // Ctrl
            { type: "multiple", correct: 1 }, // Undoes the last action
            { type: "text", keywords: ["layer", "new", "rename", "blending"] },
            { type: "multiple", correct: 0 }, // Layer Groups
            { type: "multiple", correct: 0 }, // Merge Down
            { type: "multiple", correct: 0 }, // Feather
            { type: "multiple", correct: 1 }, // To hide parts of a layer without deleting them
            { type: "multiple", correct: 0 }, // Magic Wand
            { type: "multiple", correct: 0 }, // T
            { type: "multiple", correct: 1 }, // Font Size
            { type: "text", keywords: ["logo", "design", "text", "effects"] },
            { type: "multiple", correct: 1 }, // Drop
            { type: "multiple", correct: 1 }, // Screen
            { type: "multiple", correct: 1 }, // Workspace
            {
              type: "text",
              keywords: ["movie", "poster", "masking", "blending"],
            },
          ],
        },
      };

      // Real-time course selection handler
      courseSelect.addEventListener("change", function () {
        const courseName = this.value;
        console.log("🎯 Course selected:", courseName);

        // Clear assessment dropdown and questions
        assessmentSelect.innerHTML =
          '<option value="">📝 Select assessment type</option>';
        questionsContainer.innerHTML = "";
        submitSection.style.display = "none";

        if (courseName) {
          console.log("Adding assessment options for:", courseName);

          // Add assessment type options
          const assessmentTypes = [
            { value: "Assignment 1", text: "📝 Assignment 1", icon: "📝" },
            { value: "Assignment 2", text: "📋 Assignment 2", icon: "📋" },
            { value: "Examen", text: "🎓 Examen (20 questions)", icon: "🎓" },
          ];

          assessmentTypes.forEach((assessment) => {
            const option = document.createElement("option");
            option.value = assessment.value;
            option.textContent = assessment.text;
            assessmentSelect.appendChild(option);
          });

          showStatus(
            "success",
            `✅ 3 assessment types available for ${courseName}`
          );
          console.log("✅ Assessment options added successfully");
        } else {
          showStatus("info", "Please select a course to continue");
        }
      });

      // Real-time assessment selection handler
      assessmentSelect.addEventListener("change", function () {
        const assessmentType = this.value;
        const courseName = courseSelect.value;

        console.log(
          "🎯 Assessment selected:",
          assessmentType,
          "for course:",
          courseName
        );

        if (courseName && assessmentType) {
          showStatus(
            "loading",
            `⏳ Loading ${assessmentType} questions for ${courseName}...`
          );

          // Simulate loading with delay for better UX
          setTimeout(() => {
            loadQuestions(courseName, assessmentType);
            showStatus(
              "success",
              `✅ ${assessmentType} questions loaded for ${courseName}`
            );
          }, 800);
        }
      });

      // Function to show status messages
      function showStatus(type, message) {
        statusMessage.className = `status-message ${type}`;
        statusMessage.textContent = message;
        statusMessage.style.display = "block";

        // Auto-hide info messages after 5 seconds
        if (type === "info") {
          setTimeout(() => {
            statusMessage.style.display = "none";
          }, 5000);
        }
      }

      // Function to load questions
      function loadQuestions(courseName, assessmentType) {
        console.log(
          "📝 Loading questions for:",
          courseName,
          "-",
          assessmentType
        );

        // Clear existing content
        questionsContainer.innerHTML = "";

        // Create beautiful header
        const header = document.createElement("div");
        header.style.cssText = `
                background: linear-gradient(135deg, #4CAF50, #45a049);
                color: white;
                padding: 25px;
                border-radius: 15px;
                margin-bottom: 30px;
                text-align: center;
                box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
            `;

        const assessmentIcon = getAssessmentIcon(assessmentType);
        header.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; gap: 15px;">
                    <div style="font-size: 2.5em;">${assessmentIcon}</div>
                    <div>
                        <h2 style="margin: 0; font-size: 1.5em;">${courseName}</h2>
                        <h3 style="margin: 5px 0 0 0; opacity: 0.9; font-size: 1.2em;">${assessmentType}</h3>
                        <p style="margin: 10px 0 0 0; opacity: 0.8;">Complete all questions below and submit when ready</p>
                    </div>
                </div>
            `;
        questionsContainer.appendChild(header);

        // Get questions (use sample data or generate)
        let questions = getQuestionsForAssessment(courseName, assessmentType);

        // Generate question elements
        questions.forEach((question, index) => {
          const questionDiv = createQuestionElement(question, index);
          questionsContainer.appendChild(questionDiv);
        });

        // Show submit section
        submitSection.style.display = "block";

        console.log(`✅ Generated ${questions.length} questions successfully`);
      }

      // Function to get assessment icon
      function getAssessmentIcon(assessmentType) {
        switch (assessmentType) {
          case "Assignment 1":
            return "📝";
          case "Assignment 2":
            return "📋";
          case "Examen":
            return "🎓";
          default:
            return "📄";
        }
      }

      // Function to get questions for assessment
      function getQuestionsForAssessment(courseName, assessmentType) {
        // Try to get from sample database first
        if (
          sampleQuestions[courseName] &&
          sampleQuestions[courseName][assessmentType]
        ) {
          let questions = sampleQuestions[courseName][assessmentType];

          // For exams, extend to 20 questions
          if (assessmentType === "Examen" && questions.length < 20) {
            questions = [...questions];
            while (questions.length < 20) {
              questions.push(
                createSampleQuestion(
                  courseName,
                  questions.length + 1,
                  assessmentType
                )
              );
            }
          }

          // For assignments, ensure 5 questions
          if (assessmentType !== "Examen" && questions.length < 5) {
            while (questions.length < 5) {
              questions.push(
                createSampleQuestion(
                  courseName,
                  questions.length + 1,
                  assessmentType
                )
              );
            }
          }

          return questions;
        }

        // Generate sample questions
        const questionCount = assessmentType === "Examen" ? 20 : 5;
        const questions = [];

        for (let i = 1; i <= questionCount; i++) {
          questions.push(createSampleQuestion(courseName, i, assessmentType));
        }

        return questions;
      }

      // Function to create sample question
      function createSampleQuestion(
        courseName,
        questionNumber,
        assessmentType
      ) {
        // Alternate between multiple choice and text questions
        const isMultipleChoice =
          assessmentType === "Examen"
            ? questionNumber <= 15 // 75% multiple choice for exams
            : questionNumber <= 3; // 60% multiple choice for assignments

        if (isMultipleChoice) {
          return {
            question: `${courseName} - Question ${questionNumber}: Sample multiple choice question about ${courseName.toLowerCase()} concepts and principles.`,
            type: "multiple",
            options: [
              `Option A: First possible answer related to ${courseName}`,
              `Option B: Second possible answer related to ${courseName}`,
              `Option C: Third possible answer related to ${courseName}`,
              `Option D: Fourth possible answer related to ${courseName}`,
            ],
          };
        } else {
          return {
            question: `${courseName} - Question ${questionNumber}: Sample essay question requiring detailed explanation about ${courseName.toLowerCase()} topics and applications.`,
            type: "text",
            placeholder: `Provide a comprehensive answer about ${courseName.toLowerCase()}. Include examples, explanations, and relevant details in your response...`,
          };
        }
      }

      // Function to create question element
      function createQuestionElement(question, index) {
        const questionDiv = document.createElement("div");
        questionDiv.className = "question-item";

        // Question header
        const questionHeader = document.createElement("div");
        questionHeader.className = "question-header";

        const questionNumber = document.createElement("div");
        questionNumber.className = "question-number";
        questionNumber.textContent = index + 1;

        const questionText = document.createElement("div");
        questionText.className = "question-text";
        questionText.textContent = question.question;

        const questionType = document.createElement("div");
        questionType.className = "question-type";
        questionType.textContent =
          question.type === "multiple" ? "Multiple Choice" : "Written Response";

        questionHeader.appendChild(questionNumber);
        questionHeader.appendChild(questionText);
        questionHeader.appendChild(questionType);
        questionDiv.appendChild(questionHeader);

        // Question content
        if (question.type === "multiple" && question.options) {
          // Multiple choice options
          const optionsContainer = document.createElement("div");

          question.options.forEach((option, optIndex) => {
            const optionDiv = document.createElement("div");
            optionDiv.className = "option-item";

            const optionInput = document.createElement("input");
            optionInput.type = "radio";
            optionInput.name = `question_${index}`;
            optionInput.value = optIndex;
            optionInput.className = "option-input";

            const optionText = document.createElement("span");
            optionText.textContent = option;

            // Add selection effect
            optionInput.addEventListener("change", function () {
              // Remove selection from all options in this question
              optionsContainer
                .querySelectorAll(".option-item")
                .forEach((item) => {
                  item.classList.remove("selected");
                });
              // Add selection to current option
              optionDiv.classList.add("selected");
            });

            optionDiv.addEventListener("click", function () {
              optionInput.checked = true;
              optionInput.dispatchEvent(new Event("change"));
            });

            optionDiv.appendChild(optionInput);
            optionDiv.appendChild(optionText);
            optionsContainer.appendChild(optionDiv);
          });

          questionDiv.appendChild(optionsContainer);
        } else {
          // Text question
          const textarea = document.createElement("textarea");
          textarea.name = `question_${index}`;
          textarea.placeholder =
            question.placeholder || "Write your detailed answer here...";

          // Auto-expand functionality
          textarea.addEventListener("input", function () {
            this.style.height = "auto";
            this.style.height = Math.max(120, this.scrollHeight) + "px";
          });

          questionDiv.appendChild(textarea);
        }

        return questionDiv;
      }

      // Enhanced Form submission handler with Auto-Correction and EmailJS
      document
        .getElementById("assessment-form")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const studentName = document
            .getElementById("student-name")
            .value.trim();
          const studentEmail = document
            .getElementById("student-email")
            .value.trim();
          const courseName = document.getElementById("course-name").value;
          const assessmentType = document.getElementById(
            "exam-assignment-name"
          ).value;

          // Validation
          if (!studentName || !studentEmail || !courseName || !assessmentType) {
            showStatus(
              "info",
              "⚠️ Please fill in all required fields before submitting"
            );
            return;
          }

          // Email validation
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(studentEmail)) {
            showStatus("info", "⚠️ Please enter a valid email address");
            return;
          }

          // Collect answers
          const answers = collectAnswers();

          if (answers.length === 0) {
            showStatus(
              "info",
              "⚠️ Please answer at least one question before submitting"
            );
            return;
          }

          // Show loading with spinner
          const submitBtn = document.querySelector(".btn-submit");
          const originalText = submitBtn.innerHTML;
          submitBtn.innerHTML =
            '<span class="loading-spinner"></span>Submitting Assessment...';
          submitBtn.disabled = true;

          showStatus("loading", "📤 Processing your assessment...");

          try {
            // Perform auto-correction
            const correctionResults = performAutoCorrection(
              courseName,
              assessmentType,
              answers
            );

            // Show correction overlay with 15-second animation
            await showCorrectionResults(
              correctionResults,
              studentName,
              studentEmail,
              courseName,
              assessmentType
            );

            // Email submission happens after correction display
            await submitToEmail(
              studentName,
              studentEmail,
              courseName,
              assessmentType,
              answers,
              correctionResults
            );
          } catch (error) {
            console.error("Error during assessment processing:", error);
            showStatus(
              "error",
              "❌ Assessment processing failed. Please try again."
            );

            // Re-enable submit button
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
          }
        });

      // Auto-correction function
      function performAutoCorrection(
        courseName,
        assessmentType,
        studentAnswers
      ) {
        console.log(
          "🔍 Starting auto-correction for:",
          courseName,
          assessmentType
        );

        const correctAnswersForAssessment =
          correctAnswers[courseName]?.[assessmentType];
        if (!correctAnswersForAssessment) {
          console.warn(
            "No correct answers found for:",
            courseName,
            assessmentType
          );
          return {
            score: 0,
            totalQuestions: studentAnswers.length,
            corrections: [],
          };
        }

        let correctCount = 0;
        const corrections = [];

        studentAnswers.forEach((answer, index) => {
          const correctAnswer = correctAnswersForAssessment[index];
          if (!correctAnswer) return;

          let isCorrect = false;
          let correctText = "";
          let score = 0;

          if (correctAnswer.type === "multiple") {
            // For multiple choice, check if selected option index matches
            const questions = sampleQuestions[courseName][assessmentType];
            const question = questions[index];

            if (question && question.options) {
              // Find which option was selected
              let selectedOptionIndex = -1;
              for (let i = 0; i < question.options.length; i++) {
                if (question.options[i] === answer.answer) {
                  selectedOptionIndex = i;
                  break;
                }
              }

              isCorrect = selectedOptionIndex === correctAnswer.correct;
              correctText = question.options[correctAnswer.correct];
              score = isCorrect ? 1 : 0;
            }
          } else if (correctAnswer.type === "text") {
            // For text answers, check for keywords
            const answerText = answer.answer.toLowerCase();
            const keywords = correctAnswer.keywords || [];
            const keywordMatches = keywords.filter((keyword) =>
              answerText.includes(keyword.toLowerCase())
            ).length;

            const keywordPercent =
              keywords.length > 0 ? keywordMatches / keywords.length : 0;

            if (keywordPercent >= 0.6) {
              isCorrect = true;
              score = 1;
            } else if (keywordPercent >= 0.3) {
              isCorrect = "partial";
              score = 0.5;
            } else {
              isCorrect = false;
              score = 0;
            }

            correctText = `Should include keywords: ${keywords.join(", ")}`;
          }

          correctCount += score;

          corrections.push({
            questionIndex: index,
            questionText: answer.question,
            studentAnswer: answer.answer,
            correctAnswer: correctText,
            isCorrect: isCorrect,
            score: score,
            type: answer.type,
          });
        });

        const finalScore = Math.round(
          (correctCount / studentAnswers.length) * 100
        );

        return {
          score: finalScore,
          correctCount: correctCount,
          totalQuestions: studentAnswers.length,
          corrections: corrections,
        };
      }

      // Show correction results with animations
      async function showCorrectionResults(
        results,
        studentName,
        studentEmail,
        courseName,
        assessmentType
      ) {
        return new Promise((resolve) => {
          // Create correction overlay
          const overlay = document.createElement("div");
          overlay.className = "correction-overlay";
          overlay.innerHTML = `
            <div class="correction-content">
              <div class="correction-header">
                <h2 class="correction-title">📊 Assessment Results</h2>
                <p class="correction-subtitle">Auto-correction in progress...</p>
                <div class="correction-progress">
                  <div class="correction-progress-bar"></div>
                </div>
              </div>
              
              <div class="warning-message">
                <i class="fas fa-exclamation-triangle"></i>
                <strong>Please do not leave this page or close the window!</strong><br>
                Correction process is running. This will take <span class="countdown-timer">15</span> seconds.
              </div>

              <div class="score-summary" style="display: none;">
                <div class="score-circle">${results.score}%</div>
                <h3>Your Score: ${results.correctCount}/${results.totalQuestions}</h3>
                <p>Course: ${courseName} - ${assessmentType}</p>
                <p>Student: ${studentName}</p>
              </div>

              <div class="corrections-list"></div>

              <div class="download-section" style="display: none;">
                <h3><i class="fas fa-download"></i> Download Your Report</h3>
                <p>Your detailed assessment report is ready for download</p>
                <button class="btn-download" onclick="downloadReportCard()">
                  <i class="fas fa-file-pdf"></i> Download PDF Report
                </button>
              </div>
            </div>
          `;

          document.body.appendChild(overlay);

          // Show overlay with animation
          setTimeout(() => {
            overlay.classList.add("show");
          }, 100);

          // Store results globally for PDF generation
          window.assessmentResults = {
            results,
            studentName,
            studentEmail,
            courseName,
            assessmentType,
            timestamp: new Date(),
          };

          let countdown = 15;
          const countdownElement = overlay.querySelector(".countdown-timer");
          const progressBar = overlay.querySelector(".correction-progress-bar");

          const countdownInterval = setInterval(() => {
            countdown--;
            countdownElement.textContent = countdown;
            progressBar.style.width = ((15 - countdown) / 15) * 100 + "%";

            if (countdown <= 0) {
              clearInterval(countdownInterval);
              showDetailedCorrections();
            }
          }, 1000);

          function showDetailedCorrections() {
            const correctionsList = overlay.querySelector(".corrections-list");
            const scoreSection = overlay.querySelector(".score-summary");
            const downloadSection = overlay.querySelector(".download-section");
            const warningMessage = overlay.querySelector(".warning-message");

            // Hide warning and show score
            warningMessage.style.display = "none";
            scoreSection.style.display = "block";

            // Show corrections with animations
            results.corrections.forEach((correction, index) => {
              setTimeout(() => {
                const correctionItem = document.createElement("div");
                correctionItem.className = `correction-item ${
                  correction.isCorrect === true
                    ? "correct"
                    : correction.isCorrect === "partial"
                    ? "partial"
                    : "incorrect"
                }`;

                const statusIcon =
                  correction.isCorrect === true
                    ? "✅"
                    : correction.isCorrect === "partial"
                    ? "⚠️"
                    : "❌";
                const statusText =
                  correction.isCorrect === true
                    ? "Correct"
                    : correction.isCorrect === "partial"
                    ? "Partially Correct"
                    : "Incorrect";

                correctionItem.innerHTML = `
                  <div class="question-review">
                    ${statusIcon} Question ${index + 1}: ${statusText} (${
                  correction.score
                }/1 point)
                  </div>
                  <p><strong>Question:</strong> ${correction.questionText}</p>
                  <div class="answer-comparison">
                    <div class="your-answer">
                      <strong>Your Answer:</strong><br>
                      ${correction.studentAnswer}
                    </div>
                    <div class="correct-answer">
                      <strong>Correct Answer:</strong><br>
                      ${correction.correctAnswer}
                    </div>
                  </div>
                `;

                correctionsList.appendChild(correctionItem);

                setTimeout(() => {
                  correctionItem.classList.add("show");
                }, 100);
              }, index * 300);
            });

            // Show download section after all corrections are displayed
            setTimeout(() => {
              downloadSection.style.display = "block";
              resolve();
            }, results.corrections.length * 300 + 1000);
          }
        });
      }

      // Generate and download professional PDF report
      function downloadReportCard() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const results = window.assessmentResults;

        // Set up colors and fonts
        const primaryColor = [37, 99, 235];
        const successColor = [16, 185, 129];
        const errorColor = [239, 68, 68];
        const textColor = [31, 41, 55];

        // Header with logo space and title
        doc.setFillColor(...primaryColor);
        doc.rect(0, 0, 210, 40, "F");

        // Title
        doc.setTextColor(255, 255, 255);
        doc.setFontSize(24);
        doc.setFont("helvetica", "bold");
        doc.text("InterroPlatform Assessment Report", 20, 25);

        // Professional header line
        doc.setDrawColor(...primaryColor);
        doc.setLineWidth(0.5);
        doc.line(20, 45, 190, 45);

        // Student Information Section
        doc.setTextColor(...textColor);
        doc.setFontSize(16);
        doc.setFont("helvetica", "bold");
        doc.text("Student Information", 20, 60);

        doc.setFontSize(12);
        doc.setFont("helvetica", "normal");
        doc.text(`Name: ${results.studentName}`, 20, 70);
        doc.text(`Email: ${results.studentEmail}`, 20, 78);
        doc.text(`Course: ${results.courseName}`, 20, 86);
        doc.text(`Assessment: ${results.assessmentType}`, 20, 94);
        doc.text(`Date: ${results.timestamp.toLocaleDateString()}`, 20, 102);
        doc.text(`Time: ${results.timestamp.toLocaleTimeString()}`, 120, 102);

        // Score Summary Section
        doc.setFontSize(16);
        doc.setFont("helvetica", "bold");
        doc.text("Score Summary", 20, 120);

        // Score circle background
        const scoreColor =
          results.results.score >= 70 ? successColor : errorColor;
        doc.setFillColor(...scoreColor);
        doc.circle(50, 140, 15, "F");

        // Score text
        doc.setTextColor(255, 255, 255);
        doc.setFontSize(18);
        doc.setFont("helvetica", "bold");
        doc.text(results.results.score + "%", 43, 145);

        // Score details
        doc.setTextColor(...textColor);
        doc.setFontSize(12);
        doc.setFont("helvetica", "normal");
        doc.text(
          `Correct Answers: ${results.results.correctCount}/${results.results.totalQuestions}`,
          80,
          135
        );
        doc.text(`Percentage: ${results.results.score}%`, 80, 143);

        const grade =
          results.results.score >= 90
            ? "A"
            : results.results.score >= 80
            ? "B"
            : results.results.score >= 70
            ? "C"
            : results.results.score >= 60
            ? "D"
            : "F";
        doc.text(`Grade: ${grade}`, 80, 151);

        // Detailed Results Section
        let yPosition = 170;
        doc.setFontSize(16);
        doc.setFont("helvetica", "bold");
        doc.text("Detailed Results", 20, yPosition);
        yPosition += 15;

        results.results.corrections.forEach((correction, index) => {
          if (yPosition > 250) {
            doc.addPage();
            yPosition = 30;
          }

          const statusColor =
            correction.isCorrect === true
              ? successColor
              : correction.isCorrect === "partial"
              ? [245, 158, 11]
              : errorColor;

          // Question number and status
          doc.setFillColor(...statusColor);
          doc.circle(25, yPosition, 3, "F");

          doc.setTextColor(...textColor);
          doc.setFontSize(11);
          doc.setFont("helvetica", "bold");
          doc.text(`Question ${index + 1}:`, 35, yPosition + 1);

          const statusText =
            correction.isCorrect === true
              ? "Correct"
              : correction.isCorrect === "partial"
              ? "Partial"
              : "Incorrect";
          doc.text(`[${statusText}]`, 170, yPosition + 1);

          yPosition += 8;

          // Question text (truncated if too long)
          doc.setFont("helvetica", "normal");
          const questionText =
            correction.questionText.length > 60
              ? correction.questionText.substring(0, 60) + "..."
              : correction.questionText;
          doc.text(questionText, 35, yPosition);

          yPosition += 12;
        });

        // Footer with signature area
        const pageCount = doc.internal.getNumberOfPages();
        for (let i = 1; i <= pageCount; i++) {
          doc.setPage(i);

          // Footer line
          doc.setDrawColor(...primaryColor);
          doc.line(20, 280, 190, 280);

          // Signature section
          doc.setFontSize(10);
          doc.setTextColor(...textColor);
          doc.text("Instructor Signature: ________________________", 20, 290);
          doc.text("Date: ________________________", 120, 290);

          // Page number
          doc.text(`Page ${i} of ${pageCount}`, 180, 285);

          // Footer text
          doc.setFontSize(8);
          doc.setTextColor(100, 100, 100);
          doc.text(
            "Generated by InterroPlatform - Advanced AI Assessment System",
            20,
            295
          );
        }

        // Save the PDF
        const fileName = `${results.studentName}_${results.courseName}_${results.assessmentType}_Report.pdf`;
        doc.save(fileName);

        // Show success message
        showStatus("success", "✅ PDF Report downloaded successfully!");
      }

      // Email submission function (called after correction display)
      async function submitToEmail(
        studentName,
        studentEmail,
        courseName,
        assessmentType,
        answers,
        correctionResults
      ) {
        const submissionTime = new Date().toLocaleString();
        const timeSpent = document.getElementById("timer").textContent;

        // Format answers with corrections for email
        let formattedAnswers = answers
          .map((answer, index) => {
            const correction = correctionResults.corrections[index];
            const status =
              correction?.isCorrect === true
                ? "✅ Correct"
                : correction?.isCorrect === "partial"
                ? "⚠️ Partial"
                : "❌ Incorrect";
            const score = correction?.score || 0;

            return (
              `Question ${index + 1}: ${answer.question}\n` +
              `Student Answer: ${answer.answer}\n` +
              `Status: ${status} (${score}/1 point)\n` +
              `${"=".repeat(50)}\n`
            );
          })
          .join("\n");

        // Prepare email template parameters
        const templateParams = {
          to_email: EMAILJS_CONFIG.recipientEmail,
          student_name: studentName,
          student_email: studentEmail,
          course_name: courseName,
          assessment_type: assessmentType,
          submission_time: submissionTime,
          time_spent: timeSpent,
          total_questions: answers.length,
          score_percentage: correctionResults.score,
          correct_answers: correctionResults.correctCount,
          formatted_answers: formattedAnswers,
          summary: `Student: ${studentName} (${studentEmail})\nCourse: ${courseName}\nAssessment: ${assessmentType}\nScore: ${correctionResults.score}% (${correctionResults.correctCount}/${correctionResults.totalQuestions})\nTime Spent: ${timeSpent}\nSubmitted: ${submissionTime}`,
        };

        try {
          console.log("Sending email with results...", templateParams);

          const response = await emailjs.send(
            EMAILJS_CONFIG.serviceId,
            EMAILJS_CONFIG.templateId,
            templateParams
          );

          console.log("Email sent successfully:", response);
        } catch (error) {
          console.error("Error sending email:", error);
        }
      }

      // Function to collect answers
      function collectAnswers() {
        const answers = [];
        const questions = document.querySelectorAll(".question-item");

        questions.forEach((questionDiv, index) => {
          const questionText =
            questionDiv.querySelector(".question-text").textContent;
          let answer = "";

          // Check for multiple choice answer
          const selectedOption = questionDiv.querySelector(
            'input[type="radio"]:checked'
          );
          if (selectedOption) {
            const optionText =
              selectedOption.parentNode.querySelector("span").textContent;
            answer = optionText;
          }

          // Check for text answer
          const textarea = questionDiv.querySelector("textarea");
          if (textarea && textarea.value.trim()) {
            answer = textarea.value.trim();
          }

          if (answer) {
            answers.push({
              question: questionText,
              answer: answer,
              type: selectedOption ? "multiple" : "text",
            });
          }
        });

        return answers;
      }

      console.log("✅ InterroPlatform loaded successfully!");
      console.log("📚 Select a course to begin your assessment");
    </script>
  </body>
</html>
